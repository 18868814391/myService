(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7d403269"],{"1dce":function(t,e,a){"use strict";a.r(e);var n=a("5176"),c=a.n(n),s=(a("ac6a"),a("f61f")),i=(a("ed08"),{data:function(){return{avatar:s.a.defaultUserIcon,teamId:"",account:"",mute:!1,selfType:"normal"}},computed:{member:function(){var e=this,t=/(\d+)-(\w+)/.exec(this.$route.params.member),a=t[1];this.teamId=a;var n=t[2];this.account=n;var s={};this.$store.state.teamMembers[a]&&this.$store.state.teamMembers[a].forEach(function(t){t.account===n&&(s=c()(s,t)),t.account===e.$store.state.userUID&&(e.selfType=t.type)});var i=this.$store.state.userInfos[s.account];return s.account===this.$store.state.userUID&&(i=this.$store.state.myInfo),s.avatar=i?i.avatar:s.avatar||this.avatar,s.alias=i?i.nick:s.account||"account",this.mute=!!s.mute,s},memberType:function(){if(this.member)switch(this.member.type){case"owner":return"群主";case"manager":return"管理员";case"normal":return"普通成员"}return"普通成员"},infoInTeam:function(){return{nickInTeam:this.member.nickInTeam,memberType:this.member.type}},hasSetMemberTypePermission:function(){return"owner"===this.selfType&&"owner"!==this.member.type},hasMuteOrRemovePermission:function(){return"owner"===this.selfType?"owner"!==this.member.type:"manager"===this.selfType&&"normal"===this.member.type},isSelf:function(){return this.member.account===this.$store.state.userUID},hasSetNickPermission:function(){return"normal"!==this.selfType||this.isSelf}},methods:{changeMute:function(){var a=this;this.$store.dispatch("delegateTeamFunction",{functionName:"updateMuteStateInTeam",options:{teamId:this.teamId,account:this.account,mute:this.mute,done:function(t,e){t?a.$toast(t):a.$toast(a.mute?"已禁言":"已取消禁言")}}})},getUpdateCallBcak:function(){var a=this,i=this.member.account,r=this.$store,o=(this.$toast,function(t,e){t?a.$toast(t):(a.$toast("更改成功"),setTimeout(function(){history.go(-1)},200)),r.dispatch("hideLoading")});return function(t,e,a){r.dispatch("showLoading");var n=null,s={};"nickInTeam"===e?(n="updateNickInTeam",s.account=i,s.nickInTeam=a):"memberType"===e&&(n="manager"===a?"addTeamManagers":"removeTeamManagers",s.accounts=[i]),r.dispatch("delegateTeamFunction",{functionName:n,options:c()({teamId:t,done:o},s)})}},onEditItemClick:function(t,e,a,n){var s=this.isSelf&&"nickInTeam"===a;this.$store.dispatch("enterSettingPage",{title:t,inputType:e,updateKey:a,teamId:this.teamId,updateInfoInTeam:!!s,defaultValue:this.infoInTeam[a],confirmCallback:s?null:n,enable:!0})},remove:function(){var a=this;this.$store.dispatch("showLoading"),this.$store.dispatch("delegateTeamFunction",{functionName:"removeTeamMembers",options:{teamId:this.teamId,accounts:[this.member.account],done:function(t,e){a.$toast(t||"移除成功"),history.go(-1),a.$store.dispatch("hideLoading")}}})}}}),r=(a("9b74"),a("2877")),o=Object(r.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-inherit m-article p-membercard"},[a("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[a("h1",{staticClass:"m-tab-top"},[e._v("群名片")]),a("a",{attrs:{slot:"left"},slot:"left"})]),a("div",{staticClass:"g-body"},[a("div",{staticClass:"g-avatar"},[a("img",{staticClass:"icon u-circle",attrs:{slot:"icon",width:"50",height:"50",src:e.member&&e.member.avatar},slot:"icon"}),a("div",[e._v(e._s(e.member&&e.member.alias))])]),a("group",{staticClass:"m-group"},[a("cell",{attrs:{title:"群昵称",value:e.member.nickInTeam||"未设置","is-link":""},nativeOn:{click:function(t){return e.hasSetNickPermission?e.onEditItemClick("修改群昵称","text","nickInTeam",e.getUpdateCallBcak()):e.$toast("无权限")}}}),a("cell",{attrs:{title:"身份",value:e.memberType,"is-link":""},nativeOn:{click:function(t){return e.hasSetMemberTypePermission?e.onEditItemClick("身份","select","memberType",e.getUpdateCallBcak()):e.$toast("无权限")}}}),e.hasMuteOrRemovePermission?a("x-switch",{staticClass:"u-switch",attrs:{title:"设置禁言"},on:{"on-change":e.changeMute},model:{value:e.mute,callback:function(t){e.mute=t},expression:"mute"}}):e._e()],1),e.hasMuteOrRemovePermission?a("x-button",{staticClass:"u-btn",attrs:{mini:"",type:"warn"},nativeOn:{click:function(t){return e.remove(t)}}},[e._v("移出本群")]):e._e()],1)],1)},[],!1,null,"b38fb266",null);e.default=o.exports},"9b74":function(t,e,a){"use strict";var n=a("fc97");a.n(n).a},fc97:function(t,e,a){}}]);