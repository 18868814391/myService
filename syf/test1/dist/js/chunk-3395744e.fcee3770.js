(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3395744e"],{"3f13":function(s,t,e){},"76b6":function(s,t,e){"use strict";var o=e("3f13"),n=e.n(o);n.a},e7ee:function(s,t,e){"use strict";e.r(t);var o=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"g-inherit m-article p-chat-history"},[e("div",{staticClass:"Chat-nav"},[e("div",{on:{click:s.onClickBack}},[s._v("返回")]),e("span",[s._v(s._s(s.sessionName))]),e("div")]),e("div",{staticClass:"m-chat-main"},[e("chat-list",{directives:[{name:"touch",rawName:"v-touch:swipedown",value:s.loadMore,expression:"loadMore",arg:"swipedown"}],ref:"chatlist",attrs:{type:"session",canLoadMore:s.canLoadMore,msglist:s.msglist,userInfos:s.userInfos,myInfo:s.myInfo,isHistory:!0}})],1)])},n=[],i=(e("a481"),e("bd86")),r=(e("7f7f"),e("ef1a")),a=e("ed08"),c=e("5def"),u=e("b970"),h={beforeMount:function(){this.$store.state.isRefresh&&(location.href="#/chat/".concat(this.sessionId))},mounted:function(){this.$store.dispatch("resetNoMoreHistoryMsgs"),this.getHistoryMsgs()},updated:function(){var s=c["a"].getChatListHeight();c["a"].scrollChatListDown(s-this.currPagePos),this.currPagePos=s},components:Object(i["a"])({ChatList:r["a"]},u["h"].name,u["h"]),data:function(){return{leftBtnOptions:{backText:" ",preventGoBack:!0},currPagePos:0}},computed:{sessionId:function(){return this.$route.params.sessionId},sessionName:function(){var s=this.sessionId,t=null;if(/^p2p-/.test(s)){if(t=s.replace(/^p2p-/,""),t===this.$store.state.userUID)return"我的手机";if(this.isRobot)return this.robotInfos[t].nick||t;var e=this.userInfos[t]||{};return a["a"].getFriendAlias(e)}if(/^team-/.test(s))return"历史记录"},isRobot:function(){var s=this.sessionId,t=null;return!(!/^p2p-/.test(s)||(t=s.replace(/^p2p-/,""),!this.robotInfos[t]))},myInfo:function(){return this.$store.state.myInfo},userInfos:function(){return this.$store.state.userInfos},msglist:function(){var s=this.$store.state.currSessionMsgs;return s},robotInfos:function(){return this.$store.state.robotInfos},scene:function(){return a["a"].parseSession(this.sessionId).scene},to:function(){return a["a"].parseSession(this.sessionId).to},canLoadMore:function(){return!this.$store.state.noMoreHistoryMsgs}},methods:{getHistoryMsgs:function(){this.canLoadMore&&this.$store.dispatch("getHistoryMsgs",{scene:this.scene,to:this.to})},loadMore:function(){c["a"].getChatListScroll()<=5&&this.getHistoryMsgs()},onClickBack:function(){window.history.go(-1)}}},f=h,d=(e("76b6"),e("2877")),l=Object(d["a"])(f,o,n,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-3395744e.fcee3770.js.map