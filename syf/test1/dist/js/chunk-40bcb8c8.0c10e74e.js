(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-40bcb8c8"],{3897:function(t,e,a){},"3bf8":function(t,e,a){"use strict";a.r(e);var s={data:function(){return{selectIndex:0}},computed:{teamId:function(){return/(\d+)-(\d+)/.exec(this.$route.params.msgInfo)[1]},idServer:function(){return/(\d+)-(\d+)/.exec(this.$route.params.msgInfo)[2]},readAccounts:function(){return this.$store.state.teamMsgReadsDetail.readAccounts},unreadAccounts:function(){return this.$store.state.teamMsgReadsDetail.unreadAccounts}},created:function(){var s=this;this.$store.dispatch("delegateTeamFunction",{functionName:"getTeamMsgReadAccounts",options:{teamMsgReceipt:{teamId:this.teamId,idServer:this.idServer},done:function(t,e,a){t||s.$store.commit("initMsgReceiptDetail",a)}}})},methods:{},components:{TeamMember:a("86c6").a}},n=(a("7c8e"),a("2877")),c=Object(n.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-inherit m-article p-msg-receipt"},[a("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[a("h1",{staticClass:"m-tab-top"},[e._v("已读回执详情")]),a("a",{attrs:{slot:"left"},slot:"left"})]),a("div",{staticClass:"g-body"},[a("div",{staticClass:"select-bar"},[a("div",{staticClass:"item",class:{active:0===e.selectIndex},on:{click:function(t){e.selectIndex=0}}},[e._v("\n        未读 ("+e._s(e.unreadAccounts.length)+")\n      ")]),a("div",{staticClass:"item",class:{active:1===e.selectIndex},on:{click:function(t){e.selectIndex=1}}},[e._v("\n        已读 ("+e._s(e.readAccounts.length)+")\n      ")])])]),a("team-member",{attrs:{teamId:e.teamId,advanced:!0,showAllMode:!0,filterAccount:0===e.selectIndex?e.unreadAccounts:e.readAccounts}})],1)},[],!1,null,null,null);e.default=c.exports},"7c8e":function(t,e,a){"use strict";var s=a("ca55");a.n(s).a},"86c6":function(t,e,a){"use strict";var s=(a("ac6a"),a("5176")),c=a.n(s),n=(a("7514"),{props:{teamId:{type:String},advanced:{type:Boolean,default:!1},showAllMode:{type:Boolean,default:!1},filterAccount:{type:Array}},data:function(){return{removeMode:!1,hasManagePermission:!1,hasSearched:!1}},mounted:function(){void 0===this.$store.state.teamMembers[this.teamId]&&this.$store.dispatch("getTeamMembers",this.teamId)},computed:{teamInfo:function(){var e=this,t=this.$store.state.teamlist,a=t&&t.find(function(t){return t.teamId===e.teamId});if(a)return a},members:function(){var a=this,t=this.$store.state.teamMembers[this.teamId],s=this.$store.state.userInfos,n=[];if(t){if(t=t.map(function(t){var e=c()({},t);return e.valid=!0,e.account===a.$store.state.userUID?(e.alias="我",e.avatar=a.$store.state.myInfo.avatar,a.isOwner="owner"===e.type,a.hasManagePermission="normal"!==e.type):void 0===s[e.account]?(n.push(e.account),e.avatar=e.avatar||a.avatar,e.alias=e.nickInTeam||e.account):(e.avatar=s[e.account].avatar,e.alias=e.nickInTeam||s[e.account].nick),e}),0<n.length&&!this.hasSearched)for(this.hasSearched=!0;0<n.length;)this.searchUsers(n.splice(0,150));return t}return[]},membersInDisplay:function(){var t=this;return this.filterAccount?this.members.filter(function(e){return!!t.filterAccount.find(function(t){return t===e.account})}):this.advanced||this.showAllMode?this.members:this.members.slice(0,this.hasInvitePermission?3:4)},hasInvitePermission:function(){return this.advanced&&(this.hasManagePermission||this.teamInfo&&"all"===this.teamInfo.inviteMode)}},methods:{searchUsers:function(t){var e=this;this.$store.dispatch("searchUsers",{accounts:t,done:function(t){e.updateTeamMember(t)}})},updateTeamMember:function(t){var a=this;t.forEach(function(e){var t=a.members.find(function(t){return t.account===e.account});t&&(t.avatar=e.avatar,t.alias=t.nickInTeam||e.nick)})},triggerRemove:function(t,e){this.removeMode=!this.removeMode},remove:function(t,e){var a=this;this.$store.dispatch("showLoading"),this.$store.dispatch("delegateTeamFunction",{functionName:"removeTeamMembers",options:{teamId:this.teamId,accounts:[e.account],done:function(t,e){a.$toast("移除成功"),a.$store.dispatch("hideLoading")}}}),t.cancelBubble=!0,t.preventDefault()},onMemberClick:function(t){location.href=this.advanced?"#/teammembercard/".concat(t.id):"#/namecard/".concat(t.account)}}}),i=(a("9529"),a("2877")),r=Object(i.a)(n,function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"m-members",class:{"s-bg-white":a.advanced&&!a.showAllMode}},[a.hasInvitePermission&&!a.showAllMode?s("a",{staticClass:"u-member",attrs:{href:"#/teaminvite/"+a.teamId}},[s("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png",alt:""}}),s("span",[a._v("添加")])]):a._e(),a._l(a.membersInDisplay,function(e){return s("a",{key:e.account,staticClass:"u-member",on:{click:function(t){return a.onMemberClick(e)}}},[s("img",{staticClass:"avatar u-circle",attrs:{src:e.avatar}}),a.removeMode&&"owner"!=e.type&&e.account!=a.$store.state.userUID?s("span",{staticClass:"remove",on:{click:function(t){return a.remove(t,e)}}}):a._e(),"normal"!==e.type?s("span",{class:"manager"===e.type?"manager":"owner"}):a._e(),s("span",[a._v(a._s(e.alias))])])}),a.advanced?a._e():[s("a",{staticClass:"u-member",attrs:{href:"#/teaminvite/"+a.teamId}},[s("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png",alt:""}}),s("span",[a._v("添加")])]),a.hasManagePermission?s("div",{staticClass:"u-member",on:{click:function(t){return a.triggerRemove()}}},[s("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_delete.png",alt:""}}),s("span",[a._v("移除")])]):a._e()]],2)},[],!1,null,"aad428f0",null);e.a=r.exports},9529:function(t,e,a){"use strict";var s=a("3897");a.n(s).a},ca55:function(t,e,a){}}]);