{"version":3,"sources":["webpack:///./src/pages/SysMsgs.vue?5c1d","webpack:///./src/pages/SysMsgs.vue?c198","webpack:///src/pages/SysMsgs.vue","webpack:///./src/pages/SysMsgs.vue?8da8","webpack:///./src/pages/SysMsgs.vue?66f3"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SysMsgs_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SysMsgs_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","left-options","backText","model","value","callback","$$v","sysType","expression","_v","slot","on","click","$event","stopPropagation","clearMsgs","_l","msg","type","directives","name","rawName","arg","key","idServer","width","src","avatar","_s","from","showTime","desc","_e","deleteIdServer","state","mini","action-type","nativeOn","handleTeamApply","class","active","deleteMsg","title","showText","inline-desc","msgList","length","staticRenderFns","SysMsgsvue_type_script_lang_js_","mounted","$store","dispatch","updated","data","defaultAvatar","configs","defaultUserIcon","computed","userInfos","sysMsgs","_this","filter","concat","friend","alias","account","console","log","getTeamName","to","attach","team","op","nick","sort","msg1","msg2","time","customSysMsgs","_this2","scene","content","JSON","parse","methods","commit","that","$vux","confirm","show","onConfirm","teamId","teamlist","find","pass","action","functionName","options","done","error","obj","findTeamInfo","item","showDelBtn","vNode","_this3","stopBubble","setTimeout","hideDelBtn","pages_SysMsgsvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-44155956.164af271.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SysMsgs.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SysMsgs.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-inherit m-article\"},[_c('x-header',{staticClass:\"m-tab\",attrs:{\"left-options\":{backText: ' '}}},[_c('button-tab',{staticClass:\"m-tab-top\",model:{value:(_vm.sysType),callback:function ($$v) {_vm.sysType=$$v},expression:\"sysType\"}},[_c('button-tab-item',{staticClass:\"u-tab-top\"},[_vm._v(\"系统消息\")]),_c('button-tab-item',{staticClass:\"u-tab-top\"},[_vm._v(\"自定义消息\")])],1),_c('a',{attrs:{\"slot\":\"left\"},slot:\"left\"}),_c('a',{attrs:{\"slot\":\"right\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.clearMsgs($event)}},slot:\"right\"},[_vm._v(\"清空\")])],1),_c('div',{staticClass:\"m-article-main p-sysmsgs\"},[_c('group',{staticClass:\"u-list\"},[_vm._l((_vm.msgList),function(msg){return [(msg.type ===\"applyTeam\" || msg.type ===\"teamInvite\")?_c('cell',{directives:[{name:\"touch\",rawName:\"v-touch:swipeleft\",value:(_vm.showDelBtn),expression:\"showDelBtn\",arg:\"swipeleft\"},{name:\"touch\",rawName:\"v-touch:swiperight\",value:(_vm.hideDelBtn),expression:\"hideDelBtn\",arg:\"swiperight\"}],key:msg.idServer,staticClass:\"u-list-item\",attrs:{\"idServer\":msg.idServer}},[_c('img',{staticClass:\"icon\",attrs:{\"slot\":\"icon\",\"width\":\"24\",\"src\":msg.avatar},slot:\"icon\"}),_c('div',{staticClass:\"g-teamSys\",attrs:{\"slot\":\"child\"},slot:\"child\"},[_c('div',{staticClass:\"m-info\"},[_c('span',{staticClass:\"u-name\"},[_vm._v(_vm._s(msg.from))]),_c('span',{staticClass:\"u-time\"},[_vm._v(_vm._s(msg.showTime))]),_c('p',{staticClass:\"u-desc\"},[_vm._v(_vm._s(msg.desc))]),(msg.ps)?_c('p',{staticClass:\"u-desc\"},[_vm._v(_vm._s((\"留言:\" + (msg.ps))))]):_vm._e()]),(_vm.deleteIdServer !== msg.idServer)?_c('div',{staticClass:\"m-options\",attrs:{\"slot\":\"default\"},slot:\"default\"},[(msg.state === \"init\")?[_c('x-button',{attrs:{\"type\":\"primary\",\"mini\":true,\"action-type\":\"button\"},nativeOn:{\"click\":function($event){return _vm.handleTeamApply(msg, true)}}},[_vm._v(\"同意\")]),_c('x-button',{attrs:{\"type\":\"warn\",\"mini\":true,\"action-type\":\"button\"},nativeOn:{\"click\":function($event){return _vm.handleTeamApply(msg, false)}}},[_vm._v(\"拒绝\")])]:_c('div',{staticClass:\"u-msg-state\"},[_vm._v(\"\\n                \"+_vm._s(msg.state==='error'? '已过期' : msg.state==='rejected'?'已拒绝':'已同意')+\"\\n              \")])],2):_vm._e()]),_c('span',{staticClass:\"u-tag-del\",class:{active: _vm.deleteIdServer === msg.idServer},on:{\"click\":function($event){return _vm.deleteMsg(msg.idServer)}}})]):_c('cell',{directives:[{name:\"touch\",rawName:\"v-touch:swipeleft\",value:(_vm.showDelBtn),expression:\"showDelBtn\",arg:\"swipeleft\"},{name:\"touch\",rawName:\"v-touch:swiperight\",value:(_vm.hideDelBtn),expression:\"hideDelBtn\",arg:\"swiperight\"}],key:msg.idServer,staticClass:\"u-list-item\",attrs:{\"title\":msg.showText,\"value\":msg.showTime,\"inline-desc\":msg.desc,\"idServer\":msg.idServer}},[_c('img',{staticClass:\"icon\",attrs:{\"slot\":\"icon\",\"width\":\"24\",\"src\":msg.avatar},slot:\"icon\"}),_c('span',{staticClass:\"u-tag-del\",class:{active: _vm.deleteIdServer === msg.idServer},on:{\"click\":function($event){return _vm.deleteMsg(msg.idServer)}}})])]})],2),(!_vm.msgList || _vm.msgList.length<1)?_c('div',{staticClass:\"empty-hint\"},[_vm._v(\"暂无任何消息\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"g-inherit m-article\">\r\n    <x-header class=\"m-tab\" :left-options=\"{backText: ' '}\">\r\n      <button-tab class=\"m-tab-top\" v-model=\"sysType\">\r\n        <button-tab-item class=\"u-tab-top\">系统消息</button-tab-item>\r\n        <button-tab-item class=\"u-tab-top\">自定义消息</button-tab-item>\r\n      </button-tab>\r\n      <a slot=\"left\"></a>\r\n      <a slot=\"right\" @click.stop=\"clearMsgs\">清空</a>\r\n    </x-header>\r\n    <div class=\"m-article-main p-sysmsgs\">\r\n      <group class=\"u-list\">\r\n        <template v-for=\"msg in msgList\">\r\n          <cell \r\n            v-if='msg.type ===\"applyTeam\" || msg.type ===\"teamInvite\"'\r\n            class=\"u-list-item\"\r\n            :key=\"msg.idServer\"\r\n            :idServer =\"msg.idServer\"\r\n            v-touch:swipeleft=\"showDelBtn\"\r\n            v-touch:swiperight=\"hideDelBtn\"\r\n          > \r\n            <img class=\"icon\" slot=\"icon\" width=\"24\" :src=\"msg.avatar\">\r\n            <div slot=\"child\"  class='g-teamSys'>\r\n              <div class='m-info'>\r\n                <span class='u-name'>{{msg.from}}</span>\r\n                <span class='u-time'>{{msg.showTime}}</span>\r\n                <p class='u-desc'>{{msg.desc}}</p>\r\n                <p v-if='msg.ps' class='u-desc'>{{`留言:${msg.ps}`}}</p>\r\n              </div>\r\n              <div class='m-options' slot='default' v-if='deleteIdServer !== msg.idServer'>\r\n                <template v-if='msg.state === \"init\"'>\r\n                  <x-button type=\"primary\" :mini='true' action-type=\"button\" @click.native=\"handleTeamApply(msg, true)\">同意</x-button>\r\n                  <x-button type=\"warn\" :mini='true' action-type=\"button\" @click.native=\"handleTeamApply(msg, false)\">拒绝</x-button>\r\n                </template>\r\n                <div v-else class='u-msg-state'>\r\n                  {{msg.state==='error'? '已过期' : msg.state==='rejected'?'已拒绝':'已同意'}}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <span class=\"u-tag-del\" :class=\"{active: deleteIdServer === msg.idServer}\" @click=\"deleteMsg(msg.idServer)\"></span>\r\n          </cell>\r\n          <cell\r\n            v-else\r\n            class=\"u-list-item\"\r\n            :title=\"msg.showText\"\r\n            :value=\"msg.showTime\"\r\n            :inline-desc=\"msg.desc\"\r\n            :key=\"msg.idServer\"\r\n            :idServer =\"msg.idServer\"\r\n            v-touch:swipeleft=\"showDelBtn\"\r\n            v-touch:swiperight=\"hideDelBtn\"\r\n          >\r\n            <img class=\"icon\" slot=\"icon\" width=\"24\" :src=\"msg.avatar\">\r\n            <span class=\"u-tag-del\" :class=\"{active: deleteIdServer === msg.idServer}\" @click=\"deleteMsg(msg.idServer)\"></span>\r\n          </cell>\r\n        </template>\r\n      </group>\r\n       <div class='empty-hint' v-if='!msgList || msgList.length<1'>暂无任何消息</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport config from '../configs'\r\nexport default {\r\n  // 进入该页面，文档被挂载\r\n  mounted () {\r\n    this.$store.dispatch('markSysMsgRead')\r\n    this.$store.dispatch('markCustomSysMsgRead')\r\n  },\r\n  updated () {\r\n    this.$store.dispatch('markSysMsgRead')\r\n    this.$store.dispatch('markCustomSysMsgRead')\r\n  },\r\n  data () {\r\n    return {\r\n      sysType: 0, // 系统消息 0, 自定义消息 1,\r\n      defaultAvatar: config.defaultUserIcon,\r\n      deleteIdServer: ''\r\n    }\r\n  },\r\n  computed: {\r\n    userInfos () {\r\n      return this.$store.state.userInfos || {}\r\n    },\r\n    sysMsgs () {\r\n      let sysMsgs = this.$store.state.sysMsgs.filter(msg => {\r\n        switch (msg.type) {\r\n          case 'addFriend':\r\n            msg.showText = `${msg.friend.alias || msg.friend.account} 添加您为好友~`\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar\r\n            return true\r\n          case 'deleteFriend':\r\n            msg.showText = `${msg.from} 将您从好友中删除`\r\n            msg.avatar = this.userInfos[msg.from].avatar\r\n            return false\r\n          case 'applyTeam':\r\n            console.log('applyTeam', msg)\r\n            msg.showText = msg.from\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar || this.defaultAvatar\r\n            msg.desc = `申请加入群:${this.getTeamName(msg.to)}`\r\n            return true\r\n          case 'teamInvite':\r\n            msg.showText = msg.attach.team.name\r\n            msg.avatar = this.userInfos[msg.from] && this.userInfos[msg.from].avatar || this.defaultAvatar\r\n            msg.desc = `邀请你加入群${msg.to}`\r\n            return true\r\n          case 'rejectTeamApply':\r\n            msg.showText = msg.attach.team.name\r\n            msg.desc ='管理员拒绝你加入本群'\r\n            msg.avatar = msg.attach.team.avatar || this.defaultAvatar\r\n            return true\r\n          case 'rejectTeamInvite':\r\n            let op = this.userInfos[msg.from]\r\n            msg.showText = op.nick\r\n            msg.avatar = op.avatar || this.defaultAvatar\r\n            msg.desc = `${op.nick}拒绝了群${this.getTeamName(msg.to)}的入群邀请`\r\n            return true\r\n        }\r\n        console.log(msg)\r\n        return false\r\n      })\r\n      sysMsgs.sort((msg1, msg2)=>{\r\n        // 最新的排在前\r\n        return msg2.time - msg1.time\r\n      })\r\n      return sysMsgs\r\n    },\r\n    customSysMsgs () {\r\n      let customSysMsgs = this.$store.state.customSysMsgs.filter(msg => {\r\n        if (msg.scene === 'p2p') {\r\n          let content = JSON.parse(msg.content)\r\n          msg.showText = `${content.content}`\r\n          msg.avatar = this.userInfos[msg.from].avatar\r\n          return msg\r\n        }\r\n        return false\r\n      })\r\n      return customSysMsgs\r\n    },\r\n    msgList() {\r\n      return this.sysType ===  0 ? this.sysMsgs : this.customSysMsgs\r\n    }\r\n    \r\n  },\r\n  methods: {\r\n    deleteMsg(idServer){\r\n      this.$store.commit('deleteSysMsgs', {\r\n        type: this.sysType,\r\n        idServer: idServer,\r\n      })\r\n    },\r\n    clearMsgs () {\r\n      var that = this\r\n      this.$vux.confirm.show({\r\n        title: '确认要清空消息吗？',\r\n        onConfirm () {\r\n          that.$store.dispatch('resetSysMsgs', {\r\n            type: that.sysType\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getTeamName(teamId) {\r\n      let team = this.$store.state.teamlist.find(team => {\r\n        return team.teamId === teamId\r\n      })\r\n      return team && team.name || ''\r\n    },\r\n    handleTeamApply(msg, pass) {\r\n      let action\r\n      switch (msg.type) {\r\n        case 'applyTeam':\r\n          action = pass ? 'passTeamApply' : 'rejectTeamApply'\r\n          break;\r\n         case 'teamInvite':\r\n          action = pass ? 'acceptTeamInvite' : 'rejectTeamInvite'\r\n          break;\r\n        default:\r\n          return\r\n      }\r\n      this.$store.dispatch('delegateTeamFunction', {\r\n        functionName: action, \r\n        options: {\r\n          idServer: msg.idServer,\r\n          teamId: msg.to,\r\n          from: msg.from,\r\n          done: (error, obj)=>{\r\n            console.log('handleDone', obj)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    findTeamInfo(teamId) {\r\n      var team = this.$store.state.teamlist.find(item =>{\r\n        return item.teamId === teamId\r\n      })\r\n      return team && team.name || teamId\r\n    },\r\n    showDelBtn (vNode) {\r\n      if (vNode && vNode.data && vNode.data.attrs) {\r\n        this.deleteIdServer = vNode.data.attrs.idServer\r\n        this.stopBubble = true\r\n        setTimeout(() => {\r\n          this.stopBubble = false\r\n        }, 20)\r\n      }\r\n    },\r\n    hideDelBtn () {\r\n      if (this.deleteIdServer !== null && !this.stopBubble) {\r\n        // 用于判断是否前置状态是显示删除按钮\r\n        this.deleteIdServer = null\r\n        return true\r\n      }\r\n      return false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style type=\"text/css\">\r\n  .p-sysmsgs {\r\n    .u-list {\r\n      height: 100%;\r\n      overflow-y: scroll;\r\n    }\r\n    p {\r\n      word-wrap: normal;\r\n      word-break: break-all;\r\n      color: #333;\r\n    }\r\n    \r\n    .g-teamSys {\r\n      display: flex;\r\n      flex-grow: 100;\r\n      justify-content: space-between;\r\n      align-items: center;\r\n      overflow: hidden;\r\n      \r\n      .m-info {\r\n        flex-shrink: 1;\r\n        overflow: hidden;\r\n\r\n        .u-time {\r\n          color: #aaa;\r\n        }\r\n        .u-desc {\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n          color: #aaa;\r\n          font-size: 1rem;\r\n        }\r\n      }\r\n\r\n      .m-options{\r\n        display: flex;\r\n        align-items: center;\r\n        \r\n        .weui-btn.weui-btn_mini {\r\n          padding: 0;\r\n          width: 3rem;\r\n          height: 2rem;\r\n        }\r\n        \r\n        .weui-btn + .weui-btn {\r\n          margin-top: 0;\r\n          margin-left: 0.5rem;\r\n        }\r\n      }\r\n    }\r\n    .u-msg-state {\r\n      color: #aaa;\r\n      font-size: .9rem;\r\n    }\r\n    .empty-hint{\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      top: 5rem;  \r\n      margin: auto;\r\n      text-align: center;\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SysMsgs.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SysMsgs.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SysMsgs.vue?vue&type=template&id=5ba7fd85&\"\nimport script from \"./SysMsgs.vue?vue&type=script&lang=js&\"\nexport * from \"./SysMsgs.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SysMsgs.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}