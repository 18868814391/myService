{"version":3,"sources":["webpack:///./src/view/im/index.vue?a778","webpack:///src/view/im/index.vue","webpack:///./src/view/im/index.vue?3104","webpack:///./src/view/im/index.vue","webpack:///./src/view/im/index.vue?6b4f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","$event","changeNav","_v","directives","name","rawName","value","navType","expression","_l","data","item","index","chating","key","goChat","id","scene","_s","to","lastMsg","type","text","_e","fromNick","timeString","updateTime","class","flow","attrs","domProps","input","target","composing","sendMsg","send","staticStyle","height","_m","nick","staticRenderFns","imvue_type_script_lang_js_","nim","timer","openChatRoom","chatItem","chatId","chatAdmin","chatData","beforeDestroy","self","clearInterval","created","SDK","NIM","getInstance","appKey","account","token","onconnect","onConnect","onerror","onError","onwillreconnect","onWillReconnect","ondisconnect","onDisconnect","onloginportschange","onLoginPortsChange","onblacklist","onBlacklist","onsyncmarkinblacklist","onMarkInBlacklist","onmutelist","onMutelist","onsyncmarkinmutelist","onMarkInMutelist","onfriends","onFriends","onsyncfriendaction","onSyncFriendAction","onmyinfo","onMyInfo","onupdatemyinfo","onUpdateMyInfo","onusers","onUsers","onupdateuser","onUpdateUser","onrobots","onRobots","onteams","onTeams","onsynccreateteam","onCreateTeam","onUpdateTeam","onteammembers","onTeamMembers","onupdateteammember","onUpdateTeamMember","onTeamMsgReceipt","onsessions","onSessions","onupdatesession","onUpdateSession","onroamingmsgs","onRoamingMsgs","onofflinemsgs","onOfflineMsgs","onmsg","onMsg","onofflinesysmsgs","onOfflineSysMsgs","onsysmsg","onSysMsg","onupdatesysmsg","onUpdateSysMsg","onsysmsgunread","onSysMsgUnread","onupdatesysmsgunread","onUpdateSysMsgUnread","onofflinecustomsysmsgs","onOfflineCustomSysMsgs","oncustomsysmsg","onCustomSysMsg","onbroadcastmsg","onBroadcastMsg","onbroadcastmsgs","onBroadcastMsgs","onsyncdone","onSyncDone","methods","d","stamp","Date","parse_int_default","toLocaleString","substr","i","msgs","console","log","setTimeout","document","documentElement","scrollTop","scrollHeight","sendText","done","sendMsgDone","error","msg","idClient","pushMsg","obj","retryCount","duration","code","loginPorts","blacklist","mergeRelations","cutRelations","invalid","refreshBlacklistUI","isAdd","addToBlacklist","removeFromBlacklist","record","mutelist","refreshMutelistUI","addToMutelist","removeFromMutelist","friends","mergeFriends","cutFriends","refreshFriendsUI","ps","onAddFriend","friend","onDeleteFriend","onUpdateFriend","cutFriendsByAccounts","user","myInfo","updateMyInfoUI","util","merge","users","mergeUsers","robots","teams","mergeTeams","onInvalidTeams","cutTeams","invalidTeams","refreshTeamsUI","team","teamId","members","owner","teamMembers","mergeTeamMembers","cutTeamMembers","refreshTeamMembersUI","onSyncTeamMembersDone","teamMember","teamMsgReceipts","sessions","mergeSessions","updateSessionsUI","session","is_array_default","sessionId","mergeMsgs","sysMsgs","pushSysMsgs","sysMsg","mergeSysMsgs","refreshSysMsgsUI","sysMsgUnread","timeOBJ","ddd","stringify_default","JSON","parse","view_imvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-2dfd7466.bddeb354.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"IM-page\"},[_c('div',{staticClass:\"IM-Nav\"},[_c('div',{on:{\"click\":function($event){return _vm.changeNav(1)}}},[_vm._v(\"最近会话\")]),_c('div',{on:{\"click\":function($event){return _vm.changeNav(2)}}},[_vm._v(\"通讯录\")]),_c('div',{on:{\"click\":function($event){return _vm.changeNav(3)}}},[_vm._v(\"设置\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.navType==1),expression:\"navType==1\"}]},[_vm._l((_vm.data.sessions),function(item,index){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.chating),expression:\"!chating\"}],key:index,staticClass:\"IM-sessions\",on:{\"click\":function($event){return _vm.goChat(item.id,item)}}},[(item.scene=='p2p')?_c('div',[_c('div',{staticClass:\"IM-sessions-t1\"},[_vm._v(_vm._s(item.to))]),(item.lastMsg.type=='text')?_c('div',{staticClass:\"IM-sessions-t2\"},[_vm._v(\" \"+_vm._s(item.lastMsg.text))]):_vm._e(),(item.lastMsg.type!='text')?_c('div',{staticClass:\"IM-sessions-t2\"},[_vm._v(\" [\"+_vm._s(item.lastMsg.type)+\"]\")]):_vm._e()]):_vm._e(),(item.scene=='team')?_c('div',[_c('div',{staticClass:\"IM-sessions-t1\"},[_vm._v(\"群消息\")]),(item.lastMsg.type=='text')?_c('div',{staticClass:\"IM-sessions-t2\"},[_vm._v(\" \"+_vm._s(item.lastMsg.fromNick)+\"：\"+_vm._s(item.lastMsg.text))]):_vm._e(),(item.lastMsg.type!='text')?_c('div',{staticClass:\"IM-sessions-t2\"},[_vm._v(\" [\"+_vm._s(item.lastMsg.type)+\"]\")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"IM-sessions-t3\"},[_vm._v(_vm._s(_vm.timeString(item.updateTime)))])])}),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chating),expression:\"chating\"}],staticClass:\"backButton\",on:{\"click\":function($event){_vm.chating=!_vm.chating}}},[_vm._v(\"后退\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chating),expression:\"chating\"}],staticClass:\"chat-rom\"},_vm._l((_vm.chatData),function(item,index){return _c('div',{key:index,staticClass:\"chat-List\",class:item.flow=='out'?'chat-List-r':''},[_c('div',{staticClass:\"chat-List-t\"},[_vm._v(_vm._s(item.fromNick))]),_c('div',{staticClass:\"chat-List-c\",class:item.flow=='out'?'chat-List-c-r':''},[_vm._v(_vm._s(item.text))])])}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chating),expression:\"chating\"}],staticClass:\"chat-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sendMsg),expression:\"sendMsg\"}],attrs:{\"type\":\"text\",\"name\":\"\",\"id\":\"\"},domProps:{\"value\":(_vm.sendMsg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.sendMsg=$event.target.value}}}),_c('button',{on:{\"click\":_vm.send}},[_vm._v(\"发送\")])]),_c('div',{staticStyle:{\"height\":\"100px\"}})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.navType==2),expression:\"navType==2\"}]},[_vm._m(0),_c('div',{staticClass:\"album-b2\"},[_c('div',[_vm._v(\"群\")]),_vm._l((_vm.data.teams),function(item,index){return _c('div',{key:index},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(item.name)+\"\\n\\t\\t\\t\")])}),_c('hr')],2),_c('div',{staticClass:\"album-b2\"},[_c('div',[_vm._v(\"好友列表\")]),_vm._l((_vm.data.users),function(item,index){return _c('div',{key:index},[_vm._v(\"\\n\\t\\t\\t\\t\"+_vm._s(item.nick)+\"\\n\\t\\t\\t\")])}),_c('hr')],2),_vm._m(1),_vm._m(2)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"album-b1\"},[_c('button',[_vm._v(\"添加好友/群\")]),_c('button',[_vm._v(\"创建组/群\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"album-b2\"},[_c('div',[_vm._v(\"机器人\")]),_c('hr')])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"album-b2\"},[_c('div',[_vm._v(\"黑名单\")]),_c('hr')])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"IM-page\">\r\n\t\t<div class=\"IM-Nav\">\r\n\t\t\t<div @click=\"changeNav(1)\">最近会话</div>\r\n\t\t\t<div @click=\"changeNav(2)\">通讯录</div>\r\n\t\t\t<div @click=\"changeNav(3)\">设置</div>\r\n\t\t</div>\r\n\t\t\r\n\t<div v-show=\"navType==1\">\r\n    <div class=\"IM-sessions\" v-for=\"(item,index) in data.sessions\" :key=\"index\" @click=\"goChat(item.id,item)\" v-show=\"!chating\">\r\n\t\t\t<div v-if=\"item.scene=='p2p'\">\r\n        <div class=\"IM-sessions-t1\">{{item.to}}</div>\r\n\t\t\t\t<div class=\"IM-sessions-t2\" v-if=\"item.lastMsg.type=='text'\"> {{item.lastMsg.text}}</div>\r\n\t\t\t\t<div class=\"IM-sessions-t2\" v-if=\"item.lastMsg.type!='text'\"> [{{item.lastMsg.type}}]</div>\t\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"item.scene=='team'\">\r\n        <div class=\"IM-sessions-t1\">群消息</div>\r\n\t\t\t\t<div class=\"IM-sessions-t2\" v-if=\"item.lastMsg.type=='text'\"> {{item.lastMsg.fromNick}}：{{item.lastMsg.text}}</div>\r\n\t\t\t\t<div class=\"IM-sessions-t2\" v-if=\"item.lastMsg.type!='text'\"> [{{item.lastMsg.type}}]</div>\t\t\t\r\n\t\t\t</div>\r\n\t\t\t\t<div class=\"IM-sessions-t3\">{{timeString(item.updateTime)}}</div>\r\n    </div>\r\n\r\n\t\t<button v-show=\"chating\" @click=\"chating=!chating\" class=\"backButton\">后退</button>\r\n\t\t<div class=\"chat-rom\" v-show=\"chating\">\r\n\t\t\t<div class=\"chat-List\" v-for=\"(item,index) in chatData\" :key=\"index\" :class=\"item.flow=='out'?'chat-List-r':''\">\r\n\t\t\t\t<div class=\"chat-List-t\">{{item.fromNick}}</div>\r\n\t\t\t\t<div class=\"chat-List-c\" :class=\"item.flow=='out'?'chat-List-c-r':''\">{{item.text}}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"chat-input\" v-show=\"chating\">\r\n\t\t\t<input type=\"text\" name=\"\" id=\"\" v-model=\"sendMsg\">\r\n\t\t\t<button @click=\"send\">发送</button>\r\n\t\t</div>\r\n\t\t<div style=\"height:100px;\"></div>\r\n\t</div>\r\n\r\n\t<div v-show=\"navType==2\">\r\n\t\t<div class=\"album-b1\">\r\n\t\t\t<button>添加好友/群</button>\r\n\t\t\t<button>创建组/群</button>\r\n\t\t</div>\r\n\t\t<div class=\"album-b2\">\r\n\t\t\t<div>群</div>\r\n\t\t\t<div v-for=\"(item,index) in data.teams\" :key=\"index\">\r\n\t\t\t\t{{item.name}}\r\n\t\t\t</div>\r\n\t\t\t<hr>\r\n\t\t</div>\r\n\t\t<div class=\"album-b2\">\r\n\t\t\t<div>好友列表</div>\r\n\t\t\t<div v-for=\"(item,index) in data.users\" :key=\"index\">\r\n\t\t\t\t{{item.nick}}\r\n\t\t\t</div>\r\n\t\t\t<hr>\t\t\t\t\t\r\n\t\t</div>\r\n\t\t<div class=\"album-b2\">\r\n\t\t\t<div>机器人</div>\r\n\t\t\t<hr>\r\n\t\t</div>\r\n\t\t<div class=\"album-b2\">\r\n\t\t\t<div>黑名单</div>\r\n\t\t\t<hr>\r\n\t\t</div>\t\t\r\n\t</div>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport { timeString } from '@/utils/auth.js';\r\nexport default {\r\n  data(){\r\n    return{\r\n\t\tnavType:2,\r\n    chating:false,//正在开启会话栏中  \r\n    data:{},\r\n    nim:null,\r\n    timer:null,\r\n    openChatRoom:false,\r\n\t  chatItem:'',//聊天对象OBJ\r\n\t  chatId:'',//聊天对象id\r\n\t  chatAdmin:'',//聊天对象账户\r\n\t  chatData:null,//聊天内容\r\n\t  sendMsg:'',\r\n    }\r\n  },\r\n\tbeforeDestroy(){\r\n\t\tconst self=this;\r\n\t\tclearInterval(self.timer);\r\n\t},\r\n  created(){\r\n    const self=this;\r\n    var nim = SDK.NIM.getInstance({\r\n      // debug: true,\r\n      appKey: '45c6af3c98409b18a84451215d0bdd6e',\r\n      account: 'pptvvx',\r\n      token: '153719072fddad21235b126d4f0436dc',\r\n        onconnect: self.onConnect,\r\n        onerror: self.onError,\r\n        onwillreconnect: self.onWillReconnect,\r\n        ondisconnect: self.onDisconnect,\r\n        // 多端登录\r\n        onloginportschange: self.onLoginPortsChange,\r\n        // 用户关系\r\n        onblacklist: self.onBlacklist,\r\n        onsyncmarkinblacklist: self.onMarkInBlacklist,\r\n        onmutelist: self.onMutelist,\r\n        onsyncmarkinmutelist: self.onMarkInMutelist,\r\n        // 好友关系\r\n        onfriends: self.onFriends,\r\n        onsyncfriendaction: self.onSyncFriendAction,\r\n        // 用户名片\r\n        onmyinfo: self.onMyInfo,\r\n        onupdatemyinfo: self.onUpdateMyInfo,\r\n        onusers: self.onUsers,\r\n        onupdateuser: self.onUpdateUser,\r\n        // 机器人列表的回调\r\n        onrobots: self.onRobots,\r\n        // 群组\r\n        onteams:self.onTeams,\r\n        onsynccreateteam: self.onCreateTeam,\r\n        onUpdateTeam: self.onUpdateTeam,\r\n        onteammembers: self.onTeamMembers,\r\n        // onsyncteammembersdone: onSyncTeamMembersDone,\r\n        onupdateteammember: self.onUpdateTeamMember,\r\n        // 群消息业务已读通知\r\n        onTeamMsgReceipt: self.onTeamMsgReceipt,\r\n        // 会话\r\n        onsessions: self.onSessions,\r\n        onupdatesession: self.onUpdateSession,\r\n        // 消息\r\n        onroamingmsgs: self.onRoamingMsgs,\r\n        onofflinemsgs: self.onOfflineMsgs,\r\n        onmsg: self.onMsg,\r\n        // 系统通知\r\n        onofflinesysmsgs: self.onOfflineSysMsgs,\r\n        onsysmsg: self.onSysMsg,\r\n        onupdatesysmsg: self.onUpdateSysMsg,\r\n        onsysmsgunread: self.onSysMsgUnread,\r\n        onupdatesysmsgunread: self.onUpdateSysMsgUnread,\r\n        onofflinecustomsysmsgs: self.onOfflineCustomSysMsgs,\r\n        oncustomsysmsg: self.onCustomSysMsg,\r\n        // 收到广播消息\r\n        onbroadcastmsg: self.onBroadcastMsg,\r\n        onbroadcastmsgs: self.onBroadcastMsgs,\r\n        // 同步完成\r\n        onsyncdone: self.onSyncDone\r\n    });\r\n    this.nim=nim\r\n  },\r\n  methods:{\r\n\t\tchangeNav(d){\r\n\t\t\tthis.navType=d;\r\n\t\t},\r\n\t\ttimeString(stamp){\r\n\t\t\treturn new Date(parseInt(stamp)).toLocaleString().substr(0,22) \r\n\t\t},\r\n\t\tgoChat(d,i){\r\n            this.chating=true;\r\n            if(i.scene=='p2p'){\r\n                this.chatId=d;\r\n                this.chatItem=i;\r\n                if(i&&i.to){\r\n                    this.chatAdmin=i.to;\r\n                }\r\n                this.chatData=this.data.msgs[i.id];\r\n            }else if(i.scene=='team'){\r\n                this.chatId=i.to;\r\n                this.chatItem=i;\r\n                if(i&&i.to){\r\n                    this.chatAdmin=i.to;\r\n                }\r\n                console.log(22222222,this.data.msgs)\r\n                console.log(11111,d)\r\n                this.chatData=this.data.msgs[i.id];\r\n                console.log(333333,this.chatData)\r\n            }\r\n            setTimeout(function(){\r\n                document.documentElement.scrollTop=document.documentElement.scrollHeight;\r\n            },10)\r\n\r\n\t\t},\r\n\t\tsend(){\r\n            if(this.chatItem.scene=='p2p'){\r\n                const self=this;\r\n                var msg = self.nim.sendText({\r\n                        scene: 'p2p',\r\n                        to:self.chatAdmin ,\r\n                        text: self.sendMsg,\r\n                        done: self.sendMsgDone,\r\n                });\r\n                console.log('正在发送消息',self.sendMsg,'发送对象',self.chatAdmin);\r\n                // self.pushMsg(msg);\r\n                // self.sendMsgDone(error, msg);\r\n            }else if(this.chatItem.scene=='team'){\r\n                const self=this;\r\n                var msg = self.nim.sendText({\r\n                        scene: 'team',\r\n                        to:self.chatAdmin ,\r\n                        text: self.sendMsg,\r\n                        done: self.sendMsgDone,\r\n                });\r\n                console.log('正在发送消息',self.sendMsg,'发送对象',self.chatAdmin);\r\n                // self.pushMsg(msg);\r\n                // self.sendMsgDone(error, msg);\r\n            }\r\n\t\t},\r\n\t\tsendMsgDone(error, msg){\r\n\t\t\tconsole.log(error);\r\n\t\t\tconsole.log(msg);\r\n            console.log('发送' + msg.scene + ' ' + msg.type + '消息' + (!error?'成功':'失败') + ', id=' + msg.idClient);\r\n            this.sendMsg='';\r\n            this.pushMsg(msg);\r\n            console.log(123456789,this.chatId,this.chatItem)\r\n            this.goChat(this.chatId,this.chatItem);\r\n            \r\n\t\t},\r\n    onConnect() {\r\n        console.log('连接成功');\r\n        console.log('nim实例',this.nim);\r\n    },\r\n    onWillReconnect(obj) {\r\n        // 此时说明 `SDK` 已经断开连接, 请开发者在界面上提示用户连接已断开, 而且正在重新建立连接\r\n        console.log('即将重连');\r\n        console.log(obj.retryCount);\r\n        console.log(obj.duration);\r\n    },\r\n    onDisconnect(error) {\r\n        // 此时说明 `SDK` 处于断开状态, 开发者此时应该根据错误码提示相应的错误信息, 并且跳转到登录页面\r\n        console.log('丢失连接');\r\n        console.log(error);\r\n        if (error) {\r\n            switch (error.code) {\r\n            // 账号或者密码错误, 请跳转到登录页面并提示错误\r\n            case 302:\r\n                break;\r\n            // 被踢, 请提示错误后跳转到登录页面\r\n            case 'kicked':\r\n                break;\r\n            default:\r\n                break;\r\n            }\r\n        }\r\n    },\r\n    onError(error) {\r\n        console.log(error);\r\n    },\r\n\r\n    onLoginPortsChange(loginPorts) {\r\n        console.log('当前登录帐号在其它端的状态发生改变了', loginPorts);\r\n    },\r\n\r\n    onBlacklist(blacklist) {\r\n        console.log('收到黑名单', blacklist);\r\n        this.data.blacklist = this.nim.mergeRelations(this.data.blacklist, blacklist);\r\n        this.data.blacklist = this.nim.cutRelations(this.data.blacklist, blacklist.invalid);\r\n        this.refreshBlacklistUI();\r\n    },\r\n    onMarkInBlacklist(obj) {\r\n        console.log(obj);\r\n        console.log(obj.account + '被你在其它端' + (obj.isAdd ? '加入' : '移除') + '黑名单');\r\n        if (obj.isAdd) {\r\n            this.addToBlacklist(obj);\r\n        } else {\r\n            this.removeFromBlacklist(obj);\r\n        }\r\n    },\r\n    addToBlacklist(obj) {\r\n        this.data.blacklist = this.nim.mergeRelations(this.data.blacklist, obj.record);\r\n        this.refreshBlacklistUI();\r\n    },\r\n    removeFromBlacklist(obj) {\r\n        this.data.blacklist = this.nim.cutRelations(this.data.blacklist, obj.record);\r\n        this.refreshBlacklistUI();\r\n    },\r\n    refreshBlacklistUI() {\r\n       //window.location.reload();\r\n    },\r\n    onMutelist(mutelist) {\r\n        console.log('收到静音列表', mutelist);\r\n        this.data.mutelist = this.nim.mergeRelations(this.data.mutelist, mutelist);\r\n        this.data.mutelist = this.nim.cutRelations(this.data.mutelist, mutelist.invalid);\r\n        this.refreshMutelistUI();\r\n    },\r\n    onMarkInMutelist(obj) {\r\n        console.log(obj);\r\n        console.log(obj.account + '被你' + (obj.isAdd ? '加入' : '移除') + '静音列表');\r\n        if (obj.isAdd) {\r\n            this.addToMutelist(obj);\r\n        } else {\r\n            this.removeFromMutelist(obj);\r\n        }\r\n    },\r\n    addToMutelist(obj) {\r\n        this.data.mutelist = this.nim.mergeRelations(this.data.mutelist, obj.record);\r\n        this.refreshMutelistUI();\r\n    },\r\n    removeFromMutelist(obj) {\r\n        this.data.mutelist = this.nim.cutRelations(this.data.mutelist, obj.record);\r\n        this.refreshMutelistUI();\r\n    },\r\n    refreshMutelistUI() {\r\n      //window.location.reload();\r\n    },\r\n\r\n    onFriends(friends) {\r\n        console.log('收到好友列表', friends);\r\n        this.data.friends = this.nim.mergeFriends(this.data.friends, friends);\r\n        this.data.friends = this.nim.cutFriends(this.data.friends, friends.invalid);\r\n        this.refreshFriendsUI();\r\n    },\r\n    onSyncFriendAction(obj) {\r\n        console.log(obj);\r\n        switch (obj.type) {\r\n        case 'addFriend':\r\n            console.log('你在其它端直接加了一个好友' + obj.account + ', 附言' + obj.ps);\r\n            this.onAddFriend(obj.friend);\r\n            break;\r\n        case 'applyFriend':\r\n            console.log('你在其它端申请加了一个好友' + obj.account + ', 附言' + obj.ps);\r\n            break;\r\n        case 'passFriendApply':\r\n            console.log('你在其它端通过了一个好友申请' + obj.account + ', 附言' + obj.ps);\r\n            this.onAddFriend(obj.friend);\r\n            break;\r\n        case 'rejectFriendApply':\r\n            console.log('你在其它端拒绝了一个好友申请' + obj.account + ', 附言' + obj.ps);\r\n            break;\r\n        case 'deleteFriend':\r\n            console.log('你在其它端删了一个好友' + obj.account);\r\n            this.onDeleteFriend(obj.account);\r\n            break;\r\n        case 'updateFriend':\r\n            console.log('你在其它端更新了一个好友', obj.friend);\r\n            this.onUpdateFriend(obj.friend);\r\n            break;\r\n        }\r\n    },\r\n    onAddFriend(friend) {\r\n        this.data.friends = this.nim.mergeFriends(this.data.friends, friend);\r\n        this.refreshFriendsUI();\r\n    },\r\n    onDeleteFriend(account) {\r\n        this.data.friends = this.nim.cutFriendsByAccounts(this.data.friends, account);\r\n        this.refreshFriendsUI();\r\n    },\r\n    onUpdateFriend(friend) {\r\n        this.data.friends = this.nim.mergeFriends(this.data.friends, friend);\r\n        this.refreshFriendsUI();\r\n    },\r\n    refreshFriendsUI() {\r\n      //window.location.reload();\r\n    },\r\n\r\n    onMyInfo(user) {\r\n        console.log('收到我的名片', user);\r\n        this.data.myInfo = user;\r\n        this.updateMyInfoUI();\r\n    },\r\n    onUpdateMyInfo(user) {\r\n        console.log('我的名片更新了', user);\r\n        this.data.myInfo = NIM.util.merge(this.data.myInfo, user);\r\n        this.updateMyInfoUI();\r\n    },\r\n    updateMyInfoUI() {\r\n       //window.location.reload();\r\n    },\r\n    onUsers(users) {\r\n        console.log('收到用户名片列表', users);\r\n        this.data.users = this.nim.mergeUsers(this.data.users, users);\r\n    },\r\n    onUpdateUser(user) {\r\n        console.log('用户名片更新了', user);\r\n        this.data.users = this.nim.mergeUsers(this.data.users, user);\r\n    },\r\n    onRobots (robots) {\r\n        // 客户私有化方案不支持\r\n        console.log('收到机器人列表', robots);\r\n        this.data.robots = robots;\r\n    },\r\n    onTeams(teams) {\r\n        console.log('群列表', teams);\r\n        this.data.teams = this.nim.mergeTeams(this.data.teams, teams);\r\n        this.onInvalidTeams(teams.invalid);\r\n    },\r\n    onInvalidTeams(teams) {\r\n        this.data.teams = this.nim.cutTeams(this.data.teams, teams);\r\n        this.data.invalidTeams = this.nim.mergeTeams(this.data.invalidTeams, teams);\r\n        this.refreshTeamsUI();\r\n    },\r\n    onCreateTeam(team) {\r\n        console.log('你创建了一个群', team);\r\n        this.data.teams = this.nim.mergeTeams(this.data.teams, team);\r\n        this.refreshTeamsUI();\r\n        this.onTeamMembers({\r\n            teamId: team.teamId,\r\n            members: owner\r\n        });\r\n    },\r\n    refreshTeamsUI() {\r\n      //window.location.reload();\r\n    },\r\n    onTeamMembers(teamId, members) {\r\n        console.log('群id', teamId, '群成员', members);\r\n        var teamId = obj.teamId;\r\n        var members = obj.members;\r\n        this.data.teamMembers = this.data.teamMembers || {};\r\n        this.data.teamMembers[teamId] = this.nim.mergeTeamMembers(this.data.teamMembers[teamId], members);\r\n        this.data.teamMembers[teamId] = this.nim.cutTeamMembers(this.data.teamMembers[teamId], members.invalid);\r\n        this.refreshTeamMembersUI();\r\n    },\r\n    onSyncTeamMembersDone() {\r\n        console.log('同步群列表完成');\r\n    },\r\n    onUpdateTeam (team) {\r\n        console.log('群状态更新', team)\r\n    },\r\n    onUpdateTeamMember(teamMember) {\r\n        console.log('群成员信息更新了', teamMember);\r\n        this.onTeamMembers({\r\n            teamId: teamMember.teamId,\r\n            members: teamMember\r\n        });\r\n    },\r\n    refreshTeamMembersUI() {\r\n      //window.location.reload();\r\n    },\r\n    onTeamMsgReceipt (teamMsgReceipts) {\r\n        console.log('群消息已读通知', teamMsgReceipts)\r\n    },\r\n\r\n    onSessions(sessions) {\r\n\t\t\t\tconst self=this;\r\n        console.log('收到会话列表', sessions);\r\n        this.data.sessions = this.nim.mergeSessions(this.data.sessions, sessions);\r\n\t\t\t\tthis.updateSessionsUI();\t\t\t\t\r\n    },\r\n    onUpdateSession(session) {\r\n        console.log('会话更新了', session);\r\n        this.data.sessions = this.nim.mergeSessions(this.data.sessions, session);\r\n        this.updateSessionsUI();\r\n        console.log('data更新',this.data)\r\n    },\r\n    updateSessionsUI() {\r\n      //window.location.reload();\r\n    },\r\n\r\n    onRoamingMsgs(obj) {\r\n        console.log('漫游消息', obj);\r\n        this.pushMsg(obj.msgs);\r\n    },\r\n    onOfflineMsgs(obj) {\r\n        console.log('离线消息', obj);\r\n        this.pushMsg(obj.msgs);\r\n    },\r\n    onMsg(msg) {\r\n        console.log('收到消息', msg.scene, msg.type, msg);\r\n                this.pushMsg(msg);\r\n                if(this.chating){\r\n                    this.goChat(this.chatId,this.chatItem);\t\r\n                }\r\n        console.log('data更新',this.data)        \t\t\t\r\n    },\r\n    onBroadcastMsg(msg) {\r\n        console.log('收到广播消息', msg);\r\n    },\r\n    onBroadcastMsgs(msgs) {\r\n        console.log('收到广播消息列表', msgs);\r\n    },\r\n    pushMsg(msgs) {\r\n        if (!Array.isArray(msgs)) { msgs = [msgs]; }\r\n        var sessionId = msgs[0].sessionId;\r\n        this.data.msgs = this.data.msgs || {};\r\n        this.data.msgs[sessionId] = this.nim.mergeMsgs(this.data.msgs[sessionId], msgs);\r\n    },\r\n\r\n    onOfflineSysMsgs(sysMsgs) {\r\n        console.log('收到离线系统通知', sysMsgs);\r\n        this.pushSysMsgs(sysMsgs);\r\n    },\r\n    onSysMsg(sysMsg) {\r\n        console.log('收到系统通知', sysMsg)\r\n        this.pushSysMsgs(sysMsg);\r\n    },\r\n    onUpdateSysMsg(sysMsg) {\r\n        this.pushSysMsgs(sysMsg);\r\n    },\r\n    pushSysMsgs(sysMsgs) {\r\n        this.data.sysMsgs = this.nim.mergeSysMsgs(this.data.sysMsgs, sysMsgs);\r\n        this.refreshSysMsgsUI();\r\n    },\r\n    onSysMsgUnread(obj) {\r\n        console.log('收到系统通知未读数', obj);\r\n        this.data.sysMsgUnread = obj;\r\n        this.refreshSysMsgsUI();\r\n    },\r\n    onUpdateSysMsgUnread(obj) {\r\n        console.log('系统通知未读数更新了', obj);\r\n        this.data.sysMsgUnread = obj;\r\n        this.refreshSysMsgsUI();\r\n    },\r\n    refreshSysMsgsUI() {\r\n      //window.location.reload();\r\n    },\r\n    onOfflineCustomSysMsgs(sysMsgs) {\r\n        console.log('收到离线自定义系统通知', sysMsgs);\r\n    },\r\n    onCustomSysMsg(sysMsg) {\r\n        console.log('收到自定义系统通知', sysMsg);\r\n    },\r\n\r\n    onSyncDone() {\r\n        console.log('同步完成',this.data);\r\n\t\tthis.timeOBJ();\r\n    },\r\n\t\ttimeOBJ(){\r\n\t\t\tconst self=this;\r\n\t\t\tthis.timer=setTimeout(function(){\r\n\t\t\t\tlet ddd=JSON.stringify(self.data);\r\n\t\t\t\tself.data=null;\r\n\t\t\t\tself.data=JSON.parse(ddd);\r\n\t\t\t},100)\r\n\t\t}, \r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.IM-page{\r\n\twidth: 100%;\r\n\tpadding-bottom:300px;\r\n\t.IM-Nav{\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n  .IM-sessions{\r\n\t\twidth: 100%;\r\n\t\theight: 60px;\r\n\t\tdisplay: flex;\r\n\t\tpadding:5px 15px;\r\n\t\tbox-sizing:border-box;\r\n\t\tbackground: lavender;\r\n\t\tmargin: 3px 0;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\t.IM-sessions-t1{\r\n\t\t\tfont-size:16px; \r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.IM-sessions-t2{\r\n\t\t\tfont-size: 13px;\r\n\t\t\tcolor: #999;\r\n\t\t}\r\n\t\t.IM-sessions-t3{\r\n\t\t\tfont-size: 14px;\r\n\t\t\tcolor:#333;\r\n\t\t}\r\n\t}\r\n\t.chat-rom{\r\n\t\twidth: 100%;\r\n\t\tmin-height: 300px;\r\n\t\tbackground: lightblue;\r\n\t\t.chat-List{\r\n\t\t\twidth:100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\t.chat-List-t{\r\n\t\t\t\twidth: 40px;\r\n\t\t\t\theight: 40px;\r\n\t\t\t\tword-break: break-all;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t}\r\n\t\t\t.chat-List-c{\r\n\t\t\t\twidth: 200px;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.chat-List-r{\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row-reverse;\r\n\t\t\t.chat-List-c-r{\r\n\t\t\t\ttext-align: right;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.chat-input{\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tposition: fixed;\r\n\t\tbottom:0;\r\n\t\tbackground: lawngreen;\r\n\t}\r\n    .backButton{\r\n        position: fixed;\r\n        top:0px;\r\n        left:0;\r\n    }\r\n\t.album-b1{\r\n\t\twidth: 100%;\r\n\t\theight: 50px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-around;\r\n\t}\t\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3578b406&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}