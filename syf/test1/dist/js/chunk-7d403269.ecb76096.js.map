{"version":3,"sources":["webpack:///./src/pages/TeamMemberCard.vue?7663","webpack:///src/pages/TeamMemberCard.vue","webpack:///./src/pages/TeamMemberCard.vue?b6a2","webpack:///./src/pages/TeamMemberCard.vue","webpack:///./src/pages/TeamMemberCard.vue?da7f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","left-options","backText","_v","slot","width","height","src","member","avatar","_s","alias","title","value","nickInTeam","is-link","nativeOn","click","$event","hasSetNickPermission","onEditItemClick","getUpdateCallBcak","$toast","memberType","hasSetMemberTypePermission","on","on-change","changeMute","model","callback","$$v","mute","expression","_e","mini","type","remove","staticRenderFns","TeamMemberCardvue_type_script_lang_js_","data","configs","defaultUserIcon","teamId","account","selfType","computed","_this","parseReg","result","exec","$route","params","$store","state","teamMembers","forEach","item","assign_default","userUID","userInfo","userInfos","myInfo","nick","infoInTeam","hasMuteOrRemovePermission","isSelf","methods","_this2","dispatch","functionName","options","done","error","obj","_this3","store","doneCallBack","setTimeout","history","go","updateKey","newValue","action","opts","accounts","inputType","confirmCallback","updateSelfNick","updateInfoInTeam","defaultValue","enable","_this4","pages_TeamMemberCardvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TeamMemberCard_vue_vue_type_style_index_0_id_b38fb266_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_TeamMemberCard_vue_vue_type_style_index_0_id_b38fb266_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-7d403269.ecb76096.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-inherit m-article p-membercard\"},[_c('x-header',{staticClass:\"m-tab\",attrs:{\"left-options\":{backText: ' '}}},[_c('h1',{staticClass:\"m-tab-top\"},[_vm._v(\"群名片\")]),_c('a',{attrs:{\"slot\":\"left\"},slot:\"left\"})]),_c('div',{staticClass:\"g-body\"},[_c('div',{staticClass:\"g-avatar\"},[_c('img',{staticClass:\"icon u-circle\",attrs:{\"slot\":\"icon\",\"width\":\"50\",\"height\":\"50\",\"src\":_vm.member && _vm.member.avatar},slot:\"icon\"}),_c('div',[_vm._v(_vm._s(_vm.member && _vm.member.alias))])]),_c('group',{staticClass:\"m-group\"},[_c('cell',{attrs:{\"title\":\"群昵称\",\"value\":_vm.member.nickInTeam||'未设置',\"is-link\":\"\"},nativeOn:{\"click\":function($event){return (function (){ return _vm.hasSetNickPermission? _vm.onEditItemClick('修改群昵称', 'text', 'nickInTeam', _vm.getUpdateCallBcak()) : _vm.$toast('无权限'); })($event)}}}),_c('cell',{attrs:{\"title\":\"身份\",\"value\":_vm.memberType,\"is-link\":\"\"},nativeOn:{\"click\":function($event){return (function (){ return _vm.hasSetMemberTypePermission? _vm.onEditItemClick('身份', 'select', 'memberType', _vm.getUpdateCallBcak()) : _vm.$toast('无权限'); })($event)}}}),(_vm.hasMuteOrRemovePermission)?_c('x-switch',{staticClass:\"u-switch\",attrs:{\"title\":\"设置禁言\"},on:{\"on-change\":_vm.changeMute},model:{value:(_vm.mute),callback:function ($$v) {_vm.mute=$$v},expression:\"mute\"}}):_vm._e()],1),(_vm.hasMuteOrRemovePermission)?_c('x-button',{staticClass:\"u-btn\",attrs:{\"mini\":\"\",\"type\":\"warn\"},nativeOn:{\"click\":function($event){return _vm.remove($event)}}},[_vm._v(\"移出本群\")]):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class='g-inherit m-article p-membercard'>\r\n    <x-header class=\"m-tab\" :left-options=\"{backText: ' '}\">\r\n      <h1 class=\"m-tab-top\">群名片</h1>\r\n      <a slot=\"left\"></a>\r\n    </x-header>\r\n    <div class='g-body'>\r\n      <div class='g-avatar'>\r\n        <img class=\"icon u-circle\" slot=\"icon\" width=\"50\" height=\"50\" :src=\"member && member.avatar\">\r\n        <div>{{member && member.alias}}</div>\r\n      </div>\r\n      <group class='m-group'>\r\n        <cell title=\"群昵称\" :value=\"member.nickInTeam||'未设置'\" @click.native=\"()=> hasSetNickPermission? onEditItemClick('修改群昵称', 'text', 'nickInTeam', getUpdateCallBcak()) : $toast('无权限')\" is-link></cell>\r\n        <cell title=\"身份\" :value=\"memberType\"  @click.native=\"()=> hasSetMemberTypePermission? onEditItemClick('身份', 'select', 'memberType', getUpdateCallBcak()) : $toast('无权限')\" is-link></cell>\r\n        <x-switch v-if='hasMuteOrRemovePermission' class=\"u-switch\" title=\"设置禁言\" v-model=\"mute\" @on-change=\"changeMute\"></x-switch>\r\n      </group>\r\n      <x-button v-if='hasMuteOrRemovePermission' class='u-btn' mini type=\"warn\" @click.native='remove'>移出本群</x-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport config from '../configs'\r\nimport Utils from  '../utils'\r\nexport default {\r\n  data(){\r\n    return {\r\n      avatar: config.defaultUserIcon,\r\n      teamId: '',\r\n      account: '',\r\n      mute: false,\r\n      selfType: 'normal'\r\n    }\r\n  },\r\n  computed:{\r\n    member(){\r\n      var parseReg = /(\\d+)-(\\w+)/\r\n      var result = parseReg.exec(this.$route.params.member)\r\n      var teamId = result[1]\r\n      this.teamId = teamId\r\n      var account = result[2]\r\n      this.account = account\r\n      var member = {}\r\n      this.$store.state.teamMembers[teamId] && this.$store.state.teamMembers[teamId].forEach(item=>{\r\n        if (item.account === account){\r\n          member = Object.assign(member, item)\r\n        } \r\n        if(item.account === this.$store.state.userUID) {\r\n          this.selfType = item.type\r\n        }\r\n      })\r\n      var userInfo = this.$store.state.userInfos[member.account]\r\n      if (member.account === this.$store.state.userUID) {\r\n        userInfo = this.$store.state.myInfo\r\n      }\r\n      member.avatar =  userInfo? userInfo.avatar : (member.avatar || this.avatar)\r\n      member.alias = userInfo ? userInfo.nick : (member.account || 'account')\r\n      this.mute = !!member.mute\r\n      return member\r\n    },\r\n    memberType(){\r\n      if(this.member) {\r\n        switch (this.member.type) {\r\n          case 'owner':\r\n            return '群主'\r\n          case 'manager':\r\n            return '管理员'\r\n          case 'normal':\r\n            return '普通成员'\r\n        }\r\n      }\r\n      return '普通成员'\r\n    },\r\n    infoInTeam(){\r\n      return {\r\n        nickInTeam: this.member.nickInTeam,\r\n        memberType: this.member.type\r\n      }\r\n    },\r\n    hasSetMemberTypePermission() {\r\n      return this.selfType === 'owner' && this.member.type !=='owner'\r\n    },\r\n    hasMuteOrRemovePermission() {\r\n      if (this.selfType === 'owner') {\r\n        return this.member.type !== 'owner'\r\n      }\r\n      if (this.selfType === 'manager') {\r\n        return this.member.type === 'normal'\r\n      }\r\n      return false\r\n    },\r\n    isSelf(){\r\n      return  this.member.account === this.$store.state.userUID\r\n    },\r\n    hasSetNickPermission() {\r\n      return this.selfType!=='normal' || this.isSelf\r\n    }\r\n  },\r\n  methods:{\r\n    changeMute(){\r\n      this.$store.dispatch('delegateTeamFunction',{\r\n        functionName: 'updateMuteStateInTeam',\r\n        options: {\r\n          teamId: this.teamId,\r\n          account: this.account,\r\n          mute: this.mute,\r\n          done: (error, obj)=>{\r\n            if(error) {\r\n              this.$toast(error)\r\n            }else{\r\n              this.$toast(this.mute? '已禁言':'已取消禁言')\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    getUpdateCallBcak() {\r\n      var account = this.member.account\r\n      var store = this.$store\r\n      var toast = this.$toast\r\n      \r\n      var doneCallBack = (error, obj)=>{\r\n        if(error) {\r\n          this.$toast(error)\r\n        }else{\r\n          this.$toast('更改成功')\r\n          setTimeout(() => {\r\n            history.go(-1)\r\n          }, 200);\r\n        }\r\n        store.dispatch('hideLoading')\r\n      }\r\n      return function(teamId, updateKey, newValue){\r\n        store.dispatch('showLoading')\r\n        let action = null\r\n        let opts = {}\r\n        if(updateKey === 'nickInTeam') {\r\n          action = 'updateNickInTeam'\r\n          opts.account = account\r\n          opts.nickInTeam = newValue\r\n        } else if(updateKey === 'memberType') {\r\n          action = newValue === 'manager'? 'addTeamManagers' : 'removeTeamManagers'\r\n          opts.accounts = [account]\r\n        }\r\n        store.dispatch('delegateTeamFunction', {\r\n          functionName: action,\r\n          options: Object.assign({\r\n            teamId: teamId,\r\n            done: doneCallBack\r\n          }, opts)\r\n        })\r\n      }\r\n    },\r\n    onEditItemClick(title, inputType, updateKey, confirmCallback) {\r\n      var updateSelfNick = this.isSelf && updateKey === 'nickInTeam'\r\n      this.$store.dispatch('enterSettingPage', {\r\n        title: title,\r\n        inputType: inputType,\r\n        updateKey: updateKey,\r\n        teamId: this.teamId,\r\n        updateInfoInTeam: updateSelfNick ? true : false, \r\n        defaultValue: this.infoInTeam[updateKey],\r\n        confirmCallback: updateSelfNick ? null : confirmCallback,\r\n        enable: true\r\n      })\r\n    },\r\n    remove(){\r\n      this.$store.dispatch('showLoading')\r\n      this.$store.dispatch('delegateTeamFunction', {\r\n        functionName:'removeTeamMembers',\r\n        options: {\r\n          teamId: this.teamId,\r\n          accounts: [this.member.account],\r\n          done: (error, obj)=>{\r\n            this.$toast(error ? error : '移除成功')\r\n            history.go(-1)\r\n            this.$store.dispatch('hideLoading')\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .g-body{\r\n    \r\n  }\r\n  .g-avatar{\r\n    margin: 2rem auto;\r\n    width: 100%;\r\n    text-align: center;\r\n  }\r\n  .u-btn{\r\n    width: 80%;\r\n    margin: 1rem 10%;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMemberCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMemberCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TeamMemberCard.vue?vue&type=template&id=b38fb266&scoped=true&\"\nimport script from \"./TeamMemberCard.vue?vue&type=script&lang=js&\"\nexport * from \"./TeamMemberCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TeamMemberCard.vue?vue&type=style&index=0&id=b38fb266&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b38fb266\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMemberCard.vue?vue&type=style&index=0&id=b38fb266&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TeamMemberCard.vue?vue&type=style&index=0&id=b38fb266&scoped=true&lang=css&\""],"sourceRoot":""}