{"version":3,"sources":["webpack:///./src/pages/SearchUser.vue?9d91","webpack:///src/pages/SearchUser.vue","webpack:///./src/pages/SearchUser.vue?39dc","webpack:///./src/pages/SearchUser.vue","webpack:///./src/pages/SearchUser.vue?5c27"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","onClickBack","_v","class","searchType","$event","seleButton","ref","attrs","type","placeholder","show-action","model","value","callback","$$v","searchText","expression","size","nativeOn","searchUser","_l","user","index","key","account","title","nick","inline-desc","userId","is-link","to","link","slot","width","src","avatar","team","teamId","name","_s","errMsg","staticRenderFns","SearchUservue_type_script_lang_js_","components","_components","Object","defineProperty","es","mounted","_this","$nextTick","parse_int_default","$route","params","$store","dispatch","setTimeout","$refs","searchInput","input","focus","data","searchList","firstEntry","watch","searchResult","val","oldVal","length","computed","result","state","searchedTeams","map","item","configs","defaultUserIcon","concat","searchedUsers","methods","window","history","go","d","test","$toast","userUID","accounts","pages_SearchUservue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SearchUser_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SearchUser_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-666ff67d.1add1b90.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"g-inherit m-article p-search-user\"},[_c('div',{staticClass:\"Chat-nav\"},[_c('div',{on:{\"click\":_vm.onClickBack}},[_vm._v(\"返回\")]),_c('div',{staticClass:\"SearchUserButtons\"},[_c('div',{staticClass:\"SearchUserBi\",class:_vm.searchType==0?'seleB':'',on:{\"click\":function($event){return _vm.seleButton(0)}}},[_vm._v(\"搜索用户\")]),_c('div',{staticClass:\"SearchUserBi\",class:_vm.searchType==1?'seleB':'',on:{\"click\":function($event){return _vm.seleButton(1)}}},[_vm._v(\"搜索群\")])]),_c('div')]),_c('van-cell-group',{staticClass:\"u-search\"},[_c('van-search',{ref:\"searchInput\",staticClass:\"u-ipt-default\",attrs:{\"type\":\"text\",\"placeholder\":_vm.searchType===0?'请输入搜索内容':'请输入群号',\"show-action\":\"\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),_c('div',[_c('van-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.searchUser($event)}}},[_vm._v(\"搜索\")])],1),_c('van-cell-group',{staticClass:\"u-card u-list\"},_vm._l((_vm.searchList),function(user,index){return (_vm.searchType === 0)?_c('van-cell',{key:user.account,staticClass:\"u-list-item\",attrs:{\"title\":user.nick,\"inline-desc\":user.account,\"userId\":index,\"is-link\":\"\",\"to\":user.link}},[_c('img',{staticClass:\"icon\",attrs:{\"slot\":\"icon\",\"width\":\"20\",\"src\":user.avatar},slot:\"icon\"})]):_vm._l((_vm.searchList),function(team){return _c('van-cell',{key:team.teamId,staticClass:\"u-list-item\",attrs:{\"title\":team.name,\"is-link\":\"\",\"to\":team.link}},[_c('img',{staticClass:\"icon\",attrs:{\"slot\":\"icon\",\"width\":\"20\",\"src\":team.avatar},slot:\"icon\"})])})}),1),_c('div',{staticClass:\"u-card\"},[_c('h3',[_vm._v(_vm._s(_vm.errMsg))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"g-inherit m-article p-search-user\">\r\n    <div class=\"Chat-nav\">\r\n      <div @click=\"onClickBack\">返回</div>\r\n      <div class=\"SearchUserButtons\">\r\n        <div @click=\"seleButton(0)\" class=\"SearchUserBi\" :class=\"searchType==0?'seleB':''\">搜索用户</div>\r\n        <div @click=\"seleButton(1)\" class=\"SearchUserBi\" :class=\"searchType==1?'seleB':''\">搜索群</div>\r\n      </div>\r\n      <div></div>\r\n    </div>      \r\n    <van-cell-group class=\"u-search\">\r\n        <van-search\r\n          class=\"u-ipt-default\"\r\n          type=\"text\"\r\n          v-model=\"searchText\"\r\n          :placeholder=\"searchType===0?'请输入搜索内容':'请输入群号'\"\r\n          ref='searchInput'\r\n          show-action\r\n        />\r\n    </van-cell-group>\r\n    <div>\r\n      <van-button size=\"large\" type=\"primary\" @click.native=\"searchUser\">搜索</van-button>\r\n    </div>\r\n    <van-cell-group class=\"u-card u-list\">\r\n      <van-cell v-if='searchType === 0'\r\n        v-for=\"(user, index) in searchList\"\r\n        class=\"u-list-item\"\r\n        :title=\"user.nick\"\r\n        :inline-desc=\"user.account\"\r\n        :key=\"user.account\"\r\n        :userId=\"index\"\r\n        is-link\r\n        :to=\"user.link\">\r\n        <img class=\"icon\" slot=\"icon\" width=\"20\" :src=\"user.avatar\">\r\n      </van-cell>\r\n      <van-cell v-else\r\n        v-for=\"team in searchList\"\r\n        class=\"u-list-item\"\r\n        :title=\"team.name\" \r\n        :key=\"team.teamId\"\r\n        is-link\r\n        :to=\"team.link\">\r\n        <img class=\"icon\" slot=\"icon\" width=\"20\" :src=\"team.avatar\">\r\n      </van-cell>\r\n    </van-cell-group>\r\n    <div class=\"u-card\">\r\n      <h3>{{errMsg}}</h3>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport config from '../configs'\r\nimport { Cell, CellGroup,Button,Search } from 'vant';\r\nexport default {\r\n  components: {\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n    [Button.name]:Button,\r\n    [Search.name]:Search,\r\n  },   \r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      this.searchType = parseInt(this.$route.params.searchType)\r\n      this.$store.dispatch('resetSearchResult')\r\n    })\r\n\r\n    setTimeout(() => {\r\n      // 立即focus会引起切页时白屏，故增加timeout\r\n      this.$refs.searchInput.$refs.input.focus()\r\n    }, 500);\r\n  },\r\n  data () {\r\n    return {\r\n      searchType: 0, // 用户 0 群 1\r\n      searchText: '',\r\n      searchList: [],\r\n      errMsg: '',\r\n      // 首次加载标志，因为mount和watch会有时序问题，首次加载不显示errMsg\r\n      firstEntry: true,\r\n    }\r\n  },\r\n  watch: {\r\n    searchResult (val, oldVal) {\r\n      if ((val.length === 0) && (!this.firstEntry)) {\r\n        this.errMsg = '无记录'\r\n      } else {\r\n        this.errMsg = ''\r\n      }\r\n      this.searchList = val\r\n    },\r\n    searchType() {\r\n      this.$refs.searchInput.$refs.input.focus()\r\n    }\r\n  },\r\n  computed: {\r\n    searchResult () {\r\n      let result = []\r\n      if (this.searchType === 1) {\r\n        result = this.$store.state.searchedTeams.map(item => {\r\n         item.avatar = item.avatar || config.defaultUserIcon\r\n          item.link = `/teamcard/${item.teamId}`\r\n          return item\r\n        })\r\n      } else if (this.searchType === 0) {\r\n        result = this.$store.state.searchedUsers.map(item => {\r\n          item.nick = item.nick || item.account\r\n          item.link = `/namecard/${item.account}`\r\n          item.avatar = item.avatar || config.defaultUserIcon\r\n          return item\r\n        })\r\n      }\r\n      return result\r\n    }\r\n  },\r\n  methods: {\r\n    onClickBack(){\r\n      window.history.go(-1);\r\n    },\r\n    seleButton(d){\r\n      this.searchType=d;\r\n    },\r\n    searchUser () {\r\n      if (!this.searchText) {\r\n        this.$toast('未输入内容')\r\n        return\r\n      }\r\n      this.firstEntry = false\r\n      if (this.searchType === 1) {\r\n        if(!/^(\\d){4,9}$/.test(this.searchText)){\r\n          this.$toast('输入的群号非法')\r\n          return\r\n        }\r\n        this.$store.dispatch('searchTeam', {\r\n          teamId: this.searchText\r\n        })\r\n      } else if (this.searchType === 0) {\r\n        if (this.searchText === this.$store.state.userUID) {\r\n          this.searchList = []\r\n          this.errMsg = '别看了，就是你自己！'\r\n        } else {\r\n          this.$store.dispatch('searchUsers', {\r\n            accounts: [this.searchText]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.Chat-nav{\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    margin: 0;\r\n    width: 100%;\r\n    height: 60px;\r\n    overflow: hidden;\r\n    z-index: 3;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    box-sizing: border-box;\r\n    padding: 0 15px;\r\n    background: #e5f4ff;\r\n    color: #0091e4;\r\n}\r\n.SearchUserButtons{\r\n  width: 180px;\r\n  height: 30px;\r\n  border: 1px solid #04BE02;\r\n  border-radius:15px;\r\n  display: flex;\r\n  align-items: center;\r\n  background: white;\r\n  overflow: hidden;\r\n}\r\n.SearchUserBi{\r\n  width: 50%;\r\n  height: 100%;\r\n  text-align: center;\r\n  line-height: 30px;\r\n  color: #333;\r\n}\r\n.seleB{\r\n  background: #0091e4;\r\n  color: white;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchUser.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchUser.vue?vue&type=template&id=522432f2&\"\nimport script from \"./SearchUser.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchUser.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchUser.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchUser.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchUser.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}