(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40bcb8c8"],{3897:function(t,e,a){},"3bf8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-inherit m-article p-msg-receipt"},[a("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[a("h1",{staticClass:"m-tab-top"},[t._v("已读回执详情")]),a("a",{attrs:{slot:"left"},slot:"left"})]),a("div",{staticClass:"g-body"},[a("div",{staticClass:"select-bar"},[a("div",{staticClass:"item",class:{active:0===t.selectIndex},on:{click:function(e){t.selectIndex=0}}},[t._v("\n        未读 ("+t._s(t.unreadAccounts.length)+")\n      ")]),a("div",{staticClass:"item",class:{active:1===t.selectIndex},on:{click:function(e){t.selectIndex=1}}},[t._v("\n        已读 ("+t._s(t.readAccounts.length)+")\n      ")])])]),a("team-member",{attrs:{teamId:t.teamId,advanced:!0,showAllMode:!0,filterAccount:0===t.selectIndex?t.unreadAccounts:t.readAccounts}})],1)},n=[],i=a("86c6"),c={data:function(){return{selectIndex:0}},computed:{teamId:function(){return/(\d+)-(\d+)/.exec(this.$route.params.msgInfo)[1]},idServer:function(){return/(\d+)-(\d+)/.exec(this.$route.params.msgInfo)[2]},readAccounts:function(){return this.$store.state.teamMsgReadsDetail.readAccounts},unreadAccounts:function(){return this.$store.state.teamMsgReadsDetail.unreadAccounts}},created:function(){var t=this;this.$store.dispatch("delegateTeamFunction",{functionName:"getTeamMsgReadAccounts",options:{teamMsgReceipt:{teamId:this.teamId,idServer:this.idServer},done:function(e,a,s){e||t.$store.commit("initMsgReceiptDetail",s)}}})},methods:{},components:{TeamMember:i["a"]}},r=c,o=(a("7c8e"),a("2877")),m=Object(o["a"])(r,s,n,!1,null,null,null);e["default"]=m.exports},"7c8e":function(t,e,a){"use strict";var s=a("ca55"),n=a.n(s);n.a},"86c6":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-members",class:{"s-bg-white":t.advanced&&!t.showAllMode}},[t.hasInvitePermission&&!t.showAllMode?a("a",{staticClass:"u-member",attrs:{href:"#/teaminvite/"+t.teamId}},[a("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png",alt:""}}),a("span",[t._v("添加")])]):t._e(),t._l(t.membersInDisplay,function(e){return a("a",{key:e.account,staticClass:"u-member",on:{click:function(a){return t.onMemberClick(e)}}},[a("img",{staticClass:"avatar u-circle",attrs:{src:e.avatar}}),t.removeMode&&"owner"!=e.type&&e.account!=t.$store.state.userUID?a("span",{staticClass:"remove",on:{click:function(a){return t.remove(a,e)}}}):t._e(),"normal"!==e.type?a("span",{class:"manager"===e.type?"manager":"owner"}):t._e(),a("span",[t._v(t._s(e.alias))])])}),t.advanced?t._e():[a("a",{staticClass:"u-member",attrs:{href:"#/teaminvite/"+t.teamId}},[a("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_add.png",alt:""}}),a("span",[t._v("添加")])]),t.hasManagePermission?a("div",{staticClass:"u-member",on:{click:function(e){return t.triggerRemove()}}},[a("img",{staticClass:"avatar",attrs:{src:"http://yx-web.nos.netease.com/webdoc/h5/im/team_member_delete.png",alt:""}}),a("span",[t._v("移除")])]):t._e()]],2)},n=[],i=(a("ac6a"),a("5176")),c=a.n(i),r=(a("7514"),{props:{teamId:{type:String},advanced:{type:Boolean,default:!1},showAllMode:{type:Boolean,default:!1},filterAccount:{type:Array}},data:function(){return{removeMode:!1,hasManagePermission:!1,hasSearched:!1}},mounted:function(){var t=this.$store.state.teamMembers[this.teamId];void 0===t&&this.$store.dispatch("getTeamMembers",this.teamId)},computed:{teamInfo:function(){var t=this,e=this.$store.state.teamlist,a=e&&e.find(function(e){return e.teamId===t.teamId});if(a)return a},members:function(){var t=this,e=this.$store.state.teamMembers[this.teamId],a=this.$store.state.userInfos,s=[];if(e){if(e=e.map(function(e){var n=c()({},e);return n.valid=!0,n.account===t.$store.state.userUID?(n.alias="我",n.avatar=t.$store.state.myInfo.avatar,t.isOwner="owner"===n.type,t.hasManagePermission="normal"!==n.type):void 0===a[n.account]?(s.push(n.account),n.avatar=n.avatar||t.avatar,n.alias=n.nickInTeam||n.account):(n.avatar=a[n.account].avatar,n.alias=n.nickInTeam||a[n.account].nick),n}),s.length>0&&!this.hasSearched){this.hasSearched=!0;while(s.length>0)this.searchUsers(s.splice(0,150))}return e}return[]},membersInDisplay:function(){var t=this;return this.filterAccount?this.members.filter(function(e){return!!t.filterAccount.find(function(t){return t===e.account})}):this.advanced||this.showAllMode?this.members:this.members.slice(0,this.hasInvitePermission?3:4)},hasInvitePermission:function(){return this.advanced&&(this.hasManagePermission||this.teamInfo&&"all"===this.teamInfo.inviteMode)}},methods:{searchUsers:function(t){var e=this;this.$store.dispatch("searchUsers",{accounts:t,done:function(t){e.updateTeamMember(t)}})},updateTeamMember:function(t){var e=this;t.forEach(function(t){var a=e.members.find(function(e){return e.account===t.account});a&&(a.avatar=t.avatar,a.alias=a.nickInTeam||t.nick)})},triggerRemove:function(t,e){this.removeMode=!this.removeMode},remove:function(t,e){var a=this;this.$store.dispatch("showLoading"),this.$store.dispatch("delegateTeamFunction",{functionName:"removeTeamMembers",options:{teamId:this.teamId,accounts:[e.account],done:function(t,e){a.$toast("移除成功"),a.$store.dispatch("hideLoading")}}}),t.cancelBubble=!0,t.preventDefault()},onMemberClick:function(t){location.href=this.advanced?"#/teammembercard/".concat(t.id):"#/namecard/".concat(t.account)}}}),o=r,m=(a("9529"),a("2877")),u=Object(m["a"])(o,s,n,!1,null,"aad428f0",null);e["a"]=u.exports},9529:function(t,e,a){"use strict";var s=a("3897"),n=a.n(s);n.a},ca55:function(t,e,a){}}]);
//# sourceMappingURL=chunk-40bcb8c8.9349cbad.js.map