{"version":3,"sources":["webpack:///./src/pages/components/ChatEmoji.vue?f5dc","webpack:///./src/pages/components/ChatEditor.vue?be81","webpack:///./src/pages/components/ChatEmoji.vue?ec58","webpack:///src/pages/components/ChatEmoji.vue","webpack:///./src/pages/components/ChatEmoji.vue?e353","webpack:///./src/pages/components/ChatEmoji.vue","webpack:///src/pages/components/ChatEditor.vue","webpack:///./src/pages/components/ChatEditor.vue?41e7","webpack:///./src/pages/components/ChatEditor.vue","webpack:///./src/pages/components/ChatEditor.vue?01da"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatEmoji_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatEmoji_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","hideRobotList","directives","name","rawName","value","expression","attrs","type","scene","to","add-emoji","addEmoji","hide-emoji","hideEmoji","_l","robot","key","account","title","nick","nativeOn","$event","chooseRobot","slot","width","height","src","avatar","class","isRobot","domProps","focus","onInputFocus","input","target","composing","msgToSent","_e","supportTouch","sendTxt","arg","recording","disabled","recordDisable","touchstart","preventDefault","toRecord","touchend","sendRecordMsg","_v","id","stopPropagation","siwtchRecord","cancelRecord","swicthMsgType","icon5","icon4","showEmoji","icon1","icon2","ref","change","sendFileMsg","advancedTeam","sendPlayMsg","icon3","turnToMsgReceipt","sendTextMsg","staticRenderFns","ChatEmojivue_type_template_id_63bc7d35_render","currEmoji","item","pinup-item","selectEmoji","img","active","currAlbum","selectAlbum","album","ChatEmojivue_type_template_id_63bc7d35_staticRenderFns","genEmojiList","emojiList","result","emojiMap","list","push","length","ChatEmojivue_type_script_lang_js_","props","String","data","currType","computed","emoji","configs_emoji","pinup","pinupList","methods","$emit","$store","dispatch","pushContent","content","catalog","chartlet","components_ChatEmojivue_type_script_lang_js_","component","Object","componentNormalizer","ChatEmoji","ChatEditorvue_type_script_lang_js_","components","_components","defineProperty","es","updated","_this","window","document","body","addEventListener","isEmojiShown","Boolean","default","invalid","invalidHint","watch","continueRobotAccid","curVal","oldVal","robotInfos","concat","indexAt","indexOf","robotslist","isRobotListShown","configs","resourceUrl","toRecordCount","recordTime","$recordTime","recordTimeout","recorder","audioContext","AudioContext","e","console","error","state","robotInfosByNick","$toast","test","$vux","alert","show","trim","robotAccid","robotText","atUsers","match","i","replace","text","_robotAccid","_robotText","_atUsers","_i","_item","Math","ceil","random","ipt","$refs","fileToSent","fileInput","emojiName","len","setTimeout","scrollIntoView","page","scrollChatListDown","location","self","stopPlayAudio","protocol","navigator","mediaDevices","getUserMedia","record","resumeAudioContext","failed","audio","then","stream","createMediaStreamSource","Recorder","catch","err","log","message","runRecorderTime","_this2","getElementById","runRecordDuration","bind","_this3","resume","clearTimeout","sendRecord","innerText","stop","clear","_this4","exportWAV","blob","uploadprogress","obj","total","loaded","percentage","percentageText","uploaderror","uploaddone","file","components_ChatEditorvue_type_script_lang_js_","ChatEditor_component","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChatEditor_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-27827a67.1ef2561e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEmoji.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEmoji.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-chat-editor\",on:{\"click\":_vm.hideRobotList}},[_c('chat-emoji',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEmojiShown),expression:\"isEmojiShown\"}],attrs:{\"type\":_vm.type,\"scene\":_vm.scene,\"to\":_vm.to},on:{\"add-emoji\":_vm.addEmoji,\"hide-emoji\":_vm.hideEmoji}}),_c('van-cell-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRobotListShown),expression:\"isRobotListShown\"}],staticClass:\"m-chat-emoji m-chat-robot\"},_vm._l((_vm.robotslist),function(robot){return _c('van-cell',{key:robot.account,attrs:{\"title\":robot.nick},nativeOn:{\"click\":function($event){return _vm.chooseRobot(robot)}}},[_c('img',{staticClass:\"icon u-circle\",attrs:{\"slot\":\"icon\",\"width\":\"20\",\"height\":\"20\",\"src\":robot.avatar},slot:\"icon\"})])}),1),_c('div',{staticClass:\"m-chat-editor-main\",class:{robot:_vm.isRobot}},[_c('span',{staticClass:\"u-editor-input\"},[(_vm.sendTxt)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgToSent),expression:\"msgToSent\"}],domProps:{\"value\":(_vm.msgToSent)},on:{\"focus\":_vm.onInputFocus,\"input\":function($event){if($event.target.composing){ return; }_vm.msgToSent=$event.target.value}}}):_vm._e(),(_vm.supportTouch && !_vm.sendTxt)?_c('i',{directives:[{name:\"touch\",rawName:\"v-touch:swipeup\",value:(_vm.cancelRecord),expression:\"cancelRecord\",arg:\"swipeup\"}],staticClass:\"u-btn-record\",class:{'recording':_vm.recording, 'disabled': _vm.recordDisable},on:{\"touchstart\":function($event){$event.preventDefault();return _vm.toRecord($event)},\"touchend\":function($event){$event.preventDefault();return _vm.sendRecordMsg($event)}}},[(_vm.recording)?_c('b',[_vm._v(\"松开结束\")]):_c('b',[_vm._v(\"按下说话\")]),(_vm.recording)?_c('a',{staticClass:\"u-record-time\",attrs:{\"id\":\"recordTime\"}},[_vm._v(\"00:00\")]):_vm._e()]):_vm._e(),(!_vm.supportTouch && !_vm.sendTxt)?_c('i',{staticClass:\"u-btn-record\",class:{'recording':_vm.recording, 'disabled': _vm.recordDisable},on:{\"click\":function($event){$event.stopPropagation();return _vm.siwtchRecord($event)}}},[(_vm.recording)?_c('b',[_vm._v(\"点击发送\")]):_c('b',[_vm._v(\"点击说话\")]),(_vm.recording)?_c('a',{staticClass:\"u-record-time with-close-btn\",attrs:{\"id\":\"recordTime\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.cancelRecord($event)}}},[_vm._v(\"00:00\")]):_vm._e()]):_vm._e()]),_c('span',{staticClass:\"u-editor-icons ChatEditor-rightBox\"},[(_vm.sendTxt)?_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.swicthMsgType($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon5}})])]):_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.swicthMsgType($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon4}})])]),(!_vm.isRobot)?_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.showEmoji($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon1}})])]):_vm._e(),(!_vm.isRobot)?_c('span',{staticClass:\"u-editor-icon\"},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon2}})]),_c('input',{ref:\"fileToSent\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.sendFileMsg}})]):_vm._e(),(!_vm.isRobot && !_vm.advancedTeam)?_c('span',{staticClass:\"u-editor-icon\",on:{\"click\":function($event){$event.stopPropagation();return _vm.sendPlayMsg($event)}}},[_c('i',{staticClass:\"u-icon-img\"},[_c('img',{attrs:{\"src\":_vm.icon3}})])]):_vm._e(),(_vm.advancedTeam)?_c('span',{staticClass:\"u-editor-send u-editor-receipt\",on:{\"click\":_vm.turnToMsgReceipt}},[_vm._v(\"回执\")]):_vm._e(),_c('span',{staticClass:\"u-editor-send\",on:{\"click\":_vm.sendTextMsg}},[_vm._v(\"发 送\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-chat-emoji\"},[_c('div',{staticClass:\"emoji-content\"},[_c('div',{staticClass:\"cnt\"},_vm._l((_vm.currEmoji.list),function(item){return _c('span',{staticClass:\"emoji-item\",class:{'pinup-item':item.type==='pinup'},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectEmoji(item)}}},[_c('img',{attrs:{\"src\":item.img}})])}),0)]),_c('div',{staticClass:\"emoji-channel\"},[_vm._l((_vm.emoji),function(item){return _c('span',{staticClass:\"emoji-album\",class:{active: item.name==_vm.currAlbum},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectAlbum(item)}}},[_c('img',{attrs:{\"src\":item.album}})])}),_vm._l((_vm.pinup),function(item){return (_vm.type==='session')?_c('span',{staticClass:\"emoji-album\",class:{active: item.name==_vm.currAlbum},on:{\"click\":function($event){$event.stopPropagation();return _vm.selectAlbum(item)}}},[_c('img',{attrs:{\"src\":item.album}})]):_vm._e()})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"m-chat-emoji\">\r\n    <div class=\"emoji-content\">\r\n      <div class=\"cnt\">\r\n        <span class=\"emoji-item\" :class=\"{'pinup-item':item.type==='pinup'}\" v-for=\"item in currEmoji.list\" @click.stop=\"selectEmoji(item)\">\r\n          <img :src=\"item.img\">\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"emoji-channel\">\r\n      <span class=\"emoji-album\" :class=\"{active: item.name==currAlbum}\" v-for=\"item in emoji\" @click.stop=\"selectAlbum(item)\">\r\n        <img :src=\"item.album\">\r\n      </span><span v-if=\"type==='session'\" class=\"emoji-album\" :class=\"{active: item.name==currAlbum}\" v-for=\"item in pinup\" @click.stop=\"selectAlbum(item)\">\r\n        <img :src=\"item.album\">\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport emojiObj from '../../configs/emoji'\r\n\r\nfunction genEmojiList (type, emojiList) {\r\n  let result = {}\r\n  for (let name in emojiList) {\r\n    let emojiMap = emojiList[name]\r\n    let list = []\r\n    for (let key in emojiMap) {\r\n      list.push({\r\n        type,\r\n        name,\r\n        key,\r\n        img: emojiMap[key].img\r\n      })\r\n    }\r\n    if (list.length > 0) {\r\n      result[name] = {\r\n        type,\r\n        name,\r\n        list,\r\n        album: list[0].img\r\n      }\r\n    }\r\n  }\r\n  return result\r\n}\r\n\r\nexport default {\r\n  props: {\r\n    type: String,\r\n    scene: String,\r\n    to: String\r\n  },\r\n  data () {\r\n    return {\r\n      currType: 'emoji',\r\n      currAlbum: 'emoji'\r\n    }\r\n  },\r\n  computed: {\r\n    emoji () {\r\n      return genEmojiList('emoji', emojiObj.emojiList)\r\n    },\r\n    pinup () {\r\n      return genEmojiList('pinup', emojiObj.pinupList)\r\n    },\r\n    currEmoji () {\r\n      if (this.currType === 'emoji') {\r\n        return this.emoji[this.currAlbum]\r\n      } else if (this.currType === 'pinup') {\r\n        return this.pinup[this.currAlbum]\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  methods: {\r\n    selectAlbum (album) {\r\n      this.currType = album.type\r\n      this.currAlbum = album.name\r\n    },\r\n    selectEmoji (emoji) {\r\n      if (this.currType === 'emoji') {\r\n        // 由触发父组件事件，增加表情文案\r\n        this.$emit('add-emoji', emoji.key)\r\n      } else if (this.currType === 'pinup') {\r\n        if (this.type === 'session') {\r\n          this.$store.dispatch('sendMsg', {\r\n            type: 'custom',\r\n            scene: this.scene,\r\n            to: this.to,\r\n            pushContent: '[贴图表情]',\r\n            content: {\r\n              type: 3,\r\n              data: {\r\n                catalog: this.currAlbum,\r\n                chartlet: emoji.key\r\n              }\r\n            }\r\n          })\r\n        } else if (this.type === 'chatroom') {\r\n          this.$store.dispatch('sendChatroomMsg', {\r\n            type: 'custom',\r\n            pushContent: '[贴图表情]',\r\n            content: {\r\n              type: 3,\r\n              data: {\r\n                catalog: this.currAlbum,\r\n                chartlet: emoji.key\r\n              }\r\n            }\r\n          })\r\n        }\r\n        this.$emit('hide-emoji')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .m-chat-emoji {\r\n    position: absolute;\r\n    top: -12rem;\r\n    height: 12rem;\r\n    left: 0;\r\n    width: 100%;\r\n    border-top: 1px solid #ccc;\r\n    background-color: #fff;\r\n    .emoji-channel {\r\n      position: relative;\r\n      width: 100%;\r\n      height: auto;\r\n      margin: 0 1rem;\r\n      .emoji-album {\r\n        display: inline-block;\r\n        padding: 0.1rem;\r\n        width: 1.8rem;\r\n        height: 1.8rem;\r\n        border-right: 1px solid #f0f0f0;\r\n        img {\r\n          margin: 0;\r\n          display: block;\r\n          width: inherit;\r\n          height: inherit;\r\n        }\r\n        &.active {\r\n          background-color: #f0f0f0;\r\n        }\r\n      }\r\n    }\r\n    .emoji-content {\r\n      position: relative;\r\n      width: 100%;\r\n      height: 10rem;\r\n      background-color: #f0f0f0;\r\n      overflow-y: auto;\r\n      .cnt {\r\n        position: relative;\r\n        display: block;\r\n        margin: 0.4rem auto;\r\n        text-align: left;\r\n      }\r\n      .emoji-item {\r\n        display: inline-block;\r\n        width: 28px;\r\n        height: 28px;\r\n        padding: 2px;\r\n        vertical-align: middle;\r\n        /*border: 1px solid #fff;*/\r\n        /*margin-left: -1px;*/\r\n        /*margin-bottom: -1px;*/\r\n        img {\r\n          width: inherit;\r\n          height: inherit;\r\n        }\r\n      }\r\n      .pinup-item {\r\n        width: 44px;\r\n        height: 44px;\r\n      }\r\n    }\r\n\r\n    @media screen and (min-width: 300px) and (max-width: 420px) {\r\n      .emoji-content .cnt {\r\n        width: 300px;\r\n      }\r\n    }\r\n\r\n    @media screen and (min-width: 420px) and (max-width: 600px) {\r\n      .emoji-content .cnt {\r\n        width: 420px;\r\n      }\r\n    }\r\n\r\n    @media screen and (min-width: 600px) and (max-width: 720px) {\r\n      .emoji-content .cnt {\r\n        width: 600px;\r\n      }\r\n    }\r\n\r\n    @media screen and (min-width: 720px) and (max-width: 1080px) {\r\n      .emoji-content .cnt {\r\n        width: 720px;\r\n      }\r\n    }\r\n\r\n    @media screen and (min-width: 1080px){\r\n      .emoji-content .cnt {\r\n        width: 1080px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEmoji.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEmoji.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatEmoji.vue?vue&type=template&id=63bc7d35&\"\nimport script from \"./ChatEmoji.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatEmoji.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatEmoji.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"m-chat-editor\" @click=\"hideRobotList\">\r\n    <chat-emoji\r\n      v-bind:type=\"type\"\r\n      v-bind:scene=\"scene\"\r\n      v-bind:to=\"to\"\r\n      v-show=\"isEmojiShown\"\r\n      v-on:add-emoji=\"addEmoji\"\r\n      v-on:hide-emoji=\"hideEmoji\"\r\n    ></chat-emoji>\r\n    <van-cell-group v-show=\"isRobotListShown\" class=\"m-chat-emoji m-chat-robot\">\r\n      <van-cell v-for=\"robot in robotslist\" :title=\"robot.nick\" :key=\"robot.account\" @click.native=\"chooseRobot(robot)\">\r\n        <img class=\"icon u-circle\" slot=\"icon\" width=\"20\" height=\"20\" :src=\"robot.avatar\">\r\n      </van-cell>\r\n    </van-cell-group>\r\n    <div class=\"m-chat-editor-main\" :class=\"{robot:isRobot}\">\r\n      <span class=\"u-editor-input\">\r\n        <textarea v-if=\"sendTxt\" v-model=\"msgToSent\" @focus='onInputFocus'></textarea>\r\n        <i v-if=\"supportTouch && !sendTxt\" class=\"u-btn-record\" :class=\"{'recording':recording, 'disabled': recordDisable}\" @touchstart.prevent='toRecord' v-touch:swipeup='cancelRecord' @touchend.prevent='sendRecordMsg'>\r\n          <b v-if=\"recording\">松开结束</b>\r\n          <b v-else>按下说话</b>\r\n          <a v-if=\"recording\" id=\"recordTime\"  class=\"u-record-time\">00:00</a>\r\n        </i>\r\n        <i v-if=\"!supportTouch && !sendTxt\" class=\"u-btn-record\" :class=\"{'recording':recording, 'disabled': recordDisable}\" @click.stop=\"siwtchRecord\">\r\n          <b v-if=\"recording\">点击发送</b>\r\n          <b v-else>点击说话</b>\r\n          <a v-if=\"recording\" id=\"recordTime\"  class=\"u-record-time with-close-btn\" @click.stop=\"cancelRecord\">00:00</a>\r\n        </i>\r\n      </span>\r\n      <span class=\"u-editor-icons ChatEditor-rightBox\">\r\n        <span v-if=\"sendTxt\" class=\"u-editor-icon\" @click.stop=\"swicthMsgType\">\r\n          <i class=\"u-icon-img\"><img :src=\"icon5\"></i>\r\n        </span>\r\n        <span v-else class=\"u-editor-icon\" @click.stop=\"swicthMsgType\">\r\n          <i class=\"u-icon-img\"><img :src=\"icon4\"></i>\r\n        </span>\r\n        <span v-if=\"!isRobot\" class=\"u-editor-icon\" @click.stop=\"showEmoji\">\r\n          <i class=\"u-icon-img\"><img :src=\"icon1\"></i>\r\n        </span>\r\n        <span v-if=\"!isRobot\" class=\"u-editor-icon\">\r\n          <i class=\"u-icon-img\"><img :src=\"icon2\"></i>\r\n          <input type=\"file\" ref=\"fileToSent\" @change=\"sendFileMsg\">\r\n        </span>\r\n        <span v-if=\"!isRobot && !advancedTeam\" class=\"u-editor-icon\" @click.stop=\"sendPlayMsg\">\r\n          <i class=\"u-icon-img\"><img :src=\"icon3\"></i>\r\n        </span>\r\n        <span v-if='advancedTeam' class=\"u-editor-send u-editor-receipt\" @click=\"turnToMsgReceipt\">回执</span>\r\n        <span class=\"u-editor-send\" @click=\"sendTextMsg\">发 送</span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ChatEmoji from './ChatEmoji'\r\nimport util from '../../utils'\r\nimport config from '../../configs'\r\nimport pageUtil from '../../utils/page'\r\n// import Recorder from '../../plugins/recorder.js'\r\nimport { Cell, CellGroup } from 'vant';\r\n\r\nexport default {\r\n  components: {\r\n    ChatEmoji,\r\n    [Cell.name]: Cell,\r\n    [CellGroup.name]: CellGroup,\r\n  },\r\n  updated () {\r\n    window.document.body.addEventListener('click', () => {\r\n      this.isEmojiShown = false\r\n    })\r\n  },\r\n  props: {\r\n    type: String,\r\n    scene: String,\r\n    to: String,\r\n    isRobot: {\r\n      type: Boolean,\r\n      default () {\r\n        return false\r\n      }\r\n    },\r\n    invalid: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    invalidHint: {\r\n      type: String,\r\n      default: '您无权限发送消息'\r\n    },\r\n    advancedTeam: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  watch: {\r\n    continueRobotAccid (curVal, oldVal) {\r\n      if (curVal && this.robotInfos[curVal]) {\r\n        this.msgToSent = `@${this.robotInfos[curVal].nick} `\r\n      }\r\n      // 重置\r\n      this.$store.dispatch('continueRobotMsg', '')\r\n    },\r\n    msgToSent (curVal, oldVal) {\r\n      if (this.isRobot) {\r\n        return\r\n      }\r\n      let indexAt = this.msgToSent.indexOf('@')\r\n      if (indexAt >= 0 && (indexAt === this.msgToSent.length - 1)) {\r\n        if (this.robotslist && this.robotslist.length > 0) {\r\n          this.isRobotListShown = true\r\n        }\r\n      } else if (this.isRobotListShown === true) {\r\n        this.isRobotListShown = false\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    const data = {\r\n      isEmojiShown: false,\r\n      isRobotListShown: false,\r\n      msgToSent: '',\r\n      icon1: `${config.resourceUrl}/im/chat-editor-1.png`,\r\n      icon2: `${config.resourceUrl}/im/chat-editor-2.png`,\r\n      icon3: `${config.resourceUrl}/im/chat-editor-3.png`,\r\n      icon4: `https://yx-web-nosdn.netease.im/quickhtml%2Fassets%2Fyunxin%2Fdefault%2Fchat-editor-keyboard.png`,\r\n      icon5: `https://yx-web-nosdn.netease.im/quickhtml%2Fassets%2Fyunxin%2Fdefault%2Fchat-editor-record.png`,\r\n      sendTxt: true,\r\n      recording: false,\r\n      recordDisable: false,\r\n      toRecordCount: 0,\r\n      recordTime: 0,\r\n      $recordTime: null,\r\n      recordTimeout: '',\r\n      recorder: null,\r\n      audioContext: null\r\n    }\r\n\r\n    try {\r\n      data.audioContext = new window.AudioContext\r\n    } catch (e) {\r\n      data.recordDisable = true\r\n      console.error(e)\r\n    }\r\n    return data\r\n  },\r\n  computed: {\r\n    continueRobotAccid () {\r\n      return this.$store.state.continueRobotAccid\r\n    },\r\n    robotslist () {\r\n      return this.$store.state.robotslist\r\n    },\r\n    robotInfos () {\r\n      return this.$store.state.robotInfos\r\n    },\r\n    robotInfosByNick () {\r\n      return this.$store.state.robotInfosByNick\r\n    },\r\n    supportTouch () {\r\n      return (\"ontouchend\" in document && \"ontouchstart\" in document && \"ontouchmove\" in document ? true : false)\r\n    }\r\n  },\r\n  methods: {\r\n    sendTextMsg () {\r\n      // if (0) {\r\n      if (this.invalid) {\r\n        this.$toast(this.invalidHint)\r\n        return\r\n      }\r\n      if (/^\\s*$/.test(this.msgToSent)) {\r\n        this.$vux.alert.show({\r\n          title: '请不要发送空消息'\r\n        })\r\n        return\r\n      } else if (this.msgToSent.length > 800) {\r\n        this.$vux.alert.show({\r\n          title: '请不要超过800个字'\r\n        })\r\n        return\r\n      }\r\n      this.msgToSent = this.msgToSent.trim()\r\n      if (this.type === 'session') {\r\n        // 如果是机器人\r\n        if (this.isRobot) {\r\n          this.$store.dispatch('sendRobotMsg', {\r\n            type: 'text',\r\n            scene: this.scene,\r\n            to: this.to,\r\n            robotAccid: this.to,\r\n            // 机器人后台消息\r\n            content: this.msgToSent,\r\n            // 显示的文本消息\r\n            body: this.msgToSent\r\n          })\r\n        } else {\r\n          let robotAccid = ''\r\n          let robotText = ''\r\n\r\n          let atUsers = this.msgToSent.match(/@[^\\s@$]+/g)\r\n          if (atUsers) {\r\n            for (let i = 0; i < atUsers.length; i++) {\r\n              let item = atUsers[i].replace('@', '')\r\n              if (this.robotInfosByNick[item]) {\r\n                robotAccid = this.robotInfosByNick[item].account\r\n                robotText = (this.msgToSent + '').replace(atUsers[i], '').trim()\r\n                break\r\n              }\r\n            }\r\n          }\r\n          if (robotAccid) {\r\n            if (robotText) {\r\n              this.$store.dispatch('sendRobotMsg', {\r\n                type: 'text',\r\n                scene: this.scene,\r\n                to: this.to,\r\n                robotAccid,\r\n                // 机器人后台消息\r\n                content: robotText,\r\n                // 显示的文本消息\r\n                body: this.msgToSent\r\n              })\r\n            } else {\r\n              this.$store.dispatch('sendRobotMsg', {\r\n                type: 'welcome',\r\n                scene: this.scene,\r\n                to: this.to,\r\n                robotAccid,\r\n                // 显示的文本消息\r\n                body: this.msgToSent\r\n              })\r\n            }\r\n          } else {\r\n            this.$store.dispatch('sendMsg', {\r\n              type: 'text',\r\n              scene: this.scene,\r\n              to: this.to,\r\n              text: this.msgToSent\r\n            })\r\n          }\r\n        }\r\n      } else if (this.type === 'chatroom') {\r\n        let robotAccid = ''\r\n        let robotText = ''\r\n\r\n        let atUsers = this.msgToSent.match(/@[^\\s@$]+/g)\r\n        if (atUsers) {\r\n          for (let i = 0; i < atUsers.length; i++) {\r\n            let item = atUsers[i].replace('@', '')\r\n            if (this.robotInfosByNick[item]) {\r\n              robotAccid = this.robotInfosByNick[item].account\r\n              robotText = (this.msgToSent + '').replace(atUsers[i], '').trim()\r\n              break\r\n            }\r\n          }\r\n        }\r\n        if (robotAccid) {\r\n          if (robotText) {\r\n            this.$store.dispatch('sendChatroomRobotMsg', {\r\n              type: 'text',\r\n              robotAccid,\r\n              // 机器人后台消息\r\n              content: robotText,\r\n              // 显示的文本消息\r\n              body: this.msgToSent\r\n            })\r\n          } else {\r\n            this.$store.dispatch('sendChatroomRobotMsg', {\r\n              type: 'welcome',\r\n              robotAccid,\r\n              // 显示的文本消息\r\n              body: this.msgToSent\r\n            })\r\n          }\r\n        } else {\r\n          this.$store.dispatch('sendChatroomMsg', {\r\n            type: 'text',\r\n            text: this.msgToSent\r\n          })\r\n        }\r\n      }\r\n      this.msgToSent = ''\r\n    },\r\n    sendPlayMsg () {\r\n      if (this.invalid) {\r\n        this.$toast(this.invalidHint)\r\n        return\r\n      }\r\n      // 发送猜拳消息\r\n      if (this.type === 'session') {\r\n        this.$store.dispatch('sendMsg', {\r\n          type: 'custom',\r\n          scene: this.scene,\r\n          to: this.to,\r\n          pushContent: '[猜拳]',\r\n          content: {\r\n            type: 1,\r\n            data: {\r\n              value: Math.ceil(Math.random()*3)\r\n            }\r\n          }\r\n        })\r\n      } else if (this.type === 'chatroom') {\r\n        this.$store.dispatch('sendChatroomMsg', {\r\n          type: 'custom',\r\n          pushContent: '[猜拳]',\r\n          content: {\r\n            type: 1,\r\n            data: {\r\n              value: Math.ceil(Math.random()*3)\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    sendFileMsg () {\r\n      if (this.invalid) {\r\n        this.$toast(this.invalidHint)\r\n        return\r\n      }\r\n      let ipt = this.$refs.fileToSent\r\n      if (ipt.value) {\r\n        if (this.type === 'session') {\r\n          this.$store.dispatch('sendFileMsg', {\r\n            scene: this.scene,\r\n            to: this.to,\r\n            fileInput: ipt\r\n          })\r\n        } else if (this.type === 'chatroom') {\r\n          this.$store.dispatch('sendChatroomFileMsg', {\r\n            fileInput: ipt\r\n          })\r\n        }\r\n      }\r\n    },\r\n    showEmoji () {\r\n      this.isEmojiShown = true\r\n    },\r\n    hideEmoji () {\r\n      this.isEmojiShown = false\r\n    },\r\n    addEmoji (emojiName) {\r\n      this.msgToSent += emojiName\r\n      this.hideEmoji()\r\n    },\r\n    chooseRobot (robot) {\r\n      if (robot && robot.account) {\r\n        let len = this.msgToSent.length\r\n        if (len === 0 || this.msgToSent[len-1] !== '@') {\r\n          this.msgToSent += '@' + robot.nick + ' '\r\n        } {\r\n          this.msgToSent += robot.nick + ' '\r\n        }\r\n      }\r\n    },\r\n    hideRobotList () {\r\n      this.isRobotListShown = false\r\n    },\r\n    onInputFocus(e) {\r\n      setTimeout(() => {\r\n        // todo fixme 解决iOS输入框被遮挡问题，但会存在空白缝隙\r\n        e.target.scrollIntoView()\r\n        pageUtil.scrollChatListDown()\r\n      }, 200)\r\n    },\r\n    turnToMsgReceipt() {\r\n      if (this.invalid) {\r\n        this.$toast(this.invalidHint)\r\n        return\r\n      }\r\n      location = `#/teamSendMsgReceipt/${this.to}`\r\n    },\r\n    swicthMsgType () {\r\n      this.sendTxt = !this.sendTxt\r\n    },\r\n    toRecord () {\r\n      var self = this\r\n      self.toRecordCount ++\r\n      if (window.stopPlayAudio) {\r\n        window.stopPlayAudio()\r\n      }\r\n      if (location.protocol === 'http:') {\r\n        self.$toast('请使用https协议')\r\n        return\r\n      }\r\n      if (self.recording) {\r\n        return\r\n      }\r\n      if (self.toRecordCount > 1 && !self.recorder) {\r\n        self.recordDisable = true\r\n      }\r\n      if (self.recordDisable || !self.audioContext || !window.AudioContext || !navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n        self.$toast('当前浏览器不支持录音')\r\n        return\r\n      }\r\n      if (self.recorder) {\r\n        self.recorder.record()\r\n        self.resumeAudioContext()\r\n      } else {\r\n        function failed () {\r\n          self.recordDisable = true\r\n          self.$toast('当前浏览器不支持录音')\r\n        }\r\n        try {\r\n          var value = navigator.mediaDevices.getUserMedia({\r\n            audio: true\r\n          }).then(stream => {\r\n            var input\r\n            try {\r\n              input = self.audioContext.createMediaStreamSource(stream)\r\n              self.recorder = new Recorder(input)\r\n              self.recorder.record()\r\n              self.resumeAudioContext()\r\n              if (!self.recorder) {\r\n                failed()\r\n              }\r\n            } catch (e) {\r\n              failed()\r\n            }\r\n          }).catch(err => {\r\n            self.$toast('没有权限获取麦克风')\r\n            self.recordDisable = true\r\n            console.log('No live audio input: ' + err, err.name + \": \" + err.message)\r\n          })\r\n        } catch (e) {\r\n          failed()\r\n        }\r\n      }\r\n    },\r\n    runRecorderTime () {\r\n      if (this.recorder) {\r\n        this.recording = true\r\n        this.recordTime = 0\r\n        setTimeout(() => {\r\n          this.$recordTime = document.getElementById('recordTime')\r\n        }, 800)\r\n        this.recordTimeout = setTimeout(this.runRecordDuration.bind(this), 1000)\r\n      }\r\n    },\r\n    resumeAudioContext () {\r\n      if (this.audioContext && ~this.audioContext.state.indexOf('suspend')) {\r\n        this.audioContext.resume().then(() => {\r\n          console.log('audioContext suspend state resume')\r\n          this.recorder.record()\r\n          this.runRecorderTime()\r\n        })\r\n      } else {\r\n        this.runRecorderTime()\r\n      }\r\n    },\r\n    runRecordDuration () {\r\n      this.recordTimeout = setTimeout(this.runRecordDuration.bind(this), 1000)\r\n      this.recordTime++\r\n      if (this.recordTime >= 60) {\r\n        clearTimeout(this.recordTimeout)\r\n        this.sendRecord()\r\n      }\r\n      this.$recordTime.innerText = '00:' + (this.recordTime > 9 ? this.recordTime : '0' + this.recordTime)\r\n    },\r\n    siwtchRecord () {\r\n      if (this.recording) {\r\n        this.sendRecordMsg()\r\n      } else {\r\n        this.toRecord()\r\n      }\r\n    },\r\n    cancelRecord () {\r\n      if (this.recording) {\r\n        this.recording = false\r\n        clearTimeout(this.recordTimeout)\r\n        if (this.$recordTime) {\r\n          this.$recordTime.innerText = '00:00'\r\n        }\r\n        this.recorder.stop()\r\n        this.recorder.clear()\r\n      }\r\n    },\r\n    sendRecordMsg () {\r\n      setTimeout(this.sendRecord, 500)\r\n    },\r\n    sendRecord () {\r\n      if (this.recording) {\r\n        clearTimeout(this.recordTimeout)\r\n        if (this.recordTime < 2) {\r\n          this.$toast('语音消息最短2s')\r\n          this.cancelRecord()\r\n          return\r\n        }\r\n        this.recording = false\r\n        this.$recordTime.innerText = '00:00'\r\n        this.recorder.stop()\r\n        this.recorder.exportWAV(blob => {\r\n          this.$store.dispatch('showLoading')\r\n          this.$store.dispatch('sendFileMsg', {\r\n            scene: this.scene,\r\n            to: this.to,\r\n            type: 'audio',\r\n            blob: blob,\r\n            uploadprogress: obj => {\r\n              console.log('文件总大小: ' + obj.total + 'bytes')\r\n              console.log('已经上传的大小: ' + obj.loaded + 'bytes')\r\n              console.log('上传进度: ' + obj.percentage)\r\n              console.log('上传进度文本: ' + obj.percentageText)\r\n              if (obj.percentage === 100) {\r\n                this.$store.dispatch('hideLoading')\r\n              }\r\n            },\r\n            uploaderror: () => {\r\n              console && console.log('上传失败')\r\n            },\r\n            uploaddone: (error, file) => {\r\n              console.log(error)\r\n            }\r\n          })\r\n        })\r\n        this.recorder.clear()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .robot.m-chat-editor-main {\r\n    /*.u-editor-input {\r\n      padding-right: 4.5rem;\r\n    }\r\n    .u-editor-icons {\r\n      width: 4rem;\r\n    }*/\r\n  }\r\n  .m-chat-robot {\r\n    overflow-y: scroll;\r\n    .weui-cells {\r\n      .weui-cell__hd {\r\n        margin-right: 0.5rem;\r\n      }\r\n    }\r\n  }\r\n\r\n  .u-editor-send.u-editor-receipt {\r\n    background-color: #fefefe;\r\n    border: #ccc solid 1px;\r\n    color: black;\r\n    padding: 0.1rem;\r\n    margin-left: .1rem;\r\n  }\r\n  .ChatEditor-rightBox{\r\n    display: flex!important;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    box-sizing: border-box;\r\n    padding: 0 5px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChatEditor.vue?vue&type=template&id=60ca3f3b&\"\nimport script from \"./ChatEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./ChatEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChatEditor.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEditor.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatEditor.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}