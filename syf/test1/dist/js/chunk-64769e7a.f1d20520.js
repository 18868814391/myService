(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-64769e7a"],{"1b11":function(t,o,a){},3107:function(t,o,a){"use strict";var s=a("7386");a.n(s).a},"70f2":function(t,o,a){},7386:function(t,o,a){},a080:function(t,o,a){"use strict";var s=a("e4b6");a.n(s).a},bd3f:function(t,o,a){"use strict";a.r(o);var s=a("6e4e"),r=a("ef1a"),e=a("ed08"),c=a("5def"),n={components:{ChatEditor:s.a,ChatList:r.a},mounted:function(){c.a.scrollChatListDown()},updated:function(){c.a.scrollChatListDown()},data:function(){return{}},computed:{chatroomId:function(){return this.$route.params.chatroomId},msglist:function(){return this.$store.state.currChatroomMsgs}},methods:{msgsLoaded:function(){c.a.scrollChatListDown()}}},i=(a("3107"),a("2877")),m=Object(i.a)(n,function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"m-chat-main p-room-chat-list"},[a("chat-list",{attrs:{type:"chatroom",chatroomId:t.chatroomId,msglist:t.msglist},on:{"msgs-loaded":t.msgsLoaded}}),a("chat-editor",{attrs:{type:"chatroom",chatroomId:t.chatroomId}})],1)},[],!1,null,"ab299dea",null).exports,h=a("f61f"),u={mounted:function(){this.$store.dispatch("getChatroomInfo")},computed:{chatroomInfo:function(){var t=this.$store.state.currChatroomInfo;return t.showTime=e.a.formatDate(t.createTime),t},chatroomNotice:function(){return this.chatroomInfo.announcement||"暂无公告"},chatroomActor:function(){if(this.chatroomInfo){var t=this.chatroomInfo.actor||{};return t.avatar=t.avatar||h.a.defaultUserIcon,t}return{}}}},l=(a("c674"),Object(i.a)(u,function(){var t=this,o=t.$createElement,a=t._self._c||o;return a("div",{staticClass:"p-room-chat-actor"},[a("div",{staticClass:"actor-info"},[a("span",{staticClass:"actor-avatar"},[a("img",{attrs:{src:t.chatroomActor.avatar}})]),a("span",{staticClass:"actor-status"},[a("h3",[t._v("主播： "+t._s(t.chatroomActor.nick||t.chatroomActor.account)+" ")]),a("p",[a("span",[t._v("\n          在线："+t._s(t.chatroomInfo.onlineMemberNum)+"\n        ")])])])]),a("div",{staticClass:"actor-notice"},[a("h3",[t._v("公告：")]),a("p",[t._v("\n      "+t._s(t.chatroomNotice)+"\n    ")])])])},[],!1,null,null,null)).exports,f={mounted:function(){this.$store.dispatch("getChatroomMembers")},destroyed:function(){this.$store.dispatch("clearChatroomMembers")},computed:{chatroomMembers:function(){return this.$store.state.currChatroomMembers.map(function(t){switch(t.avatar?/\?imageView/.test(t.avatar)||(t.avatar+="?imageView&thumbnail=40x40&quality=85"):t.avatar=h.a.defaultUserIcon,t.type){case"owner":t.showType="群主";break;case"manager":t.showType="管理员";break;case"common":case"normal":t.showType="普通成员";break;case"restricted":t.showType="受限制";break;case"guest":t.showType="游客"}return t})}}},d={beforeMount:function(){this.$store.state.isRefresh?location.href="#/room":this.$store.dispatch("connect",{type:"chatroom",chatroomId:this.chatroomId})},destroyed:function(){this.$store.dispatch("resetChatroomSDK",this.chatroomId)},components:{RoomChatList:m,RoomChatMember:(a("cde3"),Object(i.a)(f,function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"p-room-chat-online"},[a("group",{staticClass:"u-list"},this._l(this.chatroomMembers,function(t,o){return a("cell",{key:t.account,staticClass:"u-list-item",attrs:{title:t.nick||t.account,"inline-desc":t.showType}},[a("img",{staticClass:"icon",attrs:{slot:"icon",width:"24",src:t.avatar},slot:"icon"})])}),1)],1)},[],!1,null,null,null)).exports,RoomChatActor:l},data:function(){return{roomType:1}},computed:{chatroomId:function(){return this.$route.params.chatroomId},chatroomInfo:function(){return this.$store.state.chatroomInfos[this.chatroomId]||{}}},methods:{changeRoomType:function(t){this.roomType=t},enterHall:function(){location.href="#/room"}}},p=(a("a080"),Object(i.a)(d,function(){var o=this,t=o.$createElement,a=o._self._c||t;return a("div",{staticClass:"g-inherit m-room p-room-chat"},[a("div",{staticClass:"m-room-album"},[a("div",{staticClass:"img-wraper"},[a("img",{staticClass:"room-img",attrs:{src:o.chatroomInfo.album}})]),a("span",{staticClass:"left-arrow",on:{click:o.enterHall}})]),a("div",{staticClass:"m-room-tabs"},[a("span",{staticClass:"u-tab",class:{active:1===o.roomType},on:{click:function(t){return o.changeRoomType(1)}}},[o._v("\n      直播互动\n    ")]),a("span",{staticClass:"u-tab",class:{active:2===o.roomType},on:{click:function(t){return o.changeRoomType(2)}}},[o._v("\n      主播\n    ")]),a("span",{staticClass:"u-tab",class:{active:3===o.roomType},on:{click:function(t){return o.changeRoomType(3)}}},[o._v("\n      在线成员\n    ")])]),a("div",{staticClass:"m-room-container"},[a("div",{staticClass:"room-cnt"},[1===o.roomType?a("room-chat-list"):o._e(),2===o.roomType?a("room-chat-actor"):o._e(),3===o.roomType?a("room-chat-member"):o._e()],1)])])},[],!1,null,null,null));o.default=p.exports},c674:function(t,o,a){"use strict";var s=a("70f2");a.n(s).a},cde3:function(t,o,a){"use strict";var s=a("1b11");a.n(s).a},e4b6:function(t,o,a){}}]);