(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2dfd7466"],{"29e2":function(s,t,e){},4502:function(s,t,e){"use strict";e.r(t);var n=e("f499"),i=e.n(n),a=e("a745"),o=e.n(a),c=e("e814"),r=e.n(c),d=(e("5f87"),{data:function(){return{navType:2,chating:!1,data:{},nim:null,timer:null,openChatRoom:!1,chatItem:"",chatId:"",chatAdmin:"",chatData:null,sendMsg:""}},beforeDestroy:function(){clearInterval(this.timer)},created:function(){var s=this,t=SDK.NIM.getInstance({appKey:"45c6af3c98409b18a84451215d0bdd6e",account:"pptvvx",token:"153719072fddad21235b126d4f0436dc",onconnect:s.onConnect,onerror:s.onError,onwillreconnect:s.onWillReconnect,ondisconnect:s.onDisconnect,onloginportschange:s.onLoginPortsChange,onblacklist:s.onBlacklist,onsyncmarkinblacklist:s.onMarkInBlacklist,onmutelist:s.onMutelist,onsyncmarkinmutelist:s.onMarkInMutelist,onfriends:s.onFriends,onsyncfriendaction:s.onSyncFriendAction,onmyinfo:s.onMyInfo,onupdatemyinfo:s.onUpdateMyInfo,onusers:s.onUsers,onupdateuser:s.onUpdateUser,onrobots:s.onRobots,onteams:s.onTeams,onsynccreateteam:s.onCreateTeam,onUpdateTeam:s.onUpdateTeam,onteammembers:s.onTeamMembers,onupdateteammember:s.onUpdateTeamMember,onTeamMsgReceipt:s.onTeamMsgReceipt,onsessions:s.onSessions,onupdatesession:s.onUpdateSession,onroamingmsgs:s.onRoamingMsgs,onofflinemsgs:s.onOfflineMsgs,onmsg:s.onMsg,onofflinesysmsgs:s.onOfflineSysMsgs,onsysmsg:s.onSysMsg,onupdatesysmsg:s.onUpdateSysMsg,onsysmsgunread:s.onSysMsgUnread,onupdatesysmsgunread:s.onUpdateSysMsgUnread,onofflinecustomsysmsgs:s.onOfflineCustomSysMsgs,oncustomsysmsg:s.onCustomSysMsg,onbroadcastmsg:s.onBroadcastMsg,onbroadcastmsgs:s.onBroadcastMsgs,onsyncdone:s.onSyncDone});this.nim=t},methods:{changeNav:function(s){this.navType=s},timeString:function(s){return new Date(r()(s)).toLocaleString().substr(0,22)},goChat:function(s,t){this.chating=!0,"p2p"==t.scene?(this.chatId=s,(this.chatItem=t)&&t.to&&(this.chatAdmin=t.to),this.chatData=this.data.msgs[t.id]):"team"==t.scene&&(this.chatId=t.to,(this.chatItem=t)&&t.to&&(this.chatAdmin=t.to),this.chatData=this.data.msgs[t.id]),setTimeout(function(){document.documentElement.scrollTop=document.documentElement.scrollHeight},10)},send:function(){if("p2p"==this.chatItem.scene){var s=this;s.nim.sendText({scene:"p2p",to:s.chatAdmin,text:s.sendMsg,done:s.sendMsgDone})}else if("team"==this.chatItem.scene){var t=this;t.nim.sendText({scene:"team",to:t.chatAdmin,text:t.sendMsg,done:t.sendMsgDone})}},sendMsgDone:function(s,t){this.sendMsg="",this.pushMsg(t),this.goChat(this.chatId,this.chatItem)},onConnect:function(){},onWillReconnect:function(s){},onDisconnect:function(s){s&&s.code},onError:function(s){},onLoginPortsChange:function(s){},onBlacklist:function(s){this.data.blacklist=this.nim.mergeRelations(this.data.blacklist,s),this.data.blacklist=this.nim.cutRelations(this.data.blacklist,s.invalid),this.refreshBlacklistUI()},onMarkInBlacklist:function(s){s.isAdd?this.addToBlacklist(s):this.removeFromBlacklist(s)},addToBlacklist:function(s){this.data.blacklist=this.nim.mergeRelations(this.data.blacklist,s.record),this.refreshBlacklistUI()},removeFromBlacklist:function(s){this.data.blacklist=this.nim.cutRelations(this.data.blacklist,s.record),this.refreshBlacklistUI()},refreshBlacklistUI:function(){},onMutelist:function(s){this.data.mutelist=this.nim.mergeRelations(this.data.mutelist,s),this.data.mutelist=this.nim.cutRelations(this.data.mutelist,s.invalid),this.refreshMutelistUI()},onMarkInMutelist:function(s){s.isAdd?this.addToMutelist(s):this.removeFromMutelist(s)},addToMutelist:function(s){this.data.mutelist=this.nim.mergeRelations(this.data.mutelist,s.record),this.refreshMutelistUI()},removeFromMutelist:function(s){this.data.mutelist=this.nim.cutRelations(this.data.mutelist,s.record),this.refreshMutelistUI()},refreshMutelistUI:function(){},onFriends:function(s){this.data.friends=this.nim.mergeFriends(this.data.friends,s),this.data.friends=this.nim.cutFriends(this.data.friends,s.invalid),this.refreshFriendsUI()},onSyncFriendAction:function(s){switch(s.type){case"addFriend":this.onAddFriend(s.friend);break;case"applyFriend":break;case"passFriendApply":this.onAddFriend(s.friend);break;case"rejectFriendApply":break;case"deleteFriend":this.onDeleteFriend(s.account);break;case"updateFriend":this.onUpdateFriend(s.friend)}},onAddFriend:function(s){this.data.friends=this.nim.mergeFriends(this.data.friends,s),this.refreshFriendsUI()},onDeleteFriend:function(s){this.data.friends=this.nim.cutFriendsByAccounts(this.data.friends,s),this.refreshFriendsUI()},onUpdateFriend:function(s){this.data.friends=this.nim.mergeFriends(this.data.friends,s),this.refreshFriendsUI()},refreshFriendsUI:function(){},onMyInfo:function(s){this.data.myInfo=s,this.updateMyInfoUI()},onUpdateMyInfo:function(s){this.data.myInfo=NIM.util.merge(this.data.myInfo,s),this.updateMyInfoUI()},updateMyInfoUI:function(){},onUsers:function(s){this.data.users=this.nim.mergeUsers(this.data.users,s)},onUpdateUser:function(s){this.data.users=this.nim.mergeUsers(this.data.users,s)},onRobots:function(s){this.data.robots=s},onTeams:function(s){this.data.teams=this.nim.mergeTeams(this.data.teams,s),this.onInvalidTeams(s.invalid)},onInvalidTeams:function(s){this.data.teams=this.nim.cutTeams(this.data.teams,s),this.data.invalidTeams=this.nim.mergeTeams(this.data.invalidTeams,s),this.refreshTeamsUI()},onCreateTeam:function(s){this.data.teams=this.nim.mergeTeams(this.data.teams,s),this.refreshTeamsUI(),this.onTeamMembers({teamId:s.teamId,members:owner})},refreshTeamsUI:function(){},onTeamMembers:function(s,t){s=obj.teamId,t=obj.members,this.data.teamMembers=this.data.teamMembers||{},this.data.teamMembers[s]=this.nim.mergeTeamMembers(this.data.teamMembers[s],t),this.data.teamMembers[s]=this.nim.cutTeamMembers(this.data.teamMembers[s],t.invalid),this.refreshTeamMembersUI()},onSyncTeamMembersDone:function(){},onUpdateTeam:function(s){},onUpdateTeamMember:function(s){this.onTeamMembers({teamId:s.teamId,members:s})},refreshTeamMembersUI:function(){},onTeamMsgReceipt:function(s){},onSessions:function(s){this.data.sessions=this.nim.mergeSessions(this.data.sessions,s),this.updateSessionsUI()},onUpdateSession:function(s){this.data.sessions=this.nim.mergeSessions(this.data.sessions,s),this.updateSessionsUI()},updateSessionsUI:function(){},onRoamingMsgs:function(s){this.pushMsg(s.msgs)},onOfflineMsgs:function(s){this.pushMsg(s.msgs)},onMsg:function(s){this.pushMsg(s),this.chating&&this.goChat(this.chatId,this.chatItem)},onBroadcastMsg:function(s){},onBroadcastMsgs:function(s){},pushMsg:function(s){o()(s)||(s=[s]);var t=s[0].sessionId;this.data.msgs=this.data.msgs||{},this.data.msgs[t]=this.nim.mergeMsgs(this.data.msgs[t],s)},onOfflineSysMsgs:function(s){this.pushSysMsgs(s)},onSysMsg:function(s){this.pushSysMsgs(s)},onUpdateSysMsg:function(s){this.pushSysMsgs(s)},pushSysMsgs:function(s){this.data.sysMsgs=this.nim.mergeSysMsgs(this.data.sysMsgs,s),this.refreshSysMsgsUI()},onSysMsgUnread:function(s){this.data.sysMsgUnread=s,this.refreshSysMsgsUI()},onUpdateSysMsgUnread:function(s){this.data.sysMsgUnread=s,this.refreshSysMsgsUI()},refreshSysMsgsUI:function(){},onOfflineCustomSysMsgs:function(s){},onCustomSysMsg:function(s){},onSyncDone:function(){this.timeOBJ()},timeOBJ:function(){var t=this;this.timer=setTimeout(function(){var s=i()(t.data);t.data=null,t.data=JSON.parse(s)},100)}}}),h=(e("e145"),e("2877")),m=Object(h.a)(d,function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"IM-page"},[n("div",{staticClass:"IM-Nav"},[n("div",{on:{click:function(s){return e.changeNav(1)}}},[e._v("最近会话")]),n("div",{on:{click:function(s){return e.changeNav(2)}}},[e._v("通讯录")]),n("div",{on:{click:function(s){return e.changeNav(3)}}},[e._v("设置")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:1==e.navType,expression:"navType==1"}]},[e._l(e.data.sessions,function(t,s){return n("div",{directives:[{name:"show",rawName:"v-show",value:!e.chating,expression:"!chating"}],key:s,staticClass:"IM-sessions",on:{click:function(s){return e.goChat(t.id,t)}}},["p2p"==t.scene?n("div",[n("div",{staticClass:"IM-sessions-t1"},[e._v(e._s(t.to))]),"text"==t.lastMsg.type?n("div",{staticClass:"IM-sessions-t2"},[e._v(" "+e._s(t.lastMsg.text))]):e._e(),"text"!=t.lastMsg.type?n("div",{staticClass:"IM-sessions-t2"},[e._v(" ["+e._s(t.lastMsg.type)+"]")]):e._e()]):e._e(),"team"==t.scene?n("div",[n("div",{staticClass:"IM-sessions-t1"},[e._v("群消息")]),"text"==t.lastMsg.type?n("div",{staticClass:"IM-sessions-t2"},[e._v(" "+e._s(t.lastMsg.fromNick)+"："+e._s(t.lastMsg.text))]):e._e(),"text"!=t.lastMsg.type?n("div",{staticClass:"IM-sessions-t2"},[e._v(" ["+e._s(t.lastMsg.type)+"]")]):e._e()]):e._e(),n("div",{staticClass:"IM-sessions-t3"},[e._v(e._s(e.timeString(t.updateTime)))])])}),n("button",{directives:[{name:"show",rawName:"v-show",value:e.chating,expression:"chating"}],staticClass:"backButton",on:{click:function(s){e.chating=!e.chating}}},[e._v("后退")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.chating,expression:"chating"}],staticClass:"chat-rom"},e._l(e.chatData,function(s,t){return n("div",{key:t,staticClass:"chat-List",class:"out"==s.flow?"chat-List-r":""},[n("div",{staticClass:"chat-List-t"},[e._v(e._s(s.fromNick))]),n("div",{staticClass:"chat-List-c",class:"out"==s.flow?"chat-List-c-r":""},[e._v(e._s(s.text))])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:e.chating,expression:"chating"}],staticClass:"chat-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sendMsg,expression:"sendMsg"}],attrs:{type:"text",name:"",id:""},domProps:{value:e.sendMsg},on:{input:function(s){s.target.composing||(e.sendMsg=s.target.value)}}}),n("button",{on:{click:e.send}},[e._v("发送")])]),n("div",{staticStyle:{height:"100px"}})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.navType,expression:"navType==2"}]},[e._m(0),n("div",{staticClass:"album-b2"},[n("div",[e._v("群")]),e._l(e.data.teams,function(s,t){return n("div",{key:t},[e._v("\n\t\t\t\t"+e._s(s.name)+"\n\t\t\t")])}),n("hr")],2),n("div",{staticClass:"album-b2"},[n("div",[e._v("好友列表")]),e._l(e.data.users,function(s,t){return n("div",{key:t},[e._v("\n\t\t\t\t"+e._s(s.nick)+"\n\t\t\t")])}),n("hr")],2),e._m(1),e._m(2)])])},[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"album-b1"},[e("button",[s._v("添加好友/群")]),e("button",[s._v("创建组/群")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"album-b2"},[e("div",[s._v("机器人")]),e("hr")])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"album-b2"},[e("div",[s._v("黑名单")]),e("hr")])}],!1,null,null,null);t.default=m.exports},e145:function(s,t,e){"use strict";var n=e("29e2");e.n(n).a}}]);