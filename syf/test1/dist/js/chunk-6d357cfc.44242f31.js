(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d357cfc"],{"066f":function(t,e,s){"use strict";var n=s("479f"),i=s.n(n);i.a},"479f":function(t,e,s){},ab55:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"g-inherit m-article"},[s("div",{staticClass:"Chat-nav"},[s("div",{on:{click:t.onClickBack}},[t._v("返回")]),s("span",{on:{click:t.enterNameCard}},[t._v(t._s(t.sessionName))]),s("div",[s("span",{on:{click:t.onHistoryClick}},[t._v("历史  ")]),"team"===t.scene?s("span",{on:{click:t.onTeamManageClick}},[t._v("成员")]):t._e()])]),s("div",{staticClass:"m-chat-main"},["team"===t.scene&&t.teamInvalid?s("div",{staticClass:"invalidHint"},[t._v("\n      "+t._s("您已退出该"+(t.teamInfo&&"normal"===t.teamInfo.type?"讨论组":"群"))+"\n    ")]):t._e(),s("chat-list",{attrs:{type:"session",msglist:t.msglist,userInfos:t.userInfos,myInfo:t.myInfo,isRobot:t.isRobot},on:{"msgs-loaded":t.msgsLoaded}}),s("chat-editor",{attrs:{type:"session",scene:t.scene,to:t.to,isRobot:t.isRobot,invalid:t.teamInvalid||t.muteInTeam,invalidHint:t.sendInvalidHint,advancedTeam:t.teamInfo&&"advanced"===t.teamInfo.type}})],1)])},i=[],a=(s("7514"),s("a481"),s("bd86")),o=(s("7f7f"),s("6e4e")),r=s("ef1a"),c=s("ed08"),m=s("5def"),h=s("b970"),f={components:Object(a["a"])({ChatEditor:o["a"],ChatList:r["a"]},h["h"].name,h["h"]),mounted:function(){var t=this;if(this.$store.dispatch("showLoading"),this.$store.dispatch("setCurrSession",this.sessionId),m["a"].scrollChatListDown(),setTimeout(function(){t.$store.dispatch("hideLoading")},1e3),"team"===this.scene){var e=this.$store.state.teamMembers[this.to];(void 0===e||e.length<this.teamInfo.memberNum)&&this.$store.dispatch("getTeamMembers",this.to)}},updated:function(){m["a"].scrollChatListDown()},destroyed:function(){this.$store.dispatch("resetCurrSession")},data:function(){return{leftBtnOptions:{backText:" ",preventGoBack:!0},teamID:""}},created:function(){console.log(this.$route.params);var t=this.$route.params.sessionId.replace(/^team-/,"");console.log(t),this.teamID=t},computed:{sessionId:function(){var t=this.$route.params.sessionId;return t},sessionName:function(){var t=this.sessionId,e=null;if(/^p2p-/.test(t)){if(e=t.replace(/^p2p-/,""),e===this.$store.state.userUID)return"我的手机";if(this.isRobot)return this.robotInfos[e].nick;var s=this.userInfos[e]||{};return c["a"].getFriendAlias(s)}if(/^team-/.test(t)){if(this.teamInfo){var n=this.$store.state.teamMembers&&this.$store.state.teamMembers[this.teamInfo.teamId],i=n&&n.length;return this.teamInfo.name+(i?"(".concat(i,")"):"")}return"群"}},scene:function(){return c["a"].parseSession(this.sessionId).scene},to:function(){return c["a"].parseSession(this.sessionId).to},isRobot:function(){var t=this.sessionId,e=null;return!(!/^p2p-/.test(t)||(e=t.replace(/^p2p-/,""),!this.robotInfos[e]))},myInfo:function(){return this.$store.state.myInfo},userInfos:function(){return this.$store.state.userInfos},robotInfos:function(){return this.$store.state.robotInfos},msglist:function(){var t=this.$store.state.currSessionMsgs;return t},teamInfo:function(){if("team"===this.scene){var t=this.sessionId.replace("team-","");return this.$store.state.teamlist.find(function(e){return e.teamId===t})}},muteInTeam:function(){var t=this;if("team"!==this.scene)return!1;var e=this.$store.state.teamMembers,s=e&&e[this.teamInfo.teamId],n=s&&s.find(function(e){return e.account===t.$store.state.userUID});return n&&n.mute||!1},teamInvalid:function(){return"team"===this.scene&&!(this.teamInfo&&this.teamInfo.validToCurrentUser)},sendInvalidHint:function(){return"team"===this.scene&&this.teamInvalid?"您已不在该".concat(this.teamInfo&&"normal"===this.teamInfo.type?"讨论组":"群","，不能发送消息"):this.muteInTeam?"您已被禁言":"无权限发送消息"}},methods:{sessionName2:function(){var t=this.sessionId,e=null;if(/^p2p-/.test(t)){if(e=t.replace(/^p2p-/,""),e===this.$store.state.userUID)return"我的手机";if(this.isRobot)return this.robotInfos[e].nick;var s=this.userInfos[e]||{};return c["a"].getFriendAlias(s)}if(/^team-/.test(t)){if(this.teamInfo){var n=this.$store.state.teamMembers&&this.$store.state.teamMembers[this.teamInfo.teamId],i=n&&n.length;return this.teamInfo.name+(i?"(".concat(i,")"):"")}return"群"}},onClickBack:function(){window.stopPlayAudio&&window.stopPlayAudio(),window.history.go(-1)},msgsLoaded:function(){m["a"].scrollChatListDown()},enterNameCard:function(){if(/^p2p-/.test(this.sessionId)){var t=this.sessionId.replace(/^p2p-/,"");if(t===this.$store.state.userUID)return void(location.href="#/general");location.href="#/namecard/".concat(t)}},onTeamManageClick:function(){this.teamInfo&&this.teamInfo.validToCurrentUser?location.href="#/teammanage/".concat(this.teamInfo.teamId):this.$toast("您已退出该群")},onHistoryClick:function(){"team"!==this.scene||this.teamInfo&&this.teamInfo.validToCurrentUser?location.href="#/chathistory/".concat(this.sessionId):this.$toast("您已退出该群")}}},u=f,d=(s("066f"),s("2877")),l=Object(d["a"])(u,n,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-6d357cfc.44242f31.js.map