(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3395744e"],{"3f13":function(s,t,e){},"76b6":function(s,t,e){"use strict";var o=e("3f13");e.n(o).a},e7ee:function(s,t,e){"use strict";e.r(t);var o=(e("a481"),e("bd86")),n=(e("7f7f"),e("ef1a")),i=e("ed08"),r=e("5def"),a=e("b970"),c={beforeMount:function(){this.$store.state.isRefresh&&(location.href="#/chat/".concat(this.sessionId))},mounted:function(){this.$store.dispatch("resetNoMoreHistoryMsgs"),this.getHistoryMsgs()},updated:function(){var s=r.a.getChatListHeight();r.a.scrollChatListDown(s-this.currPagePos),this.currPagePos=s},components:Object(o.a)({ChatList:n.a},a.g.name,a.g),data:function(){return{leftBtnOptions:{backText:" ",preventGoBack:!0},currPagePos:0}},computed:{sessionId:function(){return this.$route.params.sessionId},sessionName:function(){var s=this.sessionId,t=null;if(/^p2p-/.test(s)){if((t=s.replace(/^p2p-/,""))===this.$store.state.userUID)return"我的手机";if(this.isRobot)return this.robotInfos[t].nick||t;var e=this.userInfos[t]||{};return i.a.getFriendAlias(e)}if(/^team-/.test(s))return"历史记录"},isRobot:function(){var s=this.sessionId,t=null;return!(!/^p2p-/.test(s)||(t=s.replace(/^p2p-/,""),!this.robotInfos[t]))},myInfo:function(){return this.$store.state.myInfo},userInfos:function(){return this.$store.state.userInfos},msglist:function(){return this.$store.state.currSessionMsgs},robotInfos:function(){return this.$store.state.robotInfos},scene:function(){return i.a.parseSession(this.sessionId).scene},to:function(){return i.a.parseSession(this.sessionId).to},canLoadMore:function(){return!this.$store.state.noMoreHistoryMsgs}},methods:{getHistoryMsgs:function(){this.canLoadMore&&this.$store.dispatch("getHistoryMsgs",{scene:this.scene,to:this.to})},loadMore:function(){r.a.getChatListScroll()<=5&&this.getHistoryMsgs()},onClickBack:function(){window.history.go(-1)}}},u=(e("76b6"),e("2877")),f=Object(u.a)(c,function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"g-inherit m-article p-chat-history"},[e("div",{staticClass:"Chat-nav"},[e("div",{on:{click:s.onClickBack}},[s._v("返回")]),e("span",[s._v(s._s(s.sessionName))]),e("div")]),e("div",{staticClass:"m-chat-main"},[e("chat-list",{directives:[{name:"touch",rawName:"v-touch:swipedown",value:s.loadMore,expression:"loadMore",arg:"swipedown"}],ref:"chatlist",attrs:{type:"session",canLoadMore:s.canLoadMore,msglist:s.msglist,userInfos:s.userInfos,myInfo:s.myInfo,isHistory:!0}})],1)])},[],!1,null,null,null);t.default=f.exports}}]);