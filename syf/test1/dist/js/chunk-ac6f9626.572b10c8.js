(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ac6f9626"],{ad09:function(s,t,e){"use strict";e.r(t);var n,a=(e("7514"),e("bd86")),i=(e("7f7f"),e("ed08")),o=e("f61f"),c=e("b970"),r={components:(n={},Object(a.a)(n,c.b.name,c.b),Object(a.a)(n,c.c.name,c.c),n),data:function(){return{delSessionId:null,stopBubble:!1,noticeIcon:o.a.noticeIcon,myPhoneIcon:o.a.myPhoneIcon,myGroupIcon:o.a.defaultGroupIcon,myAdvancedIcon:o.a.defaultAdvancedIcon}},created:function(){this.$store.dispatch("connect"),this.$store.dispatch("updateRefreshState")},computed:{sysMsgUnread:function(){var s=this.$store.state.sysMsgUnread,t=s.addFriend||0;return(t+=s.team||0)+this.$store.state.customSysMsgUnread},userInfos:function(){return this.$store.state.userInfos},myInfo:function(){return this.$store.state.myInfo},myPhoneId:function(){return"".concat(this.$store.state.userUID)},sessionlist:function(){var a=this;return this.$store.state.sessionlist.filter(function(t){if(t.name="",t.avatar="","p2p"===t.scene){var s;if(t.to===a.myPhoneId)return!1;(s=a.userInfos[t.to])&&(t.name=i.a.getFriendAlias(s),t.avatar=s.avatar)}else if("team"===t.scene){var e;e=a.$store.state.teamlist.find(function(s){return s.teamId===t.to}),t.avatar=e?(t.name=e.name,e.avatar||("normal"===e.type?a.myGroupIcon:a.myAdvancedIcon)):(t.name="群".concat(t.to),t.avatar||a.myGroupIcon)}var n=t.lastMsg||{};return"text"===n.type?t.lastMsgShow=n.text||"":"custom"===n.type?t.lastMsgShow=i.a.parseCustomMsg(n):"team"===n.scene&&"notification"===n.type?t.lastMsgShow=i.a.generateTeamSysmMsg(n):i.a.mapMsgType(n)?t.lastMsgShow="[".concat(i.a.mapMsgType(n),"]"):t.lastMsgShow="",t.updateTime&&(t.updateTimeShow=i.a.formatDate(t.updateTime,!0)),t})}},methods:{enterSysMsgs:function(){this.hideDelBtn()||(location.href="#/sysmsgs")},backIndex:function(){this.$router.push({path:"/index"})},enterChat:function(s){this.hideDelBtn()||s&&s.id&&(location.href="#/chat/".concat(s.id))},enterMyChat:function(){location.href="#/chat/p2p-".concat(this.myPhoneId)},deleteSession:function(){null!==this.delSessionId&&this.$store.dispatch("deleteSession",this.delSessionId)},showDelBtn:function(s){var t=this;s&&s.data&&s.data.attrs&&(this.delSessionId=s.data.attrs.sessionId,this.stopBubble=!0,setTimeout(function(){t.stopBubble=!1},20))},hideDelBtn:function(){return null!==this.delSessionId&&!this.stopBubble&&!(this.delSessionId=null)}}},l=(e("e85b"),e("2877")),u=Object(l.a)(r,function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",{staticClass:"g-inherit m-main p-session"},[n("van-cell-group",{staticClass:"u-list"},[n("van-cell",{staticClass:"session-cell",attrs:{title:"消息中心"},nativeOn:{click:function(s){return e.enterSysMsgs(s)}}},[n("img",{staticClass:"session-icon",attrs:{slot:"icon",src:e.noticeIcon},slot:"icon"}),n("span",{directives:[{name:"show",rawName:"v-show",value:0<e.sysMsgUnread,expression:"sysMsgUnread >0"}],staticClass:"session-noRead"},[e._v(e._s(e.sysMsgUnread))])]),n("van-cell",{staticClass:"session-cell",attrs:{title:"我的手机"},nativeOn:{click:function(s){return e.enterMyChat(s)}}},[n("img",{staticClass:"session-icon",attrs:{slot:"icon",src:e.myPhoneIcon},slot:"icon"})]),e._l(e.sessionlist,function(t,s){return n("van-cell",{directives:[{name:"touch",rawName:"v-touch:swipeleft",value:e.showDelBtn,expression:"showDelBtn",arg:"swipeleft"},{name:"touch",rawName:"v-touch:swiperight",value:e.hideDelBtn,expression:"hideDelBtn",arg:"swiperight"}],key:t.id,staticClass:"session-cell",attrs:{title:t.name,label:t.lastMsgShow,sessionId:t.id},nativeOn:{click:function(s){return e.enterChat(t)}}},[n("img",{staticClass:"session-icon",attrs:{slot:"icon",src:t.avatar},slot:"icon"}),n("span",{staticClass:"u-session-time"},[e._v("\n        "+e._s(t.updateTimeShow)+"\n      ")]),n("span",{directives:[{name:"show",rawName:"v-show",value:0<t.unread,expression:"session.unread > 0"}],staticClass:"session-noRead"},[e._v(e._s(t.unread))]),n("span",{staticClass:"u-tag-del",class:{active:e.delSessionId===t.id},on:{click:e.deleteSession}})])})],2)],1)},[],!1,null,null,null);t.default=u.exports},e85b:function(s,t,e){"use strict";var n=e("eae9");e.n(n).a},eae9:function(s,t,e){}}]);