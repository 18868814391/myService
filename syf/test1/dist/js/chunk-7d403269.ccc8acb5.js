(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7d403269"],{"1dce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-inherit m-article p-membercard"},[a("x-header",{staticClass:"m-tab",attrs:{"left-options":{backText:" "}}},[a("h1",{staticClass:"m-tab-top"},[t._v("群名片")]),a("a",{attrs:{slot:"left"},slot:"left"})]),a("div",{staticClass:"g-body"},[a("div",{staticClass:"g-avatar"},[a("img",{staticClass:"icon u-circle",attrs:{slot:"icon",width:"50",height:"50",src:t.member&&t.member.avatar},slot:"icon"}),a("div",[t._v(t._s(t.member&&t.member.alias))])]),a("group",{staticClass:"m-group"},[a("cell",{attrs:{title:"群昵称",value:t.member.nickInTeam||"未设置","is-link":""},nativeOn:{click:function(e){return function(){return t.hasSetNickPermission?t.onEditItemClick("修改群昵称","text","nickInTeam",t.getUpdateCallBcak()):t.$toast("无权限")}()}}}),a("cell",{attrs:{title:"身份",value:t.memberType,"is-link":""},nativeOn:{click:function(e){return function(){return t.hasSetMemberTypePermission?t.onEditItemClick("身份","select","memberType",t.getUpdateCallBcak()):t.$toast("无权限")}()}}}),t.hasMuteOrRemovePermission?a("x-switch",{staticClass:"u-switch",attrs:{title:"设置禁言"},on:{"on-change":t.changeMute},model:{value:t.mute,callback:function(e){t.mute=e},expression:"mute"}}):t._e()],1),t.hasMuteOrRemovePermission?a("x-button",{staticClass:"u-btn",attrs:{mini:"",type:"warn"},nativeOn:{click:function(e){return t.remove(e)}}},[t._v("移出本群")]):t._e()],1)],1)},s=[],i=a("5176"),r=a.n(i),o=(a("ac6a"),a("f61f")),c=(a("ed08"),{data:function(){return{avatar:o["a"].defaultUserIcon,teamId:"",account:"",mute:!1,selfType:"normal"}},computed:{member:function(){var t=this,e=/(\d+)-(\w+)/,a=e.exec(this.$route.params.member),n=a[1];this.teamId=n;var s=a[2];this.account=s;var i={};this.$store.state.teamMembers[n]&&this.$store.state.teamMembers[n].forEach(function(e){e.account===s&&(i=r()(i,e)),e.account===t.$store.state.userUID&&(t.selfType=e.type)});var o=this.$store.state.userInfos[i.account];return i.account===this.$store.state.userUID&&(o=this.$store.state.myInfo),i.avatar=o?o.avatar:i.avatar||this.avatar,i.alias=o?o.nick:i.account||"account",this.mute=!!i.mute,i},memberType:function(){if(this.member)switch(this.member.type){case"owner":return"群主";case"manager":return"管理员";case"normal":return"普通成员"}return"普通成员"},infoInTeam:function(){return{nickInTeam:this.member.nickInTeam,memberType:this.member.type}},hasSetMemberTypePermission:function(){return"owner"===this.selfType&&"owner"!==this.member.type},hasMuteOrRemovePermission:function(){return"owner"===this.selfType?"owner"!==this.member.type:"manager"===this.selfType&&"normal"===this.member.type},isSelf:function(){return this.member.account===this.$store.state.userUID},hasSetNickPermission:function(){return"normal"!==this.selfType||this.isSelf}},methods:{changeMute:function(){var t=this;this.$store.dispatch("delegateTeamFunction",{functionName:"updateMuteStateInTeam",options:{teamId:this.teamId,account:this.account,mute:this.mute,done:function(e,a){e?t.$toast(e):t.$toast(t.mute?"已禁言":"已取消禁言")}}})},getUpdateCallBcak:function(){var t=this,e=this.member.account,a=this.$store,n=(this.$toast,function(e,n){e?t.$toast(e):(t.$toast("更改成功"),setTimeout(function(){history.go(-1)},200)),a.dispatch("hideLoading")});return function(t,s,i){a.dispatch("showLoading");var o=null,c={};"nickInTeam"===s?(o="updateNickInTeam",c.account=e,c.nickInTeam=i):"memberType"===s&&(o="manager"===i?"addTeamManagers":"removeTeamManagers",c.accounts=[e]),a.dispatch("delegateTeamFunction",{functionName:o,options:r()({teamId:t,done:n},c)})}},onEditItemClick:function(t,e,a,n){var s=this.isSelf&&"nickInTeam"===a;this.$store.dispatch("enterSettingPage",{title:t,inputType:e,updateKey:a,teamId:this.teamId,updateInfoInTeam:!!s,defaultValue:this.infoInTeam[a],confirmCallback:s?null:n,enable:!0})},remove:function(){var t=this;this.$store.dispatch("showLoading"),this.$store.dispatch("delegateTeamFunction",{functionName:"removeTeamMembers",options:{teamId:this.teamId,accounts:[this.member.account],done:function(e,a){t.$toast(e||"移除成功"),history.go(-1),t.$store.dispatch("hideLoading")}}})}}}),m=c,u=(a("9b74"),a("2877")),l=Object(u["a"])(m,n,s,!1,null,"b38fb266",null);e["default"]=l.exports},"9b74":function(t,e,a){"use strict";var n=a("fc97"),s=a.n(n);s.a},fc97:function(t,e,a){}}]);
//# sourceMappingURL=chunk-7d403269.ccc8acb5.js.map