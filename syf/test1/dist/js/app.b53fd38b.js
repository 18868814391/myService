(function(e){function t(t){for(var a,o,i=t[0],r=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],c[o]&&d.push(c[o][0]),c[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var i=n[o];0!==c[i]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},c={app:0},s=[];function i(e){return r.p+"js/"+({}[e]||e)+"."+{"chunk-16f932ec":"7509c27f","chunk-263f7506":"1cb31515","chunk-2d0d6f9e":"8abb9bac","chunk-2d0e921d":"be14084d","chunk-2d21645e":"0df730b1","chunk-2d2223f4":"1c3f4312","chunk-2dfd7466":"c87ecd3d","chunk-321576c8":"7ab8b345","chunk-40bcb8c8":"9349cbad","chunk-426f1d88":"df230eac","chunk-44155956":"6b8201c7","chunk-475ea7a5":"92fbe948","chunk-4adae60d":"3107bf05","chunk-666ff67d":"20e83c06","chunk-6a82f1ca":"46e78e29","chunk-716a2376":"0af5955b","chunk-771dc3a6":"84cd0927","chunk-79aa06b7":"2f6e91be","chunk-7b77d1ba":"f3495296","chunk-7d403269":"ccc8acb5","chunk-8163e59a":"c0eb24cc","chunk-ac6f9626":"057c0385","chunk-b2cf3d7a":"43895825","chunk-cd39b9bc":"46cd221b","chunk-e4dbe8ea":"b02fbc92","chunk-3395744e":"fcee3770","chunk-c12077d2":"3171d142","chunk-64769e7a":"1f033b36","chunk-6d357cfc":"8010240f","chunk-e8f5e4a6":"8c15f35c","chunk-03d20be1":"9eb2a37e","chunk-1a4912b7":"c5a9aaca","chunk-1ec9674a":"c64d81ba","chunk-28ac5158":"7abd45a3","chunk-2a52e2fc":"fbd2fbe2","chunk-2abbcf86":"184a3677","chunk-484263bf":"b752c27c","chunk-4e8bbd50":"66830aa1","chunk-52b6f99a":"459af551","chunk-42c67d5c":"629ed2f1","chunk-4947c5c2":"c6e07533","chunk-50d2da58":"9939f62d","chunk-530ce530":"afec5e21","chunk-5be6bfbf":"e7e3cc1e","chunk-5ecef65f":"d3105b0b","chunk-7044a42a":"11abc4f0","chunk-763815dd":"6257e1a9","chunk-9128c356":"8a2890a0"}[e]+".js"}function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n={"chunk-16f932ec":1,"chunk-263f7506":1,"chunk-2dfd7466":1,"chunk-321576c8":1,"chunk-40bcb8c8":1,"chunk-426f1d88":1,"chunk-44155956":1,"chunk-475ea7a5":1,"chunk-4adae60d":1,"chunk-666ff67d":1,"chunk-6a82f1ca":1,"chunk-716a2376":1,"chunk-771dc3a6":1,"chunk-79aa06b7":1,"chunk-7b77d1ba":1,"chunk-7d403269":1,"chunk-8163e59a":1,"chunk-ac6f9626":1,"chunk-b2cf3d7a":1,"chunk-cd39b9bc":1,"chunk-e4dbe8ea":1,"chunk-3395744e":1,"chunk-c12077d2":1,"chunk-64769e7a":1,"chunk-6d357cfc":1,"chunk-1a4912b7":1,"chunk-1ec9674a":1,"chunk-28ac5158":1,"chunk-2a52e2fc":1,"chunk-484263bf":1,"chunk-4e8bbd50":1,"chunk-52b6f99a":1,"chunk-42c67d5c":1,"chunk-4947c5c2":1,"chunk-50d2da58":1,"chunk-530ce530":1,"chunk-5be6bfbf":1,"chunk-5ecef65f":1,"chunk-7044a42a":1,"chunk-763815dd":1,"chunk-9128c356":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise(function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-16f932ec":"73e4a8cb","chunk-263f7506":"6f8fbd9b","chunk-2d0d6f9e":"31d6cfe0","chunk-2d0e921d":"31d6cfe0","chunk-2d21645e":"31d6cfe0","chunk-2d2223f4":"31d6cfe0","chunk-2dfd7466":"04d6e3e0","chunk-321576c8":"36e8a270","chunk-40bcb8c8":"fe1b20d9","chunk-426f1d88":"d6c9f7bf","chunk-44155956":"5a90f779","chunk-475ea7a5":"f6619e16","chunk-4adae60d":"e135de28","chunk-666ff67d":"d269c772","chunk-6a82f1ca":"7a2fb18c","chunk-716a2376":"d2dd0ec0","chunk-771dc3a6":"01c46b91","chunk-79aa06b7":"0f5f0a65","chunk-7b77d1ba":"0e433876","chunk-7d403269":"3920e7af","chunk-8163e59a":"16d2c701","chunk-ac6f9626":"61370aab","chunk-b2cf3d7a":"f22da3ed","chunk-cd39b9bc":"443e9c26","chunk-e4dbe8ea":"4aab4bcd","chunk-3395744e":"5f1d44be","chunk-c12077d2":"c1778aac","chunk-64769e7a":"e88b03ac","chunk-6d357cfc":"745ecaf1","chunk-e8f5e4a6":"31d6cfe0","chunk-03d20be1":"31d6cfe0","chunk-1a4912b7":"2ffd4725","chunk-1ec9674a":"e11c9ab2","chunk-28ac5158":"0bd371ef","chunk-2a52e2fc":"ed9f66c5","chunk-2abbcf86":"31d6cfe0","chunk-484263bf":"7bbdff48","chunk-4e8bbd50":"42acb075","chunk-52b6f99a":"42acb075","chunk-42c67d5c":"356b136d","chunk-4947c5c2":"d8fde6f8","chunk-50d2da58":"d1fc7a45","chunk-530ce530":"52e5a53a","chunk-5be6bfbf":"c2865bd4","chunk-5ecef65f":"ce63121b","chunk-7044a42a":"16a01157","chunk-763815dd":"9d1d8fc8","chunk-9128c356":"364035e7"}[e]+".css",c=r.p+a,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],m=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(m===a||m===c))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],m=u.getAttribute("data-href");if(m===a||m===c)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var a=t&&t.target&&t.target.src||c,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.request=a,delete o[e],f.parentNode.removeChild(f),n(s)},f.href=c;var l=document.getElementsByTagName("head")[0];l.appendChild(f)}).then(function(){o[e]=0}));var a=c[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise(function(t,n){a=c[e]=[t,n]});t.push(a[2]=s);var u,m=document.createElement("script");m.charset="utf-8",m.timeout=120,r.nc&&m.setAttribute("nonce",r.nc),m.src=i(e),u=function(t){m.onerror=m.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+a+": "+o+")");s.type=a,s.request=o,n[1](s)}c[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:m})},12e4);m.onerror=m.onload=u,document.head.appendChild(m)}return Promise.all(t)},r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],m=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=m;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},1739:function(e,t,n){"use strict";var a=n("af98"),o=n.n(a);o.a},"1ce2":function(e,t,n){"use strict";var a=n("4263"),o=n.n(a);o.a},4263:function(e,t,n){},4360:function(e,t,n){"use strict";var a=n("2b0e"),o=n("2f62"),c={state:{},mutations:{},actions:{}},s=c,i=n("5f87"),r={state:{Thename:Object(i["a"])(),admin:Object(i["b"])(),showTabNav:!0},mutations:{SET_NAME:function(e,t){e.Thename=t},SET_ADMIN:function(e,t){e.admin=t},SET_showTabNav:function(e,t){e.showTabNav=t}},actions:{SetThename:function(e,t){var n=e.commit,a=t.Thename;n("SET_NAME",a)},Setadmin:function(e,t){var n=e.commit,a=t.admin;n("SET_ADMIN",a)},SetTabNav:function(e,t){var n=e.commit,a=t.shownav;n("SET_showTabNav",a)}}},u=r,m={Thename:function(e){return e.user.Thename},admin:function(e){return e.user.admin},showTabNav:function(e){return e.users.showTabNav}},d=m,f=n("75fc"),l=(n("20d6"),n("5176")),h=n.n(l),p=(n("7514"),n("a745")),g=n.n(p),b=(n("55dd"),n("4aa6")),v=n.n(b),k=(n("ac6a"),n("f3e4")),y=n("ed08"),M=n("f61f"),I={updateRefreshState:function(e){e.isRefresh=!1},updateLoading:function(e,t){clearTimeout(e.loadingTimer),e.loadingTimer=setTimeout(function(){e.isLoading=t},20)},updateFullscreenImage:function(e,t){t=t||{},t.src&&"show"===t.type?(e.fullscreenImgSrc=t.src,e.isFullscreenImgShow=!0):"hide"===t.type&&(e.fullscreenImgSrc=" ",e.isFullscreenImgShow=!1)},updateUserUID:function(e,t){e.userUID=t.uid,e.sdktoken=t.sdktoken,k["a"].setCookie("uid",t.uid),k["a"].setCookie("sdktoken",t.sdktoken)},updateMyInfo:function(e,t){e.myInfo=y["a"].mergeObject(e.myInfo,t)},updateUserInfo:function(e,t){var n=e.userInfos;t.forEach(function(e){var t=e.account;t&&(n[t]=y["a"].mergeObject(n[t],e))}),e.userInfos=y["a"].mergeObject(e.userInfos,n)},updateFriends:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=e.nim;e.friendslist=n.mergeFriends(e.friendslist,t),e.friendslist=n.cutFriends(e.friendslist,t.invalid)},updateRobots:function(e,t){var n=e.nim;t=t.map(function(e){return e.avatar?(e.originAvatar=e.avatar,e.avatar=n.viewImageSync({url:e.avatar,thumbnail:{width:40,height:40,mode:"cover"}})):e.avatar=M["a"].defaultUserIcon,e}),e.robotslist=t,e.robotInfos=v()(null),t.forEach(function(t){e.robotInfos[t.account]=t,e.robotInfosByNick[t.nick]=t})},updateBlacklist:function(e,t){var n=e.nim;e.blacklist=n.cutFriends(e.blacklist,t.invalid);var a=t.filter(function(e){return!0===e.isBlack}),o=t.filter(function(e){return!1===e.isBlack});e.blacklist=n.mergeFriends(e.blacklist,a),e.blacklist=n.cutFriends(e.blacklist,o)},updateSearchlist:function(e,t){var n=t.type;switch(n){case"user":0!==t.list.length||0!==e.searchedUsers.length?e.searchedUsers=t.list:e.searchedUsers=[];break;case"team":0!==t.list.length||0!==e.searchedTeams.length?e.searchedTeams=t.list:e.searchedTeams=[];break}},updateSessions:function(e,t){var n=e.nim;e.sessionlist=n.mergeSessions(e.sessionlist,t),e.sessionlist.sort(function(e,t){return t.updateTime-e.updateTime}),e.sessionlist.forEach(function(t){e.sessionMap[t.id]=t})},deleteSessions:function(e,t){var n=e.nim;e.sessionlist=n.cutSessionsByIds(e.sessionlist,t)},updateMsgs:function(e,t){var n=e.nim,a={};for(var o in t.forEach(function(t){var o=t.sessionId;a[o]=!0,e.msgs[o]||(e.msgs[o]=[]),e.msgs[o]=n.mergeMsgs(e.msgs[o],[t])}),st.commit("updateMsgByIdClient",t),a)e.msgs[o].sort(function(e,t){if(e.time===t.time&&"robot"===e.type&&"robot"===t.type){if(e.content&&e.content.msgOut)return 1;if(t.content&&t.content.msgOut)return-1}return e.time-t.time}),o===e.currSessionId&&st.commit("updateCurrSessionMsgs",{type:"init"})},putMsg:function(e,t){var n=t.sessionId;e.msgs[n]||(e.msgs[n]=[]),st.commit("updateMsgByIdClient",t);var a=e.msgs[n],o=a.length-1;if(0===a.length||t.time>=a[o].time)a.push(t);else for(var c=o;c>=0;c--){var s=a[c];if(t.time>=s.time){e.msgs[n].splice(c,0,t);break}}},deleteMsg:function(e,t){var n=t.sessionId,a=e.msgs[n];if(a&&0!==a.length)for(var o=a.length-1,c=o;c>=0;c--){var s=a[c];if(t.idClient===s.idClient){e.msgs[n].splice(c,1);break}}},replaceMsg:function(e,t){var n=t.sessionId,a=t.idClient,o=t.msg,c=e.msgs[n];if(c&&0!==c.length)for(var s=c.length-1,i=s;i>=0;i--){var r=c[i];if(console.log(a,r.idClient,r.text),a===r.idClient){e.msgs[n].splice(i,1,o);break}}},updateMsgByIdClient:function(e,t){g()(t)||(t=[t]);var n=(new Date).getTime();t.forEach(function(t){t.idClient&&n-t.time<3e5&&(e.msgsMap[t.idClient]=t)})},updateCurrSessionId:function(e,t){var n=t.type||"";"destroy"===n?e.currSessionId=null:"init"===n&&t.sessionId&&t.sessionId!==e.currSessionId&&(e.currSessionId=t.sessionId)},updateCurrSessionMsgs:function(e,t){var n=t.type||"";if("destroy"===n)e.currSessionMsgs=[],e.currSessionLastMsg=null,st.commit("updateCurrSessionId",{type:"destroy"});else if("init"===n){if(e.currSessionId){var a=e.currSessionId,o=[].concat(e.msgs[a]||[]),c=M["a"].localMsglimit,s=o.length;s-c>0?(e.currSessionLastMsg=o[s-c],o=o.slice(s-c,s)):e.currSessionLastMsg=s>0?o[0]:null,e.currSessionMsgs=[];var i=0;o.forEach(function(t){t.time-i>3e5&&(i=t.time,e.currSessionMsgs.push({type:"timeTag",text:y["a"].formatDate(t.time,!1)})),e.currSessionMsgs.push(t)}),st.dispatch("checkTeamMsgReceipt",e.currSessionMsgs)}}else if("put"===n){var r=t.msg,u=0,m=e.currSessionMsgs.length;m>0&&(u=e.currSessionMsgs[m-1].time),r&&(r.time-u>3e5&&e.currSessionMsgs.push({type:"timeTag",text:y["a"].formatDate(r.time,!1)}),e.currSessionMsgs.push(r),st.dispatch("checkTeamMsgReceipt",[r]))}else if("concat"===n){var d=[],f=0;t.msgs.forEach(function(e){e.time-f>3e5&&(f=e.time,d.push({type:"timeTag",text:y["a"].formatDate(e.time,!1)})),d.push(e)}),d.reverse(),d.forEach(function(t){e.currSessionMsgs.unshift(t)}),t.msgs[0]&&(e.currSessionLastMsg=t.msgs[0]),st.dispatch("checkTeamMsgReceipt",d)}else if("replace"===n){var l=e.currSessionMsgs.length,h=l-1;if(l>0)for(var p=h;p>=0;p--)if(e.currSessionMsgs[p].idClient===t.idClient){e.currSessionMsgs.splice(p,1,t.msg);break}}},updateSysMsgs:function(e,t){var n=e.nim;g()(t)||(t=[t]),t=t.map(function(e){return e.showTime=y["a"].formatDate(e.time,!1),e}),e.sysMsgs=[].concat(n.mergeSysMsgs(e.sysMsgs,t)),Vue.set(e,t,e.sysMsgs)},updateSysMsgState:function(e,t){var n=e.sysMsgs.find(function(e){return e.idServer===t.idServer});n&&(n.state=t.state)},updateSysMsgUnread:function(e,t){e.sysMsgUnread=h()({},t)},updateCustomSysMsgs:function(e,t){e.nim;g()(t)||(t=[t]),t=t.map(function(e){return e.showTime=y["a"].formatDate(e.time,!1),e}),e.customSysMsgs=e.customSysMsgs.concat(t),Vue.set(e,t,e.customSysMsgs),st.commit("updateCustomSysMsgUnread",{type:"add",unread:t.length})},updateCustomSysMsgUnread:function(e,t){var n=t.type,a=t.unread;switch(n){case"reset":e.customSysMsgUnread=a||0;break;case"add":e.customSysMsgUnread+=a;break}},resetSysMsgs:function(e,t){var n=t.type;switch(n){case 0:e.sysMsgs=[];break;case 1:e.customSysMsgs=[],st.commit("updateCustomSysMsgUnread",{type:"reset"});break}},deleteSysMsgs:function(e,t){var n=t.type,a=t.idServer,o=0===n?e.sysMsgs:e.customSysMsgs;o=o.filter(function(e){return e.idServer!==a}),Vue.set(e,"sysMsgs",o)},setNoMoreHistoryMsgs:function(e){e.noMoreHistoryMsgs=!0},resetNoMoreHistoryMsgs:function(e){e.noMoreHistoryMsgs=!1},continueRobotMsg:function(e,t){e.continueRobotAccid=t},initChatroomInfos:function(e,t){e.chatroomInfos=t},setCurrChatroom:function(e,t){e.currChatroomId=t,e.currChatroom=e.chatroomInsts[t],e.currChatroomMsgs=[],e.currChatroomInfo={},e.currChatroomMembers=[]},resetCurrChatroom:function(e){e.currChatroomId=null,e.currChatroom=null,e.currChatroomMsgs=[],e.currChatroomInfo={},e.currChatroomMembers=[]},updateChatroomInfo:function(e,t){e.currChatroomInfo=h()(e.currChatroomInfo,t)},updateCurrChatroomMsgs:function(e,t){var n=h()({},t),a=n.type,o=n.msgs;if("put"===a)o.forEach(function(t){var n=t.chatroomId;n===e.currChatroomId&&o.forEach(function(t){e.currChatroomMsgs.push(t)})});else if("concat"===a){var c=t.msgs;c.reverse(),c.forEach(function(t){e.currSessionMsgs.unshift(t)}),t.msgs[0]&&(e.currSessionLastMsg=t.msgs[0])}},getChatroomInfo:function(e,t){e.currChatroomInfo=t},updateChatroomMembers:function(e,t){var n=t.type,a=t.members;"destroy"===n?e.currChatroomMembers=[]:"put"===n&&a.forEach(function(t){t.online&&e.currChatroomMembers.push(t)})},updateTeamList:function(e,t){var n=e.nim;st.state.teamlist=n.mergeTeams(st.state.teamlist,t),st.state.teamlist=n.cutTeams(st.state.teamlist,t.invalid)},updateTeamMembers:function(e,t){var n=e.nim,a=t.teamId,o=t.members;e.teamMembers=e.teamMembers||{},e.teamMembers[a]=n.mergeTeamMembers(e.teamMembers[a],o),e.teamMembers[a]=n.cutTeamMembers(e.teamMembers[a],o.invalid),e.teamMembers[a].sort(function(e,t){return"owner"===e.type||"owner"===t.type?"owner"===e.type?-1:1:"manager"===e.type||"manager"===t.type?"manager"===e.type?-1:"manager"===t.type?1:0:-1}),e.teamMembers=h()({},e.teamMembers)},removeTeamMembersByAccounts:function(e,t){var n=t.teamId,a=t.accounts;void 0!==e.teamMembers[n]&&(e.teamMembers[n]=e.teamMembers[n].filter(function(e,t){return-1===a.indexOf(e.account)}),e.teamMembers=h()({},e.teamMembers))},updateTeamInfo:function(e,t){var n=e.teamlist.findIndex(function(e){return e.teamId===t.teamId});if(-1!==n)for(var a in t)"teamId"!==a&&t.hasOwnProperty(a)&&t[a]&&(e.teamlist[n][a]=t[a])},updateTeamSettingConfig:function(e,t){e.teamSettingConfig=t},updateSentReceipedMap:function(e,t){var n;if(t&&!(t.length<1)){var a=t[0].teamId;e.sentReceipedMap[a]||(e.sentReceipedMap[a]=[]),(n=e.sentReceipedMap[a]).push.apply(n,Object(f["a"])(t.map(function(e){return e.idServer})))}},updateReceiptQueryList:function(e,t){e.currReceiptQueryTeamId!==t.teamId&&(e.receiptQueryList=[],e.teamMsgReads=[],e.currReceiptQueryTeamId=t.teamId);var n,a=t.msgs.filter(function(t){return t.needMsgReceipt&&t.from===e.myInfo.account&&!e.receiptQueryList.find(function(e){return e.idServer===t.idServer})}).map(function(e){return{teamId:t.teamId,idServer:e.idServer}});a.length>0&&(n=e.receiptQueryList).push.apply(n,Object(f["a"])(a));a.length>0&&st.dispatch("getTeamMsgReads",a)},updateTeamMsgReads:function(e,t){var n;(n=e.teamMsgReads).push.apply(n,Object(f["a"])(t.teamMsgReceipts))},updateSingleTeamMsgReads:function(e,t){e.teamMsgReads.forEach(function(e){e.idServer===t.idServer&&(e.unread=t.unread,e.read=t.read)});var n=e.teamMsgReadsDetail.unreadAccounts,a=n.findIndex(function(e){return e===t.account});a>=0&&(n.splice(a,1),e.teamMsgReadsDetail.readAccounts.push(t.account))},initMsgReceiptDetail:function(e,t){e.teamMsgReadsDetail.readAccounts=t.readAccounts,e.teamMsgReadsDetail.unreadAccounts=t.unreadAccounts}},w=n("5def");function S(e){e.state;var t=e.commit;t("updateLoading",!0)}function T(e){e.state;var t=e.commit;t("updateLoading",!1)}function C(e,t){e.state;var n=e.commit;t&&(t.type="show",n("updateFullscreenImage",t))}function x(e){e.state;var t=e.commit;t("updateFullscreenImage",{type:"hide"})}function R(e){var t=st.state.nim,n="";switch(e.gender){case"male":n="男";break;case"female":n="女";break;case"unknown":n="";break}var a=e.custom||"";try{a=JSON.parse(a)}catch(c){a={data:a}}e.avatar?e.avatar=t.viewImageSync({url:e.avatar,thumbnail:{width:40,height:40,mode:"cover"}}):e.avatar=M["a"].defaultUserIcon;var o=h()(e,{account:e.account,nick:e.nick||"",avatar:e.avatar||M["a"].defaultUserIcon,birth:e.birth||"",email:e.email||"",tel:e.tel||"",gender:n,sign:e.sign||"",custom:a,createTime:e.createTime||(new Date).getTime(),updateTime:e.updateTime||(new Date).getTime()});return o}function L(e){e=y["a"].mergeObject(st.state.myInfo,e);var t=R(e);st.commit("updateMyInfo",t)}function N(e){g()(e)||(e=[e]),e=e.map(R),st.commit("updateUserInfo",e)}function A(e){e=e.map(function(e){return"boolean"!==typeof e.isFriend&&(e.isFriend=!0),e}),st.commit("updateFriends",e),st.commit("updateUserInfo",e)}function P(e,t){e?alert(e):(g()(t)||(t=[t]),t=t.map(function(e){return"boolean"!==typeof e.isFriend&&(e.isFriend=!0),e}),st.dispatch("searchUsers",{accounts:t.map(function(e){return e.account}),done:function(e){var n=st.state.nim;t=n.mergeFriends(t,e).map(R),st.commit("updateFriends",t),st.commit("updateUserInfo",t)}}))}function D(e,t){e?alert(e):(g()(t)||(t=[t]),t=t.map(function(e){return e.isFriend=!1,e}),st.commit("updateFriends",[],t),st.commit("updateUserInfo",t))}function U(e){switch(e.type){case"addFriend":P(null,e.friend);break;case"applyFriend":break;case"passFriendApply":alert("你在其它端通过了一个好友申请"+e.account+", 附言"+e.ps),P(null,e.friend);break;case"rejectFriendApply":break;case"deleteFriend":D(null,{account:e.account});break;case"updateFriend":P(null,e.friend);break}}function E(e,t){var n=e.state,a=(e.commit,n.nim);a.updateFriend({account:t.account,alias:t.alias,done:P})}function F(e,t){var n=e.state,a=(e.commit,n.nim);a.addFriend({account:t,ps:"",done:P})}function j(e,t){var n=e.state,a=(e.commit,n.nim);a.deleteFriend({account:t,done:D})}function O(e){st.commit("updateRobots",e)}function _(e){e=e.map(function(e){return"boolean"!==typeof e.isBlack&&(e.isBlack=!0),e}),st.commit("updateBlacklist",e),st.commit("updateFriends",e),st.commit("updateUserInfo",e)}function B(e){e=e||obj2;var t=e.account;t===st.state.userUID||"boolean"===typeof e.isAdd&&_([{account:t,isBlack:e.isAdd}])}function $(e,t){var n=e.state,a=t.account,o=t.isBlack,c=n.nim;a&&"boolean"===typeof o&&c.markInBlacklist({account:a,isAdd:o,done:function(e,t){e?alert(e):B(t)}})}n("a481");function H(e){var t=[];e.forEach(function(e){"p2p"===e.scene&&(st.state.userInfos[e.to]||t.push(e.to))}),t.length>0&&st.dispatch("searchUsers",{accounts:t})}function V(e){H(e),st.commit("updateSessions",e)}function K(e){var t=[e];H(t),st.commit("updateSessions",t)}function Q(e,t){var n=e.state,a=e.commit,o=n.nim;t=t||"";var c=null,s=null;/^p2p-/.test(t)?(c="p2p",s=t.replace(/^p2p-/,"")):/^team-/.test(t)&&(c="team",s=t.replace(/^team-/,"")),s&&c&&o.deleteSession({scene:c,to:s,done:function(e,n){e?alert(e):o.deleteLocalSession({id:t,done:function(e,n){e?alert(e):a("deleteSessions",[t])}})}})}function Y(e,t){var n=e.state,a=e.commit,o=e.dispatch,c=n.nim;t&&(a("updateCurrSessionId",{type:"init",sessionId:t}),c&&(c.setCurrSession(t),a("updateCurrSessionMsgs",{type:"init",sessionId:t}),o("sendMsgReceipt")))}function q(e){var t=e.state,n=e.commit,a=t.nim;a.resetCurrSession(),n("updateCurrSessionMsgs",{type:"destroy"})}var G=n("f499"),W=n.n(G);function J(e){var t=st.state.nim;return"robot"===e.type&&e.content&&"bot"===e.content.flag&&e.content.message&&(e.content.message=e.content.message.map(function(e){switch(e.type){case"template":e.content=t.parseRobotTemplate(e.content);break;case"text":case"image":case"answer":break}return e})),e}function X(e){var t=e.msgs.map(function(e){return J(e)});st.commit("updateMsgs",t)}function z(e){var t=e.msgs.map(function(e){return J(e)});st.commit("updateMsgs",t)}function Z(e){e=J(e),st.commit("putMsg",e),e.sessionId===st.state.currSessionId&&(st.commit("updateCurrSessionMsgs",{type:"put",msg:e}),st.dispatch("sendMsgReceipt")),"team"===e.scene&&"notification"===e.type&&st.dispatch("onTeamNotificationMsg",e)}function ee(e,t){st.dispatch("hideLoading"),e&&(7101===e.code?(t.status="success",alert(e.message)):alert(e.message)),Z(t)}function te(e,t){var n=st.state.nim;if(e)508===e.code?alert("发送时间超过2分钟的消息，不能被撤回"):alert(e);else{var a="";if(t.from===st.state.userUID)a="你撤回了一条消息";else{var o=st.state.userInfos[t.from];a=o?"".concat(y["a"].getFriendAlias(o),"撤回了一条消息"):"对方撤回了一条消息"}n.sendTipMsg({isLocal:!0,scene:t.scene,to:t.to,tip:a,time:t.time,done:function(e,n){var a=t.deletedIdClient||t.idClient;st.commit("replaceMsg",{sessionId:t.sessionId,idClient:a,msg:n}),t.sessionId===st.state.currSessionId&&st.commit("updateCurrSessionMsgs",{type:"replace",idClient:a,msg:n})}})}}function ne(e,t){var n=e.state,a=(e.commit,n.nim),o=t,c=o.idClient;t=h()(t,n.msgsMap[c]),a.deleteMsg({msg:t,done:function(e){te(e,t)}})}function ae(e,t){var n=e.state;e.commit;st.commit("updateCurrSessionMsgs",{type:"replace",idClient:t.idClient,msg:t}),n.nim.updateLocalMsg({idClient:t.idClient,localCustom:t.localCustom}),st.commit("replaceMsg",{sessionId:t.sessionId,idClient:t.idClient,msg:t})}function oe(e,t){var n=e.state,a=(e.commit,n.nim);t=t||{};var o=t.type||"";switch(st.dispatch("showLoading"),o){case"text":a.sendText({scene:t.scene,to:t.to,text:t.text,done:ee,needMsgReceipt:t.needMsgReceipt||!1});break;case"custom":a.sendCustomMsg({scene:t.scene,to:t.to,pushContent:t.pushContent,content:W()(t.content),done:ee})}}function ce(e,t){var n=e.state,a=(e.commit,n.nim),o=t.type,c=t.fileInput;!o&&c&&(o="file",/\.(png|jpg|bmp|jpeg|gif)$/i.test(c.value)?o="image":/\.(mov|mp4|ogg|webm)$/i.test(c.value)&&(o="video")),st.dispatch("showLoading");var s=h()({type:o,uploadprogress:function(e){},uploaderror:function(){c.value="",console&&console.log("上传失败")},uploaddone:function(e,t){c.value=""},beforesend:function(e){},done:function(e,t){ee(e,t)}},t);a.sendFile(s)}function se(e,t){var n=e.state,a=(e.commit,n.nim),o=t.type,c=t.scene,s=t.to,i=t.robotAccid,r=t.content,u=t.params,m=t.target,d=t.body;c=c||"p2p","text"===o?a.sendRobotMsg({scene:c,to:s,robotAccid:i||s,content:{type:"text",content:r},body:d,done:ee}):"welcome"===o?a.sendRobotMsg({scene:c,to:s,robotAccid:i||s,content:{type:"welcome"},body:d,done:ee}):"link"===o&&a.sendRobotMsg({scene:c,to:s,robotAccid:i||s,content:{type:"link",params:u,target:m},body:d,done:ee})}function ie(e){var t=e.state,n=(e.commit,st.state.currSessionId);if(n&&"p2p"===y["a"].parseSession(n).scene){st.state.currSessionMsgs;var a=t.nim;t.sessionMap[n]&&a.sendMsgReceipt({msg:t.sessionMap[n].lastMsg,done:function(e,t){}})}}function re(e,t){var n=e.state,a=e.commit,o=n.nim;if(o){var c=t.scene,s=t.to,i={scene:c,to:s,reverse:!1,asc:!0,limit:M["a"].localMsglimit||20,done:function(e,t){if(t.msgs)if(0===t.msgs.length)a("setNoMoreHistoryMsgs");else{var n=t.msgs.map(function(e){return J(e)});a("updateCurrSessionMsgs",{type:"concat",msgs:n})}st.dispatch("hideLoading")}};n.currSessionLastMsg&&(i=h()(i,{lastMsgId:n.currSessionLastMsg.idServer,endTime:n.currSessionLastMsg.time})),st.dispatch("showLoading"),o.getHistoryMsgs(i)}}function ue(e){var t=e.commit;t("resetNoMoreHistoryMsgs")}function me(e,t){var n=e.commit;n("continueRobotMsg",t)}function de(e){st.commit("updateSysMsgs",e)}function fe(e){switch(e.type){case"addFriend":P(null,{account:e.from}),st.commit("updateSysMsgs",[e]);break;case"deleteFriend":D(null,{account:e.from});break;case"deleteMsg":"p2p"===e.scene?e.sessionId="p2p-".concat(e.from):e.sessionId="team-".concat(e.to),te(null,e);break;case"teamInvite":case"applyTeam":case"rejectTeamApply":case"rejectTeamInvite":st.commit("updateSysMsgs",[e]);break}st.commit("updateSysMsgState",e)}function le(e){st.commit("updateSysMsgUnread",e)}function he(e){console.log(e),g()(e)||(e=[e]),e=e.filter(function(e){if("custom"===e.type&&e.content)try{var t=JSON.parse(e.content);if(t.id+""==="1")return!1}catch(n){}return!0}),e.length>0&&st.commit("updateCustomSysMsgs",e)}function pe(e,t){var n=e.state,a=(e.commit,n.nim),o=[];o=t&&t.sysMsgs?t.sysMsgs:n.sysMsgs,g()(o)&&o.length>0&&a.markSysMsgRead({sysMsgs:o,done:function(e,t){}})}function ge(e){e.state;var t=e.commit;t("updateCustomSysMsgUnread",{type:"reset"})}function be(e,t){e.state;var n=e.commit;n("resetSysMsgs",t)}function ve(e,t){var n=e.commit;n("deleteSysMsgs",t)}function ke(e){g()(e)||(e=[e]),e=e.filter(function(e){return!!e}),e.forEach(function(e){void 0===e.validToCurrentUser&&(e.validToCurrentUser=!0),e.avatar&&e.avatar.indexOf("nim.nosdn.127")>0&&-1===e.avatar.indexOf("?imageView")&&(e.avatar=e.avatar+"?imageView&thumbnail=300y300")}),st.commit("updateTeamList",e)}function ye(e){st.commit("updateTeamMembers",e)}function Me(e){ke(e),ye({teamId:e.teamId,members:[]})}function Ie(e){ke(e)}function we(e){st.commit("updateTeamList",{invalid:{teamId:e.teamId}})}function Se(e){ke(e)}function Te(e,t){e.state,e.commit;"updateTeam"===t.attach.type&&t.attach.team&&st.commit("updateTeamInfo",t.attach.team),"transferTeam"===t.attach.type&&ye({teamId:t.attach.team.teamId,members:t.attach.members})}function Ce(e){e.accounts.forEach(function(t){if(t===st.state.userUID){var n=[e.team];ke(n)}}),ye({teamId:e.team.teamId,members:e.members})}function xe(e){e.accounts.forEach(function(t){if(t===st.state.userUID){e.team.validToCurrentUser=!1;var n=[e.team];ke(n)}}),st.commit("removeTeamMembersByAccounts",{teamId:e.team.teamId,accounts:e.accounts})}function Re(e){ye({teamId:e.teamId,members:e})}function Le(e){ye({teamId:e.team.teamId,members:e.members})}function Ne(e){ye({teamId:e.team.teamId,members:e.members})}function Ae(e){e.teamMsgReceipts.forEach(function(e){e.teamId===st.state.currReceiptQueryTeamId&&st.commit("updateSingleTeamMsgReads",e)}),console.log("群消息回执通知"+e)}function Pe(e,t){var n=e.commit;n("updateTeamSettingConfig",t),setTimeout(function(){location.href="#/teamsetting"},20)}function De(e,t){var n=e.state,a=t.functionName,o=t.options,c=n.nim;if(!a||!c[a]||"function"!==typeof c[a])throw"There is not property of '".concat(a,"' in nim or '").concat(a,"' is not a function");c[a](o)}function Ue(e,t){var n=e.state,a=n.nim;a?a.getTeamMembers({teamId:t,done:function(e,n){n.members?ye({teamId:n.teamId,members:n.members}):setTimeout(function(){Ue(st,t)},200)}}):setTimeout(function(){Ue(st,t)},200)}function Ee(e,t){var n=e.state,a=/team-(\d+)/.exec(n.currSessionId);if(!a)return null;var o=a[1],c=Fe(n,o,t);c&&c.length>0&&nim.sendTeamMsgReceipt({teamMsgReceipts:c,done:function(e,t,n){console.log("标记群组消息已读"+(e?"失败":"成功")),e||st.commit("updateSentReceipedMap",c)}}),st.commit("updateReceiptQueryList",{teamId:o,msgs:t})}function Fe(e,t,n){var a=e.sentReceipedMap[t]||[],o=n.filter(function(t){return t.needMsgReceipt&&t.from!==e.myInfo.account&&!a.find(function(e){return e===t.idServer})}).map(function(e){return{teamId:t,idServer:e.idServer}});return o}function je(e,t){e.state;nim.getTeamMsgReads({teamMsgReceipts:t,done:function(e,t,n){e?console.log("获取群组消息已读"+e):(console.log("获取群组消息已读：",n),st.commit("updateTeamMsgReads",n))}})}function Oe(e,t){var n=e.state,a=e.commit,o=e.dispatch;n.nim&&n.nim.disconnect(),o("showLoading"),window.nim=n.nim=SDK.NIM.getInstance({debug:!0,appKey:M["a"].appkey,account:t.uid,token:t.sdktoken,transports:["websocket"],db:M["a"].useDb,syncSessionUnread:!0,syncRobots:!0,autoMarkRead:!0,onconnect:function(e){t&&a("updateUserUID",t)},onerror:function(e){alert("网络连接状态异常"),location.href=M["a"].loginUrl},onwillreconnect:function(){console.log(event)},ondisconnect:function(e){switch(e.code){case 302:w["a"].turnPage("帐号或密码错误","login");break;case"kicked":var t={PC:"电脑版",Web:"网页版",Android:"手机版",iOS:"手机版",WindowsPhone:"手机版"},n=e.from,a="你的帐号于".concat(y["a"].formatDate(new Date),"被").concat(t[n]||"其他端","踢出下线，请确定帐号信息安全!");w["a"].turnPage(a,"login");break;default:break}},onblacklist:_,onsyncmarkinblacklist:B,onfriends:A,onsyncfriendaction:U,onrobots:O,onmyinfo:L,onupdatemyinfo:L,onusers:N,onupdateuser:N,onteams:ke,onsynccreateteam:Ie,syncTeams:!0,onteammembers:ye,onCreateTeam:Me,onDismissTeam:we,onUpdateTeam:Se,onAddTeamMembers:Ce,onRemoveTeamMembers:xe,onUpdateTeamManagers:Ne,onupdateteammember:Re,onUpdateTeamMembersMute:Le,onTeamMsgReceipt:Ae,onsessions:V,onupdatesession:K,onroamingmsgs:X,onofflinemsgs:z,onmsg:Z,onsysmsg:fe,onofflinesysmsgs:de,onupdatesysmsg:fe,onsysmsgunread:le,onupdatesysmsgunread:le,onofflinecustomsysmsgs:he,oncustomsysmsg:he,onsyncdone:function(){o("hideLoading"),st.state.currSessionId&&o("setCurrSession",st.state.currSessionId)}}),window.nim.useDb=M["a"].useDb}function _e(e){g()(e)||(e=[e]),e=e.map(function(e){return J(e)}),st.state.currChatroomId&&st.commit("updateCurrChatroomMsgs",{type:"put",msgs:e})}function Be(e,t){st.dispatch("hideLoading"),e?alert(e.message):_e([t])}function $e(e,t){var n=e.state,a=(e.commit,n.currChatroom);t=t||{};var o=t.type||"";switch(st.dispatch("showLoading"),o){case"text":a.sendText({text:t.text,done:Be});break;case"custom":a.sendCustomMsg({content:W()(t.content),pushContent:t.pushContent,done:Be})}}function He(e,t){var n=e.state,a=(e.commit,n.currChatroom),o=t.type,c=t.robotAccid,s=t.content,i=t.params,r=t.target,u=t.body;"text"===o?a.sendRobotMsg({robotAccid:c,content:{type:"text",content:s},body:u,done:Be}):"welcome"===o?a.sendRobotMsg({robotAccid:c,content:{type:"welcome"},body:u,done:Be}):"link"===o&&a.sendRobotMsg({robotAccid:c,content:{type:"link",params:i,target:r},body:u,done:Be})}function Ve(e,t){var n=e.state,a=(e.commit,n.currChatroom),o=h()({},t),c=o.fileInput,s="file";/\.(png|jpg|bmp|jpeg|gif)$/i.test(c.value)?s="image":/\.(mov|mp4|ogg|webm)$/i.test(c.value)&&(s="video"),st.dispatch("showLoading"),a.sendFile({type:s,fileInput:c,uploadprogress:function(e){},uploaderror:function(){c.value="",console&&console.log("上传失败")},uploaddone:function(e,t){c.value=""},beforesend:function(e){},done:function(e,t){Be(e,t)}})}function Ke(e,t){var n=e.state,a=e.commit,o=n.currChatroom;if(o){var c=h()({},t),s=c.timetag,i={timetag:s,limit:M["a"].localMsglimit||20,done:function(e,t){if(t.msgs)if(0===t.msgs.length)a("setNoMoreHistoryMsgs");else{var n=t.msgs.map(function(e){return J(e)});a("updateCurrChatroomMsgs",{type:"concat",msgs:n})}st.dispatch("hideLoading")}};st.dispatch("showLoading"),nim.getHistoryMsgs(i)}}function Qe(e,t){var n=e.state,a=e.commit,o=e.dispatch,c=t.chatroomId,s=t.address;c&&s?n.chatroomInsts[c]?n.chatroomInsts[c].connect():n.chatroomInsts[c]=SDK.Chatroom.getInstance({appKey:M["a"].appkey,account:n.userUID,token:n.sdktoken,transports:["websocket"],chatroomId:c,chatroomAddresses:s,onconnect:function(e){o("hideLoading"),a("setCurrChatroom",c)},onerror:function(e,t){o("hideLoading"),e&&(alert("网络连接状态异常"),location.href="#/room")},onwillreconnect:function(e){console.log("即将重连",e)},ondisconnect:function(e){if(o("hideLoading"),e)switch(e.code){case 302:break;case 13003:alert("抱歉，你已被主播拉入了黑名单"),location.href="#/room";break;case"kicked":"managerKick"===e.reason?(alert("你已被管理员移出聊天室"),location.href="#/room"):"blacked"===e.reason&&(alert("你已被管理员拉入黑名单，不能再进入"),location.href="#/room");break;default:console.log(e.message);break}},onmsgs:_e}):alert("没有聊天室地址")}function Ye(e,t){var n=e.state,a=e.commit;e.dispatch;if(t)n.chatroomInsts[t].disconnect();else for(var o in n.chatroomInsts)n.chatroomInsts[o].disconnect();a("resetCurrChatroom")}function qe(e){e.state;var t=e.commit;t("updateSearchlist",{type:"user",list:[]}),t("updateSearchlist",{type:"team",list:[]})}function Ge(e,t){var n=e.state,a=e.commit,o=t.accounts,c=t.done,s=n.nim;g()(o)||(o=[o]),s.getUsers({accounts:o,done:function(e,t){if(e)alert(e);else{a("updateSearchlist",{type:"user",list:t});var o=t.filter(function(e){var t=e.account;if(e.account===n.userUID)return!1;var a=n.userInfos[t]||{};return!a.isFriend});o=o.map(function(e){return R(e)}),a("updateUserInfo",o),c instanceof Function&&c(t)}}})}function We(e,t){var n=e.state,a=e.commit,o=t.teamId,c=t.done,s=n.nim;s.getTeam({teamId:o,done:function(e,t){if(e){if(803!==e.code)return void alert(e);t=[]}g()(t)||(t=[t]),t.forEach(function(e){e.avatar&&e.avatar.indexOf("nim.nosdn.127")>0&&-1===e.avatar.indexOf("?imageView")&&(e.avatar=e.avatar+"?imageView&thumbnail=300y300")}),a("updateSearchlist",{type:"team",list:t}),c instanceof Function&&c(t)}})}function Je(e,t){e.state;var n=e.commit;n("initChatroomInfos",t)}function Xe(e){var t=e.state,n=e.commit,a=(e.dispatch,t.currChatroom);a&&a.getChatroom({done:function(e,t){if(e)alert(e.message);else{t=t.chatroom||{creator:""};var o=t.creator;a.getChatroomMembersInfo({accounts:[o],done:function(e,a){e?alert(e.message):n("getChatroomInfo",h()(t,{actor:a.members[0]}))}})}}})}function ze(e){e.state;var t=e.commit;e.dispatch;Ze(!1,function(e){t("updateChatroomMembers",h()(e,{type:"put"})),Ze(!0,function(e){t("updateChatroomMembers",h()(e,{type:"put"}))})})}function Ze(e,t){var n=st.state.currChatroom;n&&n.getChatroomMembers({guest:e,limit:100,done:function(e,n){e?alert(e.message):t(n)}})}function et(e){e.state;var t=e.commit;t("updateChatroomMembers",{type:"destroy"})}function tt(e,t){var n=e.state,a=(e.commit,e.dispatch),o=h()({},t),c=o.force;if(!n.nim||c){var s={uid:k["a"].readCookie("uid"),sdktoken:k["a"].readCookie("sdktoken")};s.uid?a("initNimSDK",s):w["a"].turnPage("无历史登录记录，请重新登录","login")}}function nt(e,t){var n=e.state,a=(e.commit,e.dispatch),o=h()({},t),c=o.chatroomId,s=n.nim;s&&(a("showLoading"),s.getChatroomAddress({chatroomId:c,done:function(e,t){if(e)return alert(e.message),void(location.href="#/room");a("initChatroomSDK",t)}}))}var at={updateRefreshState:function(e){var t=e.commit;t("updateRefreshState")},showLoading:S,hideLoading:T,showFullscreenImg:C,hideFullscreenImg:x,continueRobotMsg:me,connect:function(e,t){var n=h()({},t),a=n.type;switch(a=a||"nim",a){case"nim":tt(e,t);break;case"chatroom":nt(e,t);break}},logout:function(e){var t=e.state;e.commit;k["a"].delCookie("uid"),k["a"].delCookie("sdktoken"),t.nim&&t.nim.disconnect(),w["a"].turnPage("","login")},initNimSDK:Oe,resetSearchResult:qe,searchUsers:Ge,updateBlack:$,addFriend:F,deleteFriend:j,updateFriend:E,deleteSession:Q,setCurrSession:Y,resetCurrSession:q,sendMsg:oe,sendFileMsg:ce,sendRobotMsg:se,sendMsgReceipt:ie,revocateMsg:ne,updateLocalMsg:ae,getHistoryMsgs:re,resetNoMoreHistoryMsgs:ue,markSysMsgRead:pe,markCustomSysMsgRead:ge,resetSysMsgs:be,deleteSysMsgs:ve,initChatroomSDK:Qe,initChatroomInfos:Je,resetChatroomSDK:Ye,sendChatroomMsg:$e,sendChatroomRobotMsg:He,sendChatroomFileMsg:Ve,getChatroomHistoryMsgs:Ke,getChatroomInfo:Xe,getChatroomMembers:ze,clearChatroomMembers:et,searchTeam:We,delegateTeamFunction:De,onTeamNotificationMsg:Te,enterSettingPage:Pe,getTeamMembers:Ue,checkTeamMsgReceipt:Ee,getTeamMsgReads:je},ot={isLoading:!0,isRefresh:!0,isFullscreenImgShow:!1,fullscreenImgSrc:"",transitionName:"forward",nim:null,userUID:null,myInfo:{},userInfos:{},userSubscribes:{},friendslist:[],robotslist:[],robotInfos:{},robotInfosByNick:{},blacklist:[],teamlist:[],teamMembers:{},muteTeamIds:[],teamSettingConfig:{},sentReceipedMap:{},currReceiptQueryTeamId:null,receiptQueryList:[],teamMsgReads:[],teamMsgReadsDetail:{readAccounts:[],unreadAccounts:[]},msgs:{},msgsMap:{},sessionlist:[],sessionMap:{},currSessionId:null,currSessionMsgs:[],noMoreHistoryMsgs:!1,continueRobotAccid:"",sysMsgs:[],customSysMsgs:[],sysMsgUnread:{total:0},customSysMsgUnread:0,searchedUsers:[],searchedTeams:[],chatroomInsts:{},chatroomInfos:{},chatroomMsgs:{},currChatroom:null,currChatroomId:null,currChatroomMsgs:[],currChatroomInfo:{},currChatroomMembers:[]};a["default"].use(o["a"]);var ct=new o["a"].Store({modules:{app:s,user:u},getters:d,state:ot,mutations:I,actions:at,plugins:[]}),st=t["a"]=ct},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a,o=n("2b0e"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-page",attrs:{id:"app"}},[!e.admin&&this.$store.state.user.showTabNav?n("div",{staticClass:"app-head"},[n("div",{on:{click:e.goLogin}},[e._v("登陆")]),n("div",{on:{click:e.goRegister}},[e._v("注册")])]):e._e(),e.admin&&this.$store.state.user.showTabNav?n("div",{staticClass:"app-head",staticStyle:{fontSize:"14px"}},[e._v("\n       欢迎你啊！"+e._s(e.Thename)+"\n       "),n("span",{staticStyle:{fontSize:"12px"},on:{click:e.golevel}},[e._v("更多权限")]),n("span",{staticStyle:{fontSize:"12px"},on:{click:e.logOut}},[e._v("退出")])]):e._e(),n("transition",{attrs:{name:"fade"}},[e.$route.meta.noAnima?n("router-view"):e._e()],1),n("nav-bar",{directives:[{name:"show",rawName:"v-show",value:e.showNav,expression:"showNav"}]}),n("transition",{attrs:{name:e.transitionName}},[e.$route.meta.noAnima?e._e():n("router-view")],1),n("div",{staticClass:"app-home",attrs:{id:"pic"},on:{click:function(t){return e.$router.push("/index")}}},[n("div",[e._v("首页")])])],1)},s=[],i=n("bfb3"),r=n.n(i),u=n("e814"),m=n.n(u),d=n("5f87"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]},[n("div",{staticClass:"weui-mask_transparent"}),e._m(0)])},l=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"weui-toast",staticStyle:{position:"absolute"}},[n("i",{staticClass:"weui-loading weui-icon_toast"}),n("p",{staticClass:"weui-toast__content"},[e._v("加载中")])])}],h={computed:{isLoading:function(){return this.$store.state.isLoading}}},p=h,g=n("2877"),b=Object(g["a"])(p,f,l,!1,null,null,null),v=(b.exports,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-fullscreen",class:{active:e.showImg},on:{click:function(t){return t.stopPropagation(),e.hideFullscreenImg(t)}}},[n("div",{staticClass:"chat-mask"}),n("div",{ref:"chatImg",staticClass:"chat-image"})])}),k=[],y={watch:{isFullscreenImgShow:function(e,t){var n=this,a=this.$refs.chatImg;if(!0===e){a.innerHTML="";var o=new Image;o.src=this.$store.state.fullscreenImgSrc,o.alt="图片尺寸较大，正在加载中...",o.onload=function(){a.appendChild(o),n.showImg=e}}else n.showImg=!1,a.innerHTML=""}},data:function(){return{showImg:!1}},computed:{isFullscreenImgShow:function(){return this.$store.state.isFullscreenImgShow}},methods:{hideFullscreenImg:function(){this.$store.dispatch("hideFullscreenImg")}}},M=y,I=(n("1739"),Object(g["a"])(M,v,k,!1,null,null,null)),w=(I.exports,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"session-nav g-header"},[n("div",[n("router-link",{attrs:{to:{name:"session"}}},[e._v("最近会话")])],1),n("div",[n("router-link",{attrs:{to:{name:"contacts"}}},[e._v("通讯录")])],1),n("div",[n("router-link",{attrs:{to:{name:"room"}}},[e._v("直播间")])],1),n("div",[n("router-link",{attrs:{to:{name:"general"}}},[e._v("设置")])],1)])}),S=[],T=n("bd86"),C=(n("7f7f"),n("b970")),x={components:(a={},Object(T["a"])(a,C["m"].name,C["m"]),Object(T["a"])(a,C["n"].name,C["n"]),a),data:function(){return{}},computed:{route:function(){return this.$store.getters.route}},methods:{changePage:function(e){console.log()}}},R=x,L=(n("1ce2"),Object(g["a"])(R,w,S,!1,null,null,null)),N=L.exports,A=(n("f3e4"),n("a78e")),P=n.n(A),D=n("5def"),U=window.sessionStorage,E={name:"app",data:function(){return{admin:Object(d["b"])(),Thename:Object(d["a"])(),transitionName:"forward",position:{x:0,y:0},nx:"",ny:"",dx:"",dy:"",xPum:"",yPum:"",x:"",y:""}},watch:{$route:function(e,t){if(e&&t){var n=e.path,a=t.path,o=m()(U.getItem("count"));if(r()(o))o=1,this.transitionName="forward";else{o+=1;var c=m()(U.getItem(a)),s=m()(U.getItem(n));s<c&&c<o&&!D["a"].showNav(a)?(this.transitionName="backward",o=s):this.transitionName="forward",D["a"].showNav(n)&&(o=1)}U.setItem(n,o),U.setItem("count",o)}}},updated:function(){},components:{NavBar:N},computed:{showNav:function(){return D["a"].showNav(this.$route.path)}},created:function(){this.admin=this.$store.state.user.admin,this.Thename=this.$store.state.user.Thename},mounted:function(){var e=document.querySelector("#pic");this.w=document.documentElement.clientWidth||document.body.clientWidth,this.h=document.documentElement.clientHeight||document.body.clientHeight,this.x=e.offsetWidth,this.y=e.offsetHeight,e.addEventListener("touchstart",this.down,{passive:!1}),e.addEventListener("touchmove",this.move,{passive:!1})},methods:{goLogin:function(){this.$router.push({path:"/login"})},goRegister:function(){this.$router.push({path:"/register"})},golevel:function(){this.$router.push({path:"/level"})},logOut:function(){P.a.set("admin","",{expires:-1}),P.a.set("Thename","".Thename,{expires:-1}),window.location.reload()},down:function(){var e,t=document.querySelector("#pic");e=event.touches?event.touches[0]:event,this.position.x=e.clientX,this.position.y=e.clientY,this.dx=t.offsetLeft,this.dy=t.offsetTop},move:function(){var e,t=document.querySelector("#pic");e=event.touches?event.touches[0]:event,event.preventDefault(),this.nx=e.clientX-this.position.x,this.ny=e.clientY-this.position.y,this.xPum=this.dx+this.nx,this.yPum=this.dy+this.ny,this.xPum=this.xPum>0?this.xPum:0,this.yPum=this.yPum>0?this.yPum:0,this.xPum=this.xPum>this.w-this.x?this.w-this.x:this.xPum,this.yPum=this.yPum>this.h-this.y?this.h-this.y:this.yPum,t.style.left=this.xPum+"px",t.style.top=this.yPum+"px"}}},F=E,j=(n("5c0b"),Object(g["a"])(F,c,s,!1,null,null,null)),O=j.exports,_=n("8c4f");o["default"].use(_["a"]);var B=[{path:"*",redirect:"/index",meta:{title:"商品结算",noAnima:!0}},{path:"/login",name:"login",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-7044a42a")]).then(n.bind(null,"0ba6"))},meta:{title:"登录",noAnima:!0}},{path:"/register",name:"register",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-42c67d5c")]).then(n.bind(null,"3d01"))},meta:{title:"注册",noAnima:!0}},{path:"/footprint",name:"footprint",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-2abbcf86"),n.e("chunk-484263bf")]).then(n.bind(null,"7a2f"))},meta:{title:"留言板",noAnima:!0}},{path:"/aboutMe",name:"aboutMe",component:function(){return n.e("chunk-4adae60d").then(n.bind(null,"85df"))},meta:{title:"关于本站",noAnima:!0}},{path:"/chatRoom",name:"chatRoom",component:function(){return n.e("chunk-7b77d1ba").then(n.bind(null,"2e3a"))},meta:{title:"聊天室",noAnima:!0}},{path:"/test1",name:"test1",component:function(){return n.e("chunk-2d21645e").then(n.bind(null,"c281"))},meta:{title:"关于本站",noAnima:!0}},{path:"/level",name:"level",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-50d2da58")]).then(n.bind(null,"88d7"))},meta:{title:"权限",noAnima:!0}},{path:"/index",name:"index",component:function(){return n.e("chunk-475ea7a5").then(n.bind(null,"b533"))},meta:{title:"syf",noAnima:!0}},{path:"/upLoad",name:"upLoad",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-2abbcf86"),n.e("chunk-4e8bbd50")]).then(n.bind(null,"e6a9"))},meta:{title:"上传",noAnima:!0}},{path:"/blogUpload",name:"blogUpload",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-2abbcf86"),n.e("chunk-52b6f99a")]).then(n.bind(null,"275d"))},meta:{title:"BLOG上传",noAnima:!0}},{path:"/blog",name:"blog",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-1ec9674a")]).then(n.bind(null,"7064"))},meta:{title:"BLOG",noAnima:!0}},{path:"/readBlog",name:"readBlog",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-763815dd")]).then(n.bind(null,"c3ca"))},meta:{title:"MyBLOG",noAnima:!0}},{path:"/myfile",name:"myfile",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-530ce530")]).then(n.bind(null,"131e"))},meta:{title:"文件夹",noAnima:!0}},{path:"/read",name:"read",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-5ecef65f")]).then(n.bind(null,"5dd0"))},meta:{title:"浏览",noAnima:!0}},{path:"/readPage",name:"readPage",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-1a4912b7")]).then(n.bind(null,"3340"))},meta:{title:"浏览",noAnima:!0}},{path:"/readPage2",name:"readPage2",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-5be6bfbf")]).then(n.bind(null,"f371"))},meta:{title:"浏览",noAnima:!0}},{path:"/readPage3",name:"readPage3",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-28ac5158")]).then(n.bind(null,"8294"))},meta:{title:"浏览",noAnima:!0}},{path:"/im",name:"im",component:function(){return n.e("chunk-2dfd7466").then(n.bind(null,"4502"))},meta:{title:"im"}},{path:"/map",name:"map",component:function(){return n.e("chunk-426f1d88").then(n.bind(null,"1692"))},meta:{title:"map"}},{path:"/music",name:"music",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-9128c356")]).then(n.bind(null,"228f"))},meta:{title:"music"}},{path:"/anime",name:"anime",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-2a52e2fc")]).then(n.bind(null,"ed90"))},meta:{title:"anime"}},{path:"/animeDetail",name:"animeDetail",component:function(){return Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-4947c5c2")]).then(n.bind(null,"4359"))},meta:{title:"animeDetail"}},{path:"/login2",name:"login2",component:function(e){n.e("chunk-b2cf3d7a").then(function(){var t=[n("4e7a")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/register2",name:"register2",component:function(e){n.e("chunk-2d2223f4").then(function(){var t=[n("ce95")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/session",name:"session",component:function(e){n.e("chunk-ac6f9626").then(function(){var t=[n("ad09")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/sysmsgs",name:"sysmsgs",component:function(e){n.e("chunk-44155956").then(function(){var t=[n("a78b")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/chat/:sessionId",name:"chat",component:function(e){Promise.all([n.e("chunk-e4dbe8ea"),n.e("chunk-c12077d2"),n.e("chunk-6d357cfc")]).then(function(){var t=[n("ab55")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/chathistory/:sessionId",name:"chathistory",component:function(e){Promise.all([n.e("chunk-e4dbe8ea"),n.e("chunk-3395744e")]).then(function(){var t=[n("e7ee")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/room",name:"room",component:function(e){Promise.all([n.e("chunk-e8f5e4a6"),n.e("chunk-03d20be1")]).then(function(){var t=[n("9a03")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/roomChat/:chatroomId",name:"roomChat",component:function(e){Promise.all([n.e("chunk-e4dbe8ea"),n.e("chunk-c12077d2"),n.e("chunk-64769e7a")]).then(function(){var t=[n("bd3f")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/contacts",name:"contacts",component:function(e){n.e("chunk-263f7506").then(function(){var t=[n("9bdf")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/namecard/:userId",name:"namecard",component:function(e){n.e("chunk-321576c8").then(function(){var t=[n("ba44")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/namecardremark/:userId",name:"namecardremark",component:function(e){n.e("chunk-2d0d6f9e").then(function(){var t=[n("759c")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/searchuser/:searchType",name:"searchuser",component:function(e){n.e("chunk-666ff67d").then(function(){var t=[n("6ab3")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teaminvite/:teamId",name:"teaminvite",component:function(e){n.e("chunk-6a82f1ca").then(function(){var t=[n("de22")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/general",name:"general",component:function(e){n.e("chunk-2d0e921d").then(function(){var t=[n("8bda")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teamlist/:teamType",name:"teamlist",component:function(e){n.e("chunk-79aa06b7").then(function(){var t=[n("f99e")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teamcard/:teamId",name:"teamcard",component:function(e){n.e("chunk-8163e59a").then(function(){var t=[n("f1ce")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teammanage/:teamId",name:"teammanage",component:function(e){n.e("chunk-16f932ec").then(function(){var t=[n("d338")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teamsetting",name:"teamsetting",component:function(e){n.e("chunk-cd39b9bc").then(function(){var t=[n("f461")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teammembers/:teamId",name:"teammembers",component:function(e){n.e("chunk-771dc3a6").then(function(){var t=[n("23f9")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teammembercard/:member",name:"teammembercard",component:function(e){n.e("chunk-7d403269").then(function(){var t=[n("1dce")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/teamSendMsgReceipt/:teamId",name:"TeamSeamMsgReceipt",component:function(e){n.e("chunk-716a2376").then(function(){var t=[n("b94e")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/msgReceiptDetail/:msgInfo",name:"msgReceiptDetail",component:function(e){n.e("chunk-40bcb8c8").then(function(){var t=[n("3bf8")];e.apply(null,t)}.bind(this)).catch(n.oe)}}],$=new _["a"]({routes:B}),H=n("5c96"),V=n.n(H);n("c69f");o["default"].use(V.a);n("157a");var K=n("28dd"),Q=n("953d"),Y=n.n(Q),q=(n("a753"),n("8096"),n("14e1"),n("4360")),G=["/index","/login","/register","/blog","/readBlog","/blogUpload","/upLoad","/myfile","/read","/readPage","/readPage2","/readPage3","/footprint","/aboutMe"];$.beforeEach(function(e,t,n){-1!==G.indexOf(e.path)?q["a"].commit("SET_showTabNav",!0):q["a"].commit("SET_showTabNav",!1),n()});n("1157");var W=n("4aa6"),J=n.n(W),X=J()(null);X.install=function(e){e.directive("touch",{bind:function(e,t,n){n=n||{};var a=t.arg.toLowerCase(),o=0,c="",s=null,i=null;function r(e,t){return 180*Math.atan2(t,e)/Math.PI}function u(e,t,n,a){var o=t-a,c=n-e,s=0;if(Math.abs(c)<2&&Math.abs(o)<2)return s;var i=r(c,o);return i>=-45&&i<45?s="swiperight":i>=45&&i<135?s="swipeup":i>=-135&&i<-45?s="swipedown":(i>=135&&i<=180||i>=-180&&i<-135)&&(s="swipeleft"),s}e.addEventListener("touchstart",function(e){s=e.touches[0].pageX,i=e.touches[0].pageY,o=setTimeout(function(){o=0,"hold"===a&&t.value(n)},800)},!1),e.addEventListener("touchmove",function(e){o&&(clearTimeout(o),o=0)}),e.addEventListener("touchend",function(e){o&&(clearTimeout(o),o=0);var r=e.changedTouches[0].pageX,m=e.changedTouches[0].pageY;switch(c=u(s,i,r,m),c){case 0:"tap"===a&&t.value(n);break;case"swipeup":"swipeup"===a&&t.value(n);break;case"swipedown":"swipedown"===a&&t.value(n);break;case"swipeleft":"swipeleft"===a&&t.value(n);break;case"swiperight":"swiperight"===a&&t.value(n);break;default:break}},!1)}})};var z=X;o["default"].use(z),n("b841"),o["default"].use(Y.a),o["default"].use(K["a"]),o["default"].use(C["p"]),o["default"].config.productionTip=!1,new o["default"]({router:$,store:q["a"],components:{App:O},render:function(e){return e(O)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var a=n("5e27"),o=n.n(a);o.a},"5def":function(e,t,n){"use strict";var a=n("f61f"),o={login:a["a"].loginUrl,regist:a["a"].registUrl},c=null,s={turnPage:function(e,t){e&&alert(e),t&&(o[t]&&(t=o[t]),window.location.href=t)},showNav:function(e){switch(e){case"/":return!0;case"/session":return!0;case"/contacts":return!0;case"/room":return!0;case"/general":return!0;default:return!1}},scrollChatListDown:function(e,t){var n=document.getElementById("chat-list");if(n){var a=5;t=t||1,"number"!==typeof e&&(e=Math.max(n.scrollHeight-n.clientHeight,888888)),n.scrollTop=e,n.scrollTop<e&&t<a&&(clearTimeout(c),c=setTimeout(function(){t++,s.scrollChatListDown(e,t)},200))}},getChatListHeight:function(){return document.getElementById("chat-list").scrollHeight},getChatListScroll:function(){return document.getElementById("chat-list").scrollTop}};t["a"]=s},"5e27":function(e,t,n){},"5f87":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var a=n("a78e"),o=n.n(a);function c(){return o.a.get("Thename")}function s(){return o.a.get("admin")}},af98:function(e,t,n){},b841:function(e,t,n){"use strict";n.r(t);n("20d6"),n("7514");Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var a=arguments[1],o=0;while(o<n){var c=t[o];if(e.call(a,c,o,t))return c;o++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!==typeof e)throw new TypeError("predicate must be a function");var a=arguments[1],o=0;while(o<n){var c=t[o];if(e.call(a,c,o,t))return o;o++}return-1}})},c69f:function(e,t,n){},ed08:function(e,t,n){"use strict";n("7f7f");var a=n("5176"),o=n.n(a),c=n("4aa6"),s=n.n(c),i=(n("b6d0"),n("774e"),n("ac6a"),n("a745"),n("28a5"),n("a4bb")),r=n.n(i),u=(n("0a0d"),n("a481"),n("e814"),n("7618")),m=n("2b0e"),d=n("4360");Function.prototype.bind||(Function.prototype.bind=function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return e.apply(n,t.concat(Array.prototype.slice.call(arguments)))}});var f=s()(null);f.encode=function(e,t){return t=""+t,e&&t?t.replace(e.r,function(t){var n=e[e.i?t:t.toLowerCase()];return null!=n?n:t}):t||""},f.escape=function(){var e=/<br\/?>$/,t={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(n){return n=f.encode(t,n),n.replace(e,"<br/>")}}(),f.object2query=function(e){var t=r()(e),n=t.map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))});return n.join("&")},f.mergeObject=function(e,t){return"object"===Object(u["a"])(e)&&null!==e||(e=s()(null)),e=o()(s()(null),e,t),e},f.mergeVueObject=function(e,t){var n=r()(t);return n.forEach(function(n){"undefined"!==typeof t[n]&&m["default"].set(e,n,t[n])}),e},f.mapMsgType=function(e){var t={text:"文本消息",image:"图片消息",file:"文件消息",audio:"语音消息",video:"视频消息",geo:"地理位置消息",tip:"提醒消息",custom:"自定义消息",notification:"系统通知",robot:"机器人消息"},n=e.type;return t[n]||"未知消息类型"},f.stringifyDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];e=new Date(e);var a=e.getFullYear(),o=e.getYear()-100,c=e.getMonth()+1;c=c>9?c:"0"+c;var s=e.getDate();s=s>9?s:"0"+s;var i=e.getHours();i=i>9?i:"0"+i;var r=e.getMinutes();r=r>9?r:"0"+r;var u=e.getDay();u=n[u];var m=new Date(a,c-1,s,0,0,0).getTime();return t?{withYear:"".concat(s,"/").concat(c,"/").concat(o),withMonth:"".concat(c,"-").concat(s),withDay:"".concat(u),withLastDay:"昨天",withHour:"".concat(i,":").concat(r),thatDay:m}:{withYear:"".concat(a,"-").concat(c,"-").concat(s," ").concat(i,":").concat(r),withMonth:"".concat(c,"-").concat(s," ").concat(i,":").concat(r),withDay:"".concat(u," ").concat(i,":").concat(r),withLastDay:"昨天 ".concat(i,":").concat(r),withHour:"".concat(i,":").concat(r),thatDay:m}},f.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(new Date).getTime(),a=this.stringifyDate(e,t),o=a.thatDay,c=(n-o)/1e3;return c<86400?a.withHour:c<172800?a.withLastDay:c<604800?a.withDay:c<2592e3?a.withMonth:a.withYear},f.parseSession=function(e){return/^p2p-/.test(e)?{scene:"p2p",to:e.replace(/^p2p-/,"")}:/^team-/.test(e)?{scene:"team",to:e.replace(/^team-/,"")}:void 0},f.parseCustomMsg=function(e){if("custom"===e.type){try{var t=JSON.parse(e.content);switch(t.type){case 1:return"[猜拳消息]";case 2:return"[阅后即焚]";case 3:return"[贴图表情]";case 4:return"[白板消息]"}}catch(n){}return"[自定义消息]"}return""},f.getFriendAlias=function(e){return e.alias=e.alias?e.alias.trim():"",e.alias||e.nick||e.account},f.generateChatroomSysMsg=function(e){var t;switch(e.attach.type){case"memberEnter":t="欢迎".concat(e.attach.fromNick,"进入直播间");break;case"memberExit":t="".concat(e.attach.fromNick,"离开了直播间");break;case"blackMember":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员拉入黑名单");break;case"unblackMember":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员解除拉黑");break;case"gagMember":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员禁言");break;case"ungagMember":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员解除禁言");break;case"addManager":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被任命管理员身份");break;case"removeManager":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被解除管理员身份");break;case"addTempMute":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员临时禁言");break;case"removeTempMute":t="".concat(e.attach.toNick[0]||e.attach.to[0],"被管理员解除临时禁言");break;case"addCommon":t="管理员添加普通成员";break;case"removeCommon":t="管理员删除普通成员";break;case"kickMember":t="".concat(e.attach.toNick[0],"被管理员踢出房间");break;default:t="通知消息";break}return t},f.generateTeamSysmMsg=function(e){var t,n=this.getNickNames(e.attach.users);switch(e.attach.type){case"updateTeam":t=this.getTeamUpdateInfo(e);break;case"addTeamMembers":var a=n.pop();t="".concat(a,"邀请").concat(n.join(),"加入群");break;case"removeTeamMembers":var o=n.pop();t="".concat(n.join(),"被").concat(o,"移出群");break;case"acceptTeamInvite":var c=n.pop();t="".concat(n.join(),"接受了").concat(c,"入群邀请");break;case"passTeamApply":var s=n.shift();t=1===n.length&&s===n[0]?"".concat(s,"加入群"):"".concat(s,"通过了").concat(n,"入群邀请");break;case"addTeamManagers":var i=n.pop();t="".concat(i,"新增了").concat(n,"为管理员");break;case"removeTeamManagers":var r=n.pop();t="".concat(r,"移除了").concat(n,"的管理员权限");break;case"leaveTeam":t="".concat(n.join(),"退出了群");break;case"dismissTeam":t="".concat(n.join(),"解散了群");break;case"transferTeam":var u=this.getNickNames(e.attach.users),m=u.shift();t="".concat(m,"转让群主给").concat(u);break;case"updateTeamMute":var d=this.getNickNames(e.attach.users);d.shift();t="".concat(d,"被管理员").concat(e.attach.mute?"禁言":"解除禁言");break;default:break}return t},f.getNickNames=function(e){return e.map(function(e){return e.account===d["a"].state.userUID?"你":e.nick})},f.getTeamUpdateInfo=function(e){var t,n=e.attach.team,a=this.getNickNames(e.attach.users).pop();return t=n["name"]?"".concat(a,"修改群名为").concat(n["name"]):n["intro"]?"".concat(a,"修改群介绍为").concat(n["intro"]):n["joinMode"]?"群身份验证模式更新为".concat("noVerify"===n.joinMode?"不需要验证":"needVerify"===n.joinMode?"需要验证":"禁止任何人加入"):n["inviteMode"]?"邀请他人权限为".concat("all"===n["inviteMode"]?"所有人":"管理员"):n["updateTeamMode"]?"群资料修改权限为".concat("all"===n["updateTeamMode"]?"所有人":"管理员"):n["beInviteMode"]?"被邀请人身份".concat("noVerify"===n["beInviteMode"]?"不需要验证":"需要验证"):"更新群信息",t},f.teamConfigMap={joinMode:{noVerify:"不需要验证",needVerify:"需要验证",rejectAll:"禁止任何人加入"},beInviteMode:{needVerify:"需要验证",noVerify:"不需要验证"},inviteMode:{manager:"管理员邀请",all:"所有人邀请"},updateTeamMode:{manager:"管理员修改",all:"所有人修改"},memberType:{manager:"管理员",normal:"普通成员"}},t["a"]=f},f3e4:function(e,t,n){"use strict";n("4917"),n("3b2b");var a={setCookie:function(e,t){var n=1,a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},readCookie:function(e){var t=null,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return document.cookie&&(t=document.cookie.match(n))?unescape(t[2]):null},delCookie:function(e){var t=this.readCookie(e);null!=t&&(document.cookie=e+"="+t+";expires="+new Date(0).toGMTString())}};t["a"]=a},f61f:function(e,t,n){"use strict";var a=n("5176"),o=n.n(a),c={sdk:"NIM_Web_SDK_v6.1.0.js",loginUrl:"/#/login2",registUrl:"/#/regist2",homeUrl:"/#/session",resourceUrl:"http://yx-web.nos.netease.com/webdoc/h5",logo:"http://yx-web.nos.netease.com/webdoc/h5/im/logo.png",defaultUserIcon:"http://yx-web.nos.netease.com/webdoc/h5/im/default-icon.png",defaultGroupIcon:"http://yx-web.nos.netease.com/webdoc/h5/im/default-group.png",defaultAdvancedIcon:"http://yx-web.nos.netease.com/webdoc/h5/im/default-advanced.png",noticeIcon:"http://yx-web.nos.netease.com/webdoc/h5/im/notice-icon.png",myPhoneIcon:"http://yx-web.nos.netease.com/webdoc/h5/im/my-phone.png",localMsglimit:36,useDb:!1},s="online",i={test:{appkey:"fe416640c8e8a72734219e1847ad2547",postUrl:"https://apptest.netease.im"},online:{appkey:"45c6af3c98409b18a84451215d0bdd6e",postUrl:"https://app.netease.im"}};c=o()(c,i[s]),t["a"]=c}});
//# sourceMappingURL=app.b53fd38b.js.map